<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Add Copy Button to Code Blocks in Hexo</title>
    <url>/2025/03/26/Add-Copy-Button-to-Code-Blocks-in-Hexo/</url>
    <content><![CDATA[<h1 id="Hexo-ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®"><a href="#Hexo-ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®" class="headerlink" title="Hexo ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®"></a>Hexo ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®</h1><p>æœ¬æ–‡è¯¦ç»†è®°å½•å¦‚ä½•åœ¨ Hexo ä¸­ä¸ºä»£ç å—æ·»åŠ ä¸€ä¸ª â€œå¤åˆ¶â€ æŒ‰é’®ï¼Œå®ç°ä¸€é”®å¤åˆ¶ä»£ç åŠŸèƒ½ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜"><a href="#ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜" class="headerlink" title="ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜"></a>ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜</h2><p>æœ¬å¤åˆ¶åŠŸèƒ½è„šæœ¬é€‚ç”¨äºä»¥ä¸‹ç»“æ„çš„ä»£ç å—ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">figure</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;gutter&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;code&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>...<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ Hexo ä¸­å¤šæ•°ä¸»é¢˜ï¼ˆåŒ…æ‹¬ Chicã€NexTã€Butterfly ç­‰ï¼‰é»˜è®¤çš„ä»£ç å—æ¸²æŸ“ç»“æ„ã€‚</p>
<h3 id="å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ"><a href="#å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ" class="headerlink" title="å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ"></a>å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ</h3><ol>
<li>å¯åŠ¨æœ¬åœ°åšå®¢ï¼š<code>hexo s</code></li>
<li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åšå®¢é¡µé¢</li>
<li>å³é”®ä»£ç å— â†’ ç‚¹å‡»â€œæ£€æŸ¥â€</li>
<li>æŸ¥çœ‹ä»£ç å—çš„å¤–å±‚ HTML æ ‡ç­¾æ˜¯å¦ä¸º <code>figure.highlight</code> </li>
<li>æˆ–è€…ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡» <code>F12</code> ï¼Œåœ¨ <code>Elements</code> ä¸­ç›´æ¥æœç´¢æ˜¯å¦å«æœ‰ <code>figure.highlight</code></li>
</ol>
<hr>
<h2 id="1-åˆ›å»º-JavaScript-è„šæœ¬æ–‡ä»¶"><a href="#1-åˆ›å»º-JavaScript-è„šæœ¬æ–‡ä»¶" class="headerlink" title="1. åˆ›å»º JavaScript è„šæœ¬æ–‡ä»¶"></a><strong>1. åˆ›å»º JavaScript è„šæœ¬æ–‡ä»¶</strong></h2><p>åœ¨ Hexo åšå®¢é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º JS è„šæœ¬æ–‡ä»¶ <code>code-copy.js</code> ,å¦‚æœæ²¡æœ‰jsæ–‡ä»¶å¤¹åˆ™è‡ªå·±åˆ›å»ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source/js/code-copy.js</span><br></pre></td></tr></table></figure>

<p>å¹¶å¡«å…¥ä»¥ä¸‹å®Œæ•´å†…å®¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;figure.highlight&#x27;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">figure</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;.copy-btn&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> copyBtn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="property">className</span> = <span class="string">&#x27;copy-btn&#x27;</span>;</span><br><span class="line">    copyBtn.<span class="property">title</span> = <span class="string">&#x27;å¤åˆ¶&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼©å°åçš„å¤åˆ¶å›¾æ ‡ï¼ˆ14*15ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> copyIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;white&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆåŠŸåæ˜¾ç¤ºçš„å‹¾ï¼ˆ14*15ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> checkIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;#00cc66&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰é’®æ ·å¼ï¼ˆæµ…ç°åº•ã€ç¼©å°ï¼‰</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(copyBtn.<span class="property">style</span>, &#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">      <span class="attr">top</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">padding</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">background</span>: <span class="string">&#x27;#aaa&#x27;</span>, </span><br><span class="line">      <span class="attr">border</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">      <span class="attr">borderRadius</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">cursor</span>: <span class="string">&#x27;pointer&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="string">&#x27;0.85&#x27;</span>,</span><br><span class="line">      <span class="attr">zIndex</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="attr">transition</span>: <span class="string">&#x27;opacity 0.2s ease&#x27;</span>,</span><br><span class="line">      <span class="attr">boxShadow</span>: <span class="string">&#x27;0 1px 3px rgba(0, 0, 0, 0.15)&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0.85&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> code = figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;td.code&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> text = code ? code.<span class="property">innerText</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(text).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        copyBtn.<span class="property">innerHTML</span> = checkIcon;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    figure.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">    figure.<span class="title function_">appendChild</span>(copyBtn);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-JS-æ–‡ä»¶"><a href="#2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-JS-æ–‡ä»¶" class="headerlink" title="2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ JS æ–‡ä»¶"></a><strong>2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ JS æ–‡ä»¶</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/footer.ejs</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>&lt;/footer&gt;</code> æ ‡ç­¾ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/code-copy.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å¯ä»¥ç¡®ä¿å¤åˆ¶æŒ‰é’®è„šæœ¬åœ¨é¡µé¢åŠ è½½å®Œæ¯•åè‡ªåŠ¨è¿è¡Œã€‚</p>
<hr>
<h2 id="3-ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ"><a href="#3-ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ" class="headerlink" title="3. ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ"></a><strong>3. ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ</strong></h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—® <code>http://localhost:4000</code>ï¼ŒæŸ¥çœ‹ä»»æ„ä¸€æ®µä»£ç å—ï¼Œå³ä¸Šè§’åº”å‡ºç°å¤åˆ¶å›¾æ ‡æŒ‰é’®ã€‚</p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Convert PDF Tables to Readable Text</title>
    <url>/2025/03/28/Convert-PDF-Tables-to-Readable-Text/</url>
    <content><![CDATA[<h1 id="PDF-è¡¨æ ¼æå–è½¬ä¸ºçº¯æ–‡æœ¬ç»“æ„æ•°æ®"><a href="#PDF-è¡¨æ ¼æå–è½¬ä¸ºçº¯æ–‡æœ¬ç»“æ„æ•°æ®" class="headerlink" title="PDF è¡¨æ ¼æå–è½¬ä¸ºçº¯æ–‡æœ¬ç»“æ„æ•°æ®"></a>PDF è¡¨æ ¼æå–è½¬ä¸ºçº¯æ–‡æœ¬ç»“æ„æ•°æ®</h1><p>æœ¬æ–‡è¯¦ç»†è®°å½•äº†å¦‚ä½•ä½¿ç”¨è¯»å…‰çš„  Cycle-CenterNet æœ‰çº¿è¡¨æ ¼è¯†åˆ«æ¨¡å‹è¿›è¡Œè¡¨æ ¼ç»“æ„è¯†åˆ«ï¼Œä»¥åŠ PaddleOCR è¿›è¡Œæ–‡æœ¬è¯†åˆ«ï¼Œå°† PDF ä¸­çš„è¡¨æ ¼å›¾åƒè½¬ä¸ºå¤§æ¨¡å‹å¯ä»¥ç†è§£çš„è¡¨æ ¼ç»“æ„ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Table_Extraction.git">https://github.com/EvannZhongg/Table_Extraction.git</a></p>
<hr>
<h2 id="é¡¹ç›®æ¦‚è§ˆ"><a href="#é¡¹ç›®æ¦‚è§ˆ" class="headerlink" title="é¡¹ç›®æ¦‚è§ˆ"></a><strong>é¡¹ç›®æ¦‚è§ˆ</strong></h2><p>æœ¬é¡¹ç›®çš„ä¸»è¦ç›®æ ‡æ˜¯å°† PDF æ–‡ä»¶ä¸­å­˜åœ¨çš„è¡¨æ ¼ï¼Œä½œä¸ºå›¾ç‰‡æå–å‚æ•°ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ç»“æ„åŒ–è¡¨æ ¼ã€‚æ•´ä¸ªæµç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è¡¨æ ¼ç»“æ„è¯†åˆ«</strong> â€”â€” ä½¿ç”¨ Cycle-CenterNet æ¨¡å‹è¯†åˆ«è¡¨æ ¼ä¸­æ¯ä¸ªå•å…ƒæ ¼çš„ä½ç½®ï¼ˆå¤šè¾¹å½¢åæ ‡ï¼‰ã€‚</li>
<li><strong>OCR æ–‡æœ¬è¯†åˆ«</strong> â€”â€” ä½¿ç”¨ PaddleOCR è¯†åˆ«å›¾åƒä¸­æ‰€æœ‰æ–‡å­—åŠå…¶ä½ç½®åæ ‡ã€‚</li>
</ol>
<hr>
<h2 id="ç¯å¢ƒä¸è®¾ç½®"><a href="#ç¯å¢ƒä¸è®¾ç½®" class="headerlink" title="ç¯å¢ƒä¸è®¾ç½®"></a><strong>ç¯å¢ƒä¸è®¾ç½®</strong></h2><h3 id="1-è¡¨æ ¼è¯†åˆ«æ¨¡å‹é…ç½®"><a href="#1-è¡¨æ ¼è¯†åˆ«æ¨¡å‹é…ç½®" class="headerlink" title="1. è¡¨æ ¼è¯†åˆ«æ¨¡å‹é…ç½®"></a><strong>1. è¡¨æ ¼è¯†åˆ«æ¨¡å‹é…ç½®</strong></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git lfs install</span><br><span class="line">git <span class="built_in">clone</span> https://www.modelscope.cn/iic/cv_dla34_table-structure-recognition_cycle-centernet.git</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model_path = <span class="string">&quot;your_absolute_path_to_cv_dla34_table-structure-recognition_cycle-centernet&quot;</span></span><br></pre></td></tr></table></figure>
<p>å»ºè®®è‡ªå®šä¹‰è·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„</p>
<p>ä¾‹å¦‚ï¼š<code>model_path = &quot;D:/Table_Extraction/cv_dla34_table-structure-recognition_cycle-centernet&quot;</code></p>
<h3 id="2-PaddleOCR-é…ç½®"><a href="#2-PaddleOCR-é…ç½®" class="headerlink" title="2. PaddleOCR é…ç½®"></a><strong>2. PaddleOCR é…ç½®</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ocr = PaddleOCR(</span><br><span class="line">    use_gpu=<span class="literal">True</span>,</span><br><span class="line">    lang=<span class="string">&#x27;ch&#x27;</span>,</span><br><span class="line">    det_model_dir=<span class="string">&#x27;your_absolute_path_to_ch_PP-OCRv4_det_infer&#x27;</span>,</span><br><span class="line">    rec_model_dir=<span class="string">&#x27;your_absolute_path_to_ch_PP-OCRv4_rec_infer&#x27;</span>,</span><br><span class="line">    cls_model_dir=<span class="string">&#x27;your_absolute_path_to_ch_ppocr_mobile_v2.0_cls_infer&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å»ºè®®è‡ªå®šä¹‰è·¯å¾„ä½¿ç”¨ç»å¯¹è·¯å¾„</p>
<p>ä¾‹å¦‚ï¼š <code>det_model_dir=&#39;D:/Table_Extraction/PaddleOCR/models/ch_PP-OCRv4_det_infer/&#39;</code></p>
<hr>
<h2 id="æ ¸å¿ƒå‡½æ•°è¯¦è§£"><a href="#æ ¸å¿ƒå‡½æ•°è¯¦è§£" class="headerlink" title="æ ¸å¿ƒå‡½æ•°è¯¦è§£"></a><strong>æ ¸å¿ƒå‡½æ•°è¯¦è§£</strong></h2><h3 id="1-å‡½æ•°-calculate-iot-cell-text"><a href="#1-å‡½æ•°-calculate-iot-cell-text" class="headerlink" title="1. å‡½æ•° calculate_iot(cell, text)"></a><strong>1. å‡½æ•° <code>calculate_iot(cell, text)</code></strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šè®¡ç®— OCR æ–‡æœ¬æ¡†ä¸è¡¨æ ¼å•å…ƒæ ¼çš„äº¤å¹¶æ¯”ï¼ˆIoT, Intersection over Textï¼‰ã€‚</p>
<p><strong>åŸç†è¯´æ˜</strong>ï¼š</p>
<ul>
<li>åˆ©ç”¨ä¸¤ç»„çŸ©å½¢åæ ‡ï¼Œè®¡ç®—å®ƒä»¬é‡å åŒºåŸŸçš„é¢ç§¯ã€‚</li>
<li>ç„¶åç”¨é‡å é¢ç§¯ &#x2F; æ–‡æœ¬æ¡†é¢ç§¯ä½œä¸º IoT å€¼ã€‚</li>
<li>è‹¥å€¼è¶Šå¤§ï¼Œè¡¨ç¤ºæ–‡æœ¬è¶Šâ€œè´´åˆâ€å•å…ƒæ ¼ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_iot</span>(<span class="params">cell, text</span>):</span><br><span class="line">    intersection_x1 = <span class="built_in">max</span>(cell[<span class="number">0</span>], text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">0</span>])</span><br><span class="line">    intersection_y1 = <span class="built_in">max</span>(cell[<span class="number">1</span>], text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">1</span>])</span><br><span class="line">    intersection_x2 = <span class="built_in">min</span>(cell[<span class="number">2</span>], text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">2</span>])</span><br><span class="line">    intersection_y2 = <span class="built_in">min</span>(cell[<span class="number">3</span>], text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> intersection_x1 &gt;= intersection_x2 <span class="keyword">or</span> intersection_y1 &gt;= intersection_y2:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    intersection_area = (intersection_x2 - intersection_x1) * (intersection_y2 - intersection_y1)</span><br><span class="line">    text_area = (text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">2</span>] - text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">0</span>]) * (text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">3</span>] - text[<span class="string">&#x27;coords&#x27;</span>][<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> intersection_area / text_area</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-å‡½æ•°-merge-text-into-cells-cell-coords-ocr-results"><a href="#2-å‡½æ•°-merge-text-into-cells-cell-coords-ocr-results" class="headerlink" title="2. å‡½æ•° merge_text_into_cells(cell_coords, ocr_results)"></a><strong>2. å‡½æ•° <code>merge_text_into_cells(cell_coords, ocr_results)</code></strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šå°† OCR è¯†åˆ«åˆ°çš„æ–‡å­—åˆ†é…åˆ°è¡¨æ ¼å¯¹åº”å•å…ƒæ ¼ä¸­ã€‚</p>
<p><strong>åŸç†è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å¯¹æ¯ä¸ªå•å…ƒæ ¼éå†æ‰€æœ‰ OCR æ–‡æœ¬æ¡†ï¼Œè®¡ç®— IoTã€‚</li>
<li>è‹¥ IoT &gt; 0.5ï¼Œåˆ™è®¤ä¸ºè¯¥æ–‡å­—å±äºè¯¥å•å…ƒæ ¼ã€‚</li>
<li>åŒæ—¶è®°å½•é‚£äº›ä¸æ‰€æœ‰å•å…ƒæ ¼ IoT &lt; 0.1 çš„æ–‡å­—ï¼ˆéè¡¨æ ¼å†…å®¹ï¼‰ã€‚</li>
<li>å°†å±äºå•å…ƒæ ¼çš„æ–‡å­—åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_text_into_cells</span>(<span class="params">cell_coords, ocr_results</span>):</span><br><span class="line">    cell_text_dict = &#123;cell: [] <span class="keyword">for</span> cell <span class="keyword">in</span> cell_coords&#125;</span><br><span class="line">    noncell_text_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> cell <span class="keyword">in</span> cell_coords:</span><br><span class="line">        <span class="keyword">for</span> result <span class="keyword">in</span> ocr_results:</span><br><span class="line">            <span class="keyword">if</span> calculate_iot(cell, result) &gt; <span class="number">0.5</span>:</span><br><span class="line">                cell_text_dict[cell].append(result[<span class="string">&#x27;text&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> result <span class="keyword">in</span> ocr_results:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">all</span>(calculate_iot(cell, result) &lt; <span class="number">0.1</span> <span class="keyword">for</span> cell <span class="keyword">in</span> cell_coords):</span><br><span class="line">            noncell_text_dict[result[<span class="string">&#x27;coords&#x27;</span>]] = result[<span class="string">&#x27;text&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    merged_text = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> cell, texts <span class="keyword">in</span> cell_text_dict.items():</span><br><span class="line">        merged_text[cell] = <span class="string">&#x27;&#x27;</span>.join(texts).strip()</span><br><span class="line">    <span class="keyword">for</span> coords, text <span class="keyword">in</span> noncell_text_dict.items():</span><br><span class="line">        merged_text[coords] = <span class="string">&#x27;&#x27;</span>.join(text).strip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> merged_text</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-å‡½æ•°-adjust-coordinates-merged-text-image-path"><a href="#3-å‡½æ•°-adjust-coordinates-merged-text-image-path" class="headerlink" title="3. å‡½æ•° adjust_coordinates(merged_text, image_path)"></a><strong>3. å‡½æ•° <code>adjust_coordinates(merged_text, image_path)</code></strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šå°† y åæ ‡ç›¸è¿‘çš„å•å…ƒæ ¼è¿›è¡Œèšç±»å¹¶ç»Ÿä¸€åŒ–ï¼Œæ–¹ä¾¿åç»­è¡Œçº§åˆ«æ’åºã€‚</p>
<p><strong>åŸç†è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å›¾åƒè¶Šé«˜ï¼Œå®¹è®¸çš„ y åå·®è¶Šå¤§ï¼Œä½¿ç”¨ height &#x2F; 100 ä½œä¸ºå®¹å·®ã€‚</li>
<li>å°† y å€¼å·®è·å°äºé˜ˆå€¼çš„å•å…ƒæ ¼å½’ä¸ºä¸€ç»„ã€‚</li>
<li>æ¯ç»„å†…ç»Ÿä¸€ y å€¼ä¸ºè¯¥ç»„çš„å¹³å‡ y å€¼ï¼Œç¡®ä¿åœ¨åŒä¸€â€œæ°´å¹³è¡Œâ€å†…ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">adjust_coordinates</span>(<span class="params">merged_text, image_path</span>):</span><br><span class="line">    image = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line">    width, height = image.size</span><br><span class="line">    threshold = height / <span class="number">100</span></span><br><span class="line">    groups = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> coordinates, text <span class="keyword">in</span> merged_text.items():</span><br><span class="line">        found_group = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> group_y <span class="keyword">in</span> groups.keys():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(coordinates[<span class="number">1</span>] - group_y) &lt;= threshold:</span><br><span class="line">                groups[group_y].append((coordinates, text))</span><br><span class="line">                found_group = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> found_group:</span><br><span class="line">            groups[coordinates[<span class="number">1</span>]] = [(coordinates, text)]</span><br><span class="line"></span><br><span class="line">    adjusted_coordinates = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> group_y, group_coords <span class="keyword">in</span> groups.items():</span><br><span class="line">        avg_y = <span class="built_in">sum</span>(coord[<span class="number">0</span>][<span class="number">1</span>] <span class="keyword">for</span> coord <span class="keyword">in</span> group_coords) / <span class="built_in">len</span>(group_coords)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> group_coords:</span><br><span class="line">            adjusted_coordinates[(i[<span class="number">0</span>][<span class="number">0</span>], avg_y, i[<span class="number">0</span>][<span class="number">2</span>], i[<span class="number">0</span>][<span class="number">3</span>])] = i[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> adjusted_coordinates</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-å‡½æ•°-draw-text-boxes-image-path-boxes-texts"><a href="#4-å‡½æ•°-draw-text-boxes-image-path-boxes-texts" class="headerlink" title="4.å‡½æ•° draw_text_boxes(image_path, boxes, texts)"></a><strong>4.å‡½æ•° <code>draw_text_boxes(image_path, boxes, texts)</code></strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šåœ¨å›¾åƒä¸Šç»˜åˆ¶è¡¨æ ¼æ¡†ä¸æ–‡å­—å†…å®¹ï¼Œè¿›è¡Œå¯è§†åŒ–æ ‡æ³¨ã€‚</p>
<p><strong>åŸç†è¯´æ˜</strong>ï¼š</p>
<ul>
<li>åˆ©ç”¨ PIL åˆ›å»ºç©ºç™½å›¾å±‚ï¼Œç»˜åˆ¶æ¡†çº¿ä¸æ–‡å­—ã€‚</li>
<li>è‹¥æ–‡å­—å®½åº¦è¶…å‡ºå•å…ƒæ ¼å®½åº¦ï¼Œåˆ™ä½¿ç”¨ textwrap è¿›è¡Œè‡ªåŠ¨æ¢è¡Œã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">draw_text_boxes</span>(<span class="params">image_path, boxes, texts</span>):</span><br><span class="line">    img = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line">    img = Image.new(<span class="string">&#x27;RGB&#x27;</span>, img.size, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">    draw = ImageDraw.Draw(img)</span><br><span class="line">    font = ImageFont.truetype(<span class="string">&quot;./chinese_cht.ttf&quot;</span>, size=<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> box, text <span class="keyword">in</span> <span class="built_in">zip</span>(boxes, texts):</span><br><span class="line">        x0, y0, x1, y1 = box</span><br><span class="line">        x0, x1 = <span class="built_in">sorted</span>([x0, x1])</span><br><span class="line">        y0, y1 = <span class="built_in">sorted</span>([y0, y1])</span><br><span class="line">        normalized_box = (x0, y0, x1, y1)</span><br><span class="line">        draw.rectangle(normalized_box, outline=<span class="string">&#x27;red&#x27;</span>, width=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        text_len = draw.textbbox((x0, y0), text, font=font)</span><br><span class="line">        <span class="keyword">if</span> (text_len[<span class="number">2</span>] - text_len[<span class="number">0</span>]) &gt; (x1 - x0):</span><br><span class="line">            text = <span class="string">&#x27;\n&#x27;</span>.join(textwrap.wrap(text, width=<span class="built_in">int</span>(</span><br><span class="line">                np.ceil(<span class="built_in">len</span>(text) / np.ceil((text_len[<span class="number">2</span>] - text_len[<span class="number">0</span>]) / (x1 - x0))))))</span><br><span class="line"></span><br><span class="line">        draw.text((x0, y0), text, font=font, fill=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    img.save(<span class="string">&#x27;your_image_storage_path/output.png&#x27;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-æœ€ç»ˆæ–‡æœ¬è¾“å‡ºï¼ˆç»“æ„åŒ–è¡Œï¼‰"><a href="#5-æœ€ç»ˆæ–‡æœ¬è¾“å‡ºï¼ˆç»“æ„åŒ–è¡Œï¼‰" class="headerlink" title="5. æœ€ç»ˆæ–‡æœ¬è¾“å‡ºï¼ˆç»“æ„åŒ–è¡Œï¼‰"></a><strong>5. æœ€ç»ˆæ–‡æœ¬è¾“å‡ºï¼ˆç»“æ„åŒ–è¡Œï¼‰</strong></h2><p><strong>åŠŸèƒ½</strong>ï¼šå°†æ‰€æœ‰åæ ‡æŒ‰ y â†’ x æ’åºï¼ŒæŒ‰è¡Œå½’ç»„è¾“å‡ºç»“æ„åŒ–æ–‡æœ¬ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">adjusted_merged_text_sorted = <span class="built_in">sorted</span>(adjusted_merged_text.items(), key=<span class="keyword">lambda</span> x: (x[<span class="number">0</span>][<span class="number">1</span>], x[<span class="number">0</span>][<span class="number">0</span>]))</span><br><span class="line">adjusted_merged_text_sorted_group = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> coordinates, text <span class="keyword">in</span> adjusted_merged_text_sorted:</span><br><span class="line">    <span class="keyword">if</span> coordinates[<span class="number">1</span>] <span class="keyword">not</span> <span class="keyword">in</span> adjusted_merged_text_sorted_group:</span><br><span class="line">        adjusted_merged_text_sorted_group[coordinates[<span class="number">1</span>]] = [text]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        adjusted_merged_text_sorted_group[coordinates[<span class="number">1</span>]].append(text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> text_list <span class="keyword">in</span> adjusted_merged_text_sorted_group.values():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27; | &#x27;</span>.join(text_list))</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a><strong>ä½¿ç”¨æ–¹æ³•</strong></h2><ol>
<li>è¿è¡Œè„šæœ¬é€‰æ‹©è¡¨æ ¼å›¾ç‰‡ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python Table_Extraction.py</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python main.py</span><br></pre></td></tr></table></figure>

<p>åœ¨é¡¹ç›®ç›®å½•ä¼šè¾“å‡ºæ•ˆæœå›¾ç‰‡ï¼Œç»ˆç«¯ä¼šè¾“å‡ºæ–‡æœ¬ç»“æœ</p>
<ol start="2">
<li>æ•ˆæœå±•ç¤º<br><img src="https://github.com/user-attachments/assets/8e0f21d8-af6c-4da2-beb7-dcc7f5f73115" alt="image"><br><img src="https://github.com/user-attachments/assets/45ad3906-09df-431e-a4ec-4f0779137195" alt="image"><br>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œä½ å¯ä»¥ç”¨è¿™ç»„ç»“æœæµ‹è¯•å¤§æ¨¡å‹æ˜¯å¦èƒ½è¯»æ‡‚è¿™ç»„è¡¨æ ¼ï¼š <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PartNumber | TotalCapacitance(Ct) @ 50 V,(pF) | TotalCapacitance(Ct) @ 0 V,(pF) | SeriesResistance (Rs),@10 mA,(â‘¡) | MinorityCarrierLifetime (TL)@ 10 mA(ns) | VoltageRating2(M) | I-RegionThickness(Î¼m) | ThermalResistance(0JC)(Â°C/W)</span><br><span class="line">Maximum | Typical | Maximum | Typical | Minimum | Nominal | Maximum</span><br><span class="line"></span><br><span class="line">Switching Applications(continued)</span><br><span class="line">| APD0810-203 | 0.35 | 0.40 | 1.5 | 160 | 100 | 8 | 174</span><br><span class="line">| APD0810-210 | 0.40 | 0.45 | 1.5 | 160 | 100 | 8 | 75</span><br><span class="line">| APD0810-219 | 0.35 | 0.40 | 1.5 | 160 | 100 | 8 | 143</span><br><span class="line">| APD0810-240 | 0.35 | 0.40 | 1.5 | 160 | 100 | 8 | 155</span><br><span class="line">| APD1505-203 | 0.40 | 0.45@10V | 2.5 | 350 | 200 | 15 | 172</span><br><span class="line">| APD1505-210 | 0.40 | 0.45@10 V | 2.5 | 350 | 200 | 15 | 74</span><br><span class="line">| APD1505-219 | 0.40 | 0.45@10V | 2.5 | 350 | 200 | 15 | 142</span><br><span class="line">| APD1505-240 | 0.40 | 0.45 @ 10 V | 2.5 | 350 | 200 | 15 | 150</span><br><span class="line">| APD1510-203 | 0.35 | 0.40 | 2.0 | 300 | 200 | 15 | 168</span><br><span class="line">| APD1510-210 | 0.35 | 0.40 | 2.0 | 300 | 200 | 15 | 70</span><br><span class="line">| APD1510-219 | 0.35 | 0.40 | 2.0 | 300 | 200 | 15 | 137</span><br><span class="line">| APD1510-240 | 0.35 | 0.40 | 2.0 | 300 | 200 | 15 | 149</span><br><span class="line">| APD1520-203 | 0.40 | 0.45 | 1.2 | 900 | 200 | 15 | 155</span><br><span class="line">| APD1520-210 | 0.40 | 0.45 | 1.2 | 900 | 200 | 15 | 57</span><br><span class="line">| APD1520-219 | 0.45 | 0.50 | 1.2 | 900 | 200 | 15 | 124</span><br><span class="line">| APD1520-240 | 0.40 | 0.45 | 1.2 | 900 | 200 | 15 | 136</span><br><span class="line"></span><br><span class="line">AttenuatorApplications</span><br><span class="line">| APD2220-203 | 0.45 | 0.50 | 4.0 | 100 | 100 | 50 | 132</span><br><span class="line">| APD2220-210 | 0.45 | 0.50 | 4.0 | 100 | 100 | 50 | 32</span><br><span class="line">| APD2220-219 | 0.40 | 0.45 | 4.0 | 100 | 100 | 50 | 104</span><br><span class="line">| APD2220-240 | 0.40 | 0.45 | 4.0 | 100 | 100 | 50 | 115</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="è¡¥å……è¯´æ˜"><a href="#è¡¥å……è¯´æ˜" class="headerlink" title="è¡¥å……è¯´æ˜"></a><strong>è¡¥å……è¯´æ˜</strong></h2><ul>
<li>å­—ä½“æ–‡ä»¶ <code>chinese_cht.ttf</code> å¿…é¡»å­˜åœ¨ï¼Œæˆ–æ›¿æ¢ä¸ºç³»ç»Ÿå¯è¯†åˆ«çš„ä¸­æ–‡å­—ä½“ã€‚</li>
<li>å¯¹äºå¤æ‚ç»“æ„è¡¨æ ¼ï¼Œå½“å‰æ¨¡å‹ä»ç„¶æ— æ³•å¾ˆå¥½çš„å¤„ç†ã€‚</li>
</ul>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/wyf3/llm_related/tree/main">wyf3</a> å’Œ <a href="https://github.com/PaddlePaddle/PaddleOCR">PaddleOCR</a></p>
]]></content>
      <categories>
        <category>OCR</category>
      </categories>
      <tags>
        <tag>OCR</tag>
        <tag>PaddleOCR</tag>
        <tag>PDF</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>Custom Search Integration for Hexo Chic</title>
    <url>/2025/03/27/Custom-Search-Integration-for-Hexo-Chic/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½"><a href="#Hexo-Chic-ä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½" class="headerlink" title="Hexo + Chic ä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½"></a>Hexo + Chic ä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½</h1><p>æœ¬æ–‡è¯¦ç»†è®°å½•å¦‚ä½•åœ¨ Hexo ä¸­ä½¿ç”¨æ’ä»¶ <code>hexo-generator-searchdb</code> å®ç°åŸºäº Chic ä¸»é¢˜çš„å®æ—¶æœç´¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœç´¢å›å¤æ¡†ã€æœç´¢ç»“æœå¡ã€æš—é»‘æ¨¡å¼é€‚é…ç­‰ç»†èŠ‚ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1. å®‰è£…æ’ä»¶"></a><strong>1. å®‰è£…æ’ä»¶</strong></h2><p>åœ¨ <code>Hexo</code> æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-æ‰“å¼€æ ¹ç›®å½•çš„-config-yml-æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š"><a href="#2-æ‰“å¼€æ ¹ç›®å½•çš„-config-yml-æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š" class="headerlink" title="2. æ‰“å¼€æ ¹ç›®å½•çš„ _config.yml æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š"></a><strong>2. æ‰“å¼€æ ¹ç›®å½•çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š</strong></h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-æ–°å»º-search-css"><a href="#3-æ–°å»º-search-css" class="headerlink" title="3. æ–°å»º search.css"></a><strong>3. æ–°å»º search.css</strong></h2><p><strong>å»ºè®®è·¯å¾„</strong>: <code>themes/hexo-theme-Chic/source/css/search.css</code></p>
<p>åŒ…å«æœç´¢æ¡†&#x2F;ç»“æœå¡&#x2F;æš—é»‘æ¨¡å¼æ ·å¼ï¼Œå…·ä½“ä»£ç å¯å¸¦æ–‡ç« å¼€å¤´é¡¹ç›®åœ°å€ä¸­è·å–ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.search-container</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.nav-search-input</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.nav-search-result</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.search-card</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.nav-search-input</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.search-card-snippet</span> &#123; ... &#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#4-ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="4. ä¿®æ”¹ä¸»é¢˜é…ç½®"></a><strong>4. ä¿®æ”¹ä¸»é¢˜é…ç½®</strong></h2><p>æ‰“å¼€<code>theme/hexo-theme-Chic/_config.yml</code> ï¼Œåœ¨ <code>stylesheets </code>ä¸‹å¢åŠ ä¸€è¡Œ <code>search.css</code> ç¡®ä¿åŠ è½½æ ·å¼æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stylesheets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/css/style.css</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/css/search.css</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-ä¿®æ”¹-header-ejs"><a href="#5-ä¿®æ”¹-header-ejs" class="headerlink" title="5. ä¿®æ”¹ header.ejs"></a><strong>5. ä¿®æ”¹ <code>header.ejs</code></strong></h2><p>å¯¹ <code>theme/hexo-theme-Chic/layout/_partial/header.ejs</code> åšäº†å¦‚ä¸‹å…³é”®ä¿®æ”¹ï¼Œå…·ä½“ä»£ç å¯å¸¦æ–‡ç« å¼€å¤´é¡¹ç›®åœ°å€ä¸­è·å–ï¼š</p>
<h3 id="HTML-ç»“æ„æ”¹åŠ¨"><a href="#HTML-ç»“æ„æ”¹åŠ¨" class="headerlink" title="HTML ç»“æ„æ”¹åŠ¨"></a>HTML ç»“æ„æ”¹åŠ¨</h3><ol>
<li>åœ¨ <code>&lt;div class=&quot;menu navbar-right&quot;&gt;</code> ä¸­æ’å…¥ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;search-container&quot;&gt;</span><br><span class="line">  &lt;a href=&quot;javascript:;&quot; onclick=&quot;toggleSearchInput()&quot;&gt;ğŸ”&lt;/a&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; id=&quot;nav-search-input&quot; class=&quot;nav-search-input&quot; placeholder=&quot;Search...&quot; oninput=&quot;navSearch(this)&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;nav-search-result&quot; class=&quot;nav-search-result&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ç§»åŠ¨ç«¯å¯¼èˆª <code>&lt;div id=&quot;mobile-menu&quot;&gt;</code> ä¸­æ’å…¥ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a class=&quot;menu-item&quot; href=&quot;javascript:;&quot; onclick=&quot;toggleSearchInput()&quot;&gt;ğŸ” Search&lt;/a&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;nav-search-input-mobile&quot; class=&quot;nav-search-input&quot; placeholder=&quot;Search...&quot; oninput=&quot;navSearch(this)&quot;&gt;</span><br><span class="line">&lt;div id=&quot;nav-search-result&quot; class=&quot;nav-search-result&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¿ç•™å¹¶æœªæ›´åŠ¨ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input id=&quot;switch_default&quot; type=&quot;checkbox&quot; class=&quot;switch_default&quot;&gt;</span><br><span class="line">&lt;label for=&quot;switch_default&quot; class=&quot;toggleBtn&quot;&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JS-åŠŸèƒ½æ”¹åŠ¨"><a href="#JS-åŠŸèƒ½æ”¹åŠ¨" class="headerlink" title="JS åŠŸèƒ½æ”¹åŠ¨"></a>JS åŠŸèƒ½æ”¹åŠ¨</h3><ol>
<li>æ–°å¢ <code>toggleSearchInput()</code> æ–¹æ³•ï¼Œå®ç°ç‚¹å‡»å›¾æ ‡å±•å¼€æˆ–éšè—æœç´¢æ¡†ã€‚</li>
<li></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">toggleSearchInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.nav-search-input&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> results = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.nav-search-result&#x27;</span>);</span><br><span class="line">  inputs.<span class="title function_">forEach</span>(<span class="function"><span class="params">input</span> =&gt;</span> &#123;</span><br><span class="line">    input.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (input.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;active&#x27;</span>)) input.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">  results.<span class="title function_">forEach</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ–°å¢ <code>navSearch()</code> æ–¹æ³•ï¼Œå®ç°ä» <code>search.xml</code> åŠ è½½æ•°æ®å¹¶åŒ¹é…å…³é”®è¯ã€‚</li>
<li>æ–°å¢ç©ºç™½ç‚¹å‡»å…³é—­é€»è¾‘ï¼šç‚¹å‡» <code>.search-container</code> å¤–éƒ¨åŒºåŸŸåè‡ªåŠ¨éšè—æœç´¢æ¡†å¹¶æ¸…ç©ºå†…å®¹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (searchData.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;&lt;%- config.root %&gt;search.xml&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">xmlText</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> parser = <span class="keyword">new</span> <span class="title class_">DOMParser</span>();</span><br><span class="line">        <span class="keyword">const</span> xml = parser.<span class="title function_">parseFromString</span>(xmlText, <span class="string">&#x27;text/xml&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> entries = xml.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;entry&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> entries) &#123;</span><br><span class="line">          searchData.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: entry.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;title&#x27;</span>)[<span class="number">0</span>]?.<span class="property">textContent</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">content</span>: entry.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;content&#x27;</span>)[<span class="number">0</span>]?.<span class="property">textContent</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: entry.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;url&#x27;</span>)[<span class="number">0</span>]?.<span class="property">textContent</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-å®ç°æ•ˆæœ"><a href="#6-å®ç°æ•ˆæœ" class="headerlink" title="6. å®ç°æ•ˆæœ"></a><strong>6. å®ç°æ•ˆæœ</strong></h2><ul>
<li>ç‚¹å‡»å›¾æ ‡å±•ç¤ºæœç´¢æ¡†</li>
<li>å®æ—¶åŒ¹é…æ–‡ç« æ ‡é¢˜&#x2F;å†…å®¹</li>
<li>ç»“æœä»¥å¡ç‰‡å½¢å¼å±•ç¤º</li>
<li>é»‘è‰²æ¨¡å¼æ ·å¼è‡ªåŠ¨é€‰æ‹©</li>
<li>ç‚¹å‡»ç©ºç™½åœ°æ–¹éšè—ç»“æœ + æ¸…ç©ºæ–‡æœ¬</li>
<li>ç§»åŠ¨ç«¯é¡µé¢é€‚é…<br><img src="https://github.com/user-attachments/assets/430d306f-1836-4ca7-b1c6-c249835622bd" alt="image"></li>
</ul>
<hr>
<h2 id="7-æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo"><a href="#7-æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo" class="headerlink" title="7. æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo"></a><strong>7. æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo</strong></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—® <code>http://localhost:4000</code>ï¼ŒæŸ¥çœ‹ä»»æ„ä¸€æ®µä»£ç å—ï¼Œå³ä¸Šè§’åº”å‡ºç°å¤åˆ¶å›¾æ ‡æŒ‰é’®ã€‚</p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> , <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> å’Œ <a href="https://github.com/next-theme/hexo-generator-searchdb.git">hexo-generator-searchdb</a>ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Docling2md</title>
    <url>/2025/05/01/Docling2md/</url>
    <content><![CDATA[<h1 id="åŸºäºDoclingç»“åˆå¤šæ¨¡æ€å¤§æ¨¡å‹çš„çš„PDFè½¬Markdown"><a href="#åŸºäºDoclingç»“åˆå¤šæ¨¡æ€å¤§æ¨¡å‹çš„çš„PDFè½¬Markdown" class="headerlink" title="åŸºäºDoclingç»“åˆå¤šæ¨¡æ€å¤§æ¨¡å‹çš„çš„PDFè½¬Markdown"></a>åŸºäºDoclingç»“åˆå¤šæ¨¡æ€å¤§æ¨¡å‹çš„çš„PDFè½¬Markdown</h1><hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Docling2md.git">https://github.com/EvannZhongg/Docling2md.git</a></p>
<hr>
<h2 id="é¡¹ç›®èƒŒæ™¯"><a href="#é¡¹ç›®èƒŒæ™¯" class="headerlink" title="é¡¹ç›®èƒŒæ™¯"></a>é¡¹ç›®èƒŒæ™¯</h2><p>åŸºäºæˆ‘å½“å‰ä½¿ç”¨ LLM æ„å»º<strong>çŸ¥è¯†å›¾è°±</strong>çš„å¤„ç†çš„æ˜¯ä¸€ç³»åˆ—å¤æ‚çš„PDFæ–‡æ¡£ï¼Œè¿™äº›PDFåŒ…å«å›¾åƒã€è¡¨æ ¼ã€æ–‡æœ¬ç­‰æ··åˆä¿¡æ¯ï¼Œç»“æ„å¤æ‚ã€ä¸è§„åˆ™ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ã€‚å› æ­¤ï¼Œéœ€è¦ä¸€ä¸ªé«˜æ•ˆã€å¯æ‰©å±•çš„ç»“æ„åŒ–é¢„å¤„ç†æµç¨‹æ¥ä¸ºåç»­å®ä½“æå–ã€å›¾è°±ç”Ÿæˆç­‰ä»»åŠ¡æä¾›æ¸…æ´—åçš„è¾“å…¥ï¼ŒåŒæ—¶æµç¨‹éœ€è¦å…¼å…·å‡†ç¡®å’Œéƒ¨ç½²çš„æ–¹ä¾¿ã€‚</p>
<p>ä¾‹å¦‚ <code>MinerU</code> å’Œ <code>Textin</code> ï¼Œå®ƒä»¬è½¬æ¢çš„æ•ˆæœéƒ½éå¸¸å¥½ï¼›ä½† <code>MinerU</code> éƒ¨ç½²ä¸å¤ªæ–¹ä¾¿é›†æˆåˆ°é¡¹ç›®ä¸­æ˜¾å¾—ç¬¨é‡ï¼Œ <code>Textin</code> æ˜¯å•†ç”¨è½¯ä»¶ä»·æ ¼ä¸ç¾ä¸½ï¼›äºæ˜¯è¿‘æœŸå‘ç°äº† <code>Docling</code> çš„å¼€æºæ¨¡å‹ï¼ŒåŒæ—¶pythonä¸­ä¹Ÿå¯ä»¥ç›´æ¥å®‰è£… <code>Docling</code> çš„ä¾èµ–åŒ…é¿å…ä¸‹è½½æ¨¡å‹ï¼Œäºæ˜¯å°è¯•äº†ä¸€ä¸‹æ„Ÿè§‰æ•ˆæœè¿˜ä¸é”™ç¬¦åˆæˆ‘çš„é¢„æœŸã€‚</p>
<p>å°¤å…¶æ˜¯åœ¨å¯¹è¡¨æ ¼è¿›è¡Œå¤„ç†æ—¶ï¼Œ<code>Docling</code> æ˜¯å°†è¡¨æ ¼è½¬åŒ–ä¸ºç®¡é“è¡¨æ ¼ç»“æ„ï¼Œè€Œ <code>MinerU</code> å’Œ <code>Textin</code> éƒ½æ˜¯å°†è¡¨æ ¼è½¬æ¢ä¸º HTML æ ¼å¼ï¼›ç›¸æ¯” HTML æ ¼å¼ï¼Œç®¡é“è¡¨æ ¼åœ¨ä¼ é€’ç»™å¤§æ¨¡å‹æ—¶èƒ½å¤ŸèŠ‚çœæ›´å¤šçš„tokenï¼Œå‡è½»äº†å¤§æ¨¡å‹çš„è´Ÿæ‹…ã€‚</p>
<p>æœ¬é¡¹ç›®åŸºäº <code>Docling</code> æ¡†æ¶ï¼Œå¯¹ PDF æ–‡ä»¶è¿›è¡Œç»“æ„è§£æï¼Œç»“åˆå¤šç§å¤§æ¨¡å‹èƒ½åŠ›ï¼Œå®ç°äº†æ–‡æ¡£çš„å¤šæ¨¡æ€ç†è§£ä¸ Markdown &#x2F; JSON æ ¼å¼ç»“æ„åŒ–è¾“å‡ºï¼Œä¸ºçŸ¥è¯†å›¾è°±æ„å»ºå¥ å®šåŸºç¡€ã€‚</p>
<hr>
<h2 id="å®ç°çš„æ€æƒ³ä¸ç›®æ ‡"><a href="#å®ç°çš„æ€æƒ³ä¸ç›®æ ‡" class="headerlink" title="å®ç°çš„æ€æƒ³ä¸ç›®æ ‡"></a>å®ç°çš„æ€æƒ³ä¸ç›®æ ‡</h2><p>é¡¹ç›®çš„æ ¸å¿ƒç›®æ ‡æ˜¯æé«˜PDFä¸­ä¿¡æ¯ä¿ç•™çš„å®Œæ•´ç¨‹åº¦æ–¹ä¾¿åç»­å°†çº¯æ–‡æœ¬ä¿¡æ¯è¾“å…¥ç»™å¤§æ¨¡å‹æ„å»ºçŸ¥è¯†å›¾è°±ï¼Œå¹¶è§£å†³ä»¥ä¸‹å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ol>
<li><strong>PDFè½¬Markdown</strong>ï¼šé€šè¿‡Doclingå°†PDFå†…å®¹è½¬åŒ–ä¸ºMarkdownï¼Œå°¤å…¶æ˜¯æå–è¡¨æ ¼å’Œå›¾ç‰‡ï¼Œå¹¶åœ¨Markdownä¸­ä¿æŒå…¶ç»“æ„ã€‚</li>
<li><strong>å¤æ‚è¡¨æ ¼å›¾åƒçš„å¤„ç†ä¸ä¿®å¤</strong>ï¼šé€šè¿‡è§†è§‰å¤§æ¨¡å‹å¤„ç†PDFä¸­çš„è¡¨æ ¼å›¾ç‰‡ï¼Œä¿®å¤å¼‚å¸¸æˆ–æ¨¡ç³Šçš„è¡¨æ ¼ç»“æ„ã€‚</li>
<li><strong>å¼‚å¸¸æ–‡æœ¬åˆ†è¯çš„ä¿®å¤</strong>ï¼šç›´æ¥ä½¿ç”¨ <code>Docling</code> çš„OCRæœ‰æ—¶ä¼šå‡ºç°æ–‡æœ¬è¯†åˆ«å¼‚å¸¸ï¼Œå¯¹äºé•¿æ–‡æœ¬ä¸­çš„å¼‚å¸¸æ— ç©ºæ ¼æƒ…å†µï¼Œé€šè¿‡å¤§æ¨¡å‹è¿›è¡Œè‡ªåŠ¨åˆ†è¯ä¿®å¤ï¼Œä¿è¯æ–‡æœ¬å¯è¯»æ€§ã€‚</li>
<li><strong>å¯¹å›¾ç‰‡çš„æè¿°ä¸ç†è§£</strong>: å¯¹è¯†åˆ«å‡ºçš„å›¾åƒï¼ˆéè¡¨æ ¼ï¼‰è°ƒç”¨è§†è§‰å¤§æ¨¡å‹è¿›è¡Œå†…å®¹æè¿°ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›¾åƒæ‘˜è¦ï¼Œå¹¶å†™å…¥ Markdown ä¸ç»“æ„ JSONã€‚</li>
</ol>
<p>æµç¨‹ç¤ºæ„ï¼š</p>
<pre class="mermaid">graph TD
    A[PDF Document] --> B[DocumentConverter]
    B --> C[Structured Document]
    C --> D[Element Iteration]

    D --> E[Text Processing]
    D --> F[Table Processing]
    D --> G[Image Processing]

    E --> H[LLM Classification]
    F --> I[Table Structure Analysis]
    G --> J[VLM Captioning]

    H --> K[Markdown Output]
    I --> K
    J --> K

    K --> L[Markdown File]
    K --> M[JSON Metadata]
    K --> N[Extracted Images]</pre>

<hr>
<h2 id="é¡¹ç›®æµç¨‹ä¸æŠ€æœ¯ç»†èŠ‚"><a href="#é¡¹ç›®æµç¨‹ä¸æŠ€æœ¯ç»†èŠ‚" class="headerlink" title="é¡¹ç›®æµç¨‹ä¸æŠ€æœ¯ç»†èŠ‚"></a>é¡¹ç›®æµç¨‹ä¸æŠ€æœ¯ç»†èŠ‚</h2><h3 id="1-è¡¨æ ¼ç»“æ„è¯†åˆ«ä¸ä¿®å¤"><a href="#1-è¡¨æ ¼ç»“æ„è¯†åˆ«ä¸ä¿®å¤" class="headerlink" title="1. è¡¨æ ¼ç»“æ„è¯†åˆ«ä¸ä¿®å¤"></a>1. è¡¨æ ¼ç»“æ„è¯†åˆ«ä¸ä¿®å¤</h3><ul>
<li>ä½¿ç”¨ Docling è‡ªåŠ¨æ£€æµ‹è¡¨æ ¼åŒºåŸŸï¼Œå¯¼å‡º <code>DataFrame</code>ã€‚</li>
<li>è‹¥å­˜åœ¨åˆ—åé‡å¤æˆ–åˆ—æ•°å¼‚å¸¸ï¼Œå¯ç”¨è§†è§‰å¤§æ¨¡å‹æ¨¡å‹å¯¹è¡¨æ ¼æˆªå›¾åˆ†å—ä¿®å¤ï¼Œç”Ÿæˆæ ‡å‡† Markdown ç®¡é“è¡¨æ ¼ï¼ˆpipe tableï¼‰ã€‚</li>
<li>åˆ†å—æ–¹å¼ï¼šæŒ‰è¡Œé«˜åˆ‡å›¾ï¼Œå¹¶æ‹¼æ¥å°å—ç¡®ä¿é«˜åº¦ã€‚</li>
<li>æ‰€æœ‰ä¿®å¤è¡¨æ ¼è®°å½•ä¿®å¤æ¥æºï¼Œå­˜å…¥ JSON ä¸­ä»¥å¤‡å®¡è®¡ä¸è®­ç»ƒæ•°æ®å›æº¯ã€‚</li>
</ul>
<p>è¡¨æ ¼å¼‚å¸¸å¤„ç†çš„æµç¨‹ç»“åˆäº† <strong>æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—</strong> å’Œ <strong>åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶</strong> ä¸¤ç§æ–¹æ³•ã€‚</p>
<hr>
<h4 id="æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—"><a href="#æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—" class="headerlink" title="æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—"></a>æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—</h4><p>åœ¨å‡½æ•° <code>split_table_image_rows</code> ä¸­ï¼Œè¡¨æ ¼å›¾åƒè¢«æŒ‰ç…§å›ºå®šçš„è¡Œé«˜ï¼ˆé»˜è®¤ä¸º 400 åƒç´ ï¼‰è¿›è¡Œè£åˆ‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def split_table_image_rows(pil_img: Image.Image, row_height: int = 400) -&gt; list:</span><br><span class="line">    width, height = pil_img.size</span><br><span class="line">    slices = []</span><br><span class="line">    for top in range(0, height, row_height):</span><br><span class="line">        bottom = min(top + row_height, height)</span><br><span class="line">        crop = pil_img.crop((0, top, width, bottom))</span><br><span class="line">        slices.append(crop)</span><br><span class="line">    return slices</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®æ‚¨ä¸Šä¼ çš„ä»£ç æ–‡ä»¶å†…å®¹ï¼Œè¡¨æ ¼å¼‚å¸¸å¤„ç†çš„æµç¨‹ç»“åˆäº†<strong>æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—</strong>å’Œ<strong>åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶</strong>ä¸¤ç§æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„å®ç°ç»†èŠ‚å’Œä¸¾ä¾‹è¯´æ˜ï¼š</p>
<ul>
<li><strong>è¾“å…¥</strong>: è¡¨æ ¼å›¾åƒ <code>pil_img</code> å’Œä¸€ä¸ªå¯é…ç½®çš„ <code>row_height</code>ï¼ˆé»˜è®¤å€¼ä¸º 400 åƒç´ ï¼‰ã€‚</li>
<li><strong>é€»è¾‘</strong>: <ul>
<li>æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œæ¯éš” <code>row_height</code> åƒç´ è£åˆ‡ä¸€æ¬¡ã€‚</li>
<li>å¦‚æœå‰©ä½™çš„é«˜åº¦ä¸è¶³ <code>row_height</code>ï¼Œåˆ™å–åˆ°æœ€åçš„è¾¹ç•Œã€‚</li>
</ul>
</li>
<li><strong>è¾“å‡º</strong>: è¿”å›ä¸€ä¸ªåŒ…å«å¤šä¸ªè£åˆ‡åå›¾åƒç‰‡æ®µçš„åˆ—è¡¨ã€‚</li>
</ul>
<p>è¿™ç§æ–¹å¼ç¡®ä¿äº†è¡¨æ ¼å›¾åƒèƒ½å¤Ÿè¢«åˆ†å‰²æˆå¤šä¸ªå­å›¾åƒï¼Œæ¯ä¸ªå­å›¾åƒçš„é«˜åº¦ä¸è¶…è¿‡ <code>row_height</code>ã€‚</p>
<hr>
<h4 id="åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶"><a href="#åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶" class="headerlink" title="åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶"></a>åŸºäºæœ€ä½é«˜åº¦ä¸å®½åº¦çš„åˆ†å—åˆå¹¶</h4><p>åœ¨å‡½æ•° <code>merge_small_chunks</code> ä¸­ï¼Œå¯¹è£åˆ‡åçš„å›¾åƒç‰‡æ®µè¿›ä¸€æ­¥å¤„ç†ï¼Œç¡®ä¿æ¯ä¸ªç‰‡æ®µçš„é«˜åº¦å’Œå®½åº¦æ»¡è¶³æœ€ä½è¦æ±‚ï¼ˆå› ä¸ºè§†è§‰å¤§æ¨¡å‹åœ¨ä¸Šä¼ å›¾ç‰‡æ—¶æœ‰æœ€å°åƒç´ è¦æ±‚ï¼Œéœ€è¦é•¿å®½å¤§äº 10 åƒç´ ï¼Œä¸ºé¿å…åˆ‡å—è¿‡å°ï¼Œè¿™é‡Œé»˜è®¤é«˜åº¦ä¸º 300 åƒç´ ï¼Œå®½åº¦ä¸º 20 åƒç´ ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def merge_small_chunks(chunks: list, min_height: int = 300, min_width: int = 20) -&gt; list:</span><br><span class="line">    merged_chunks = []</span><br><span class="line">    temp_chunk = None</span><br><span class="line">    for chunk in chunks:</span><br><span class="line">        width, height = chunk.size</span><br><span class="line">        # å¦‚æœå½“å‰å—å°ºå¯¸ä¸è¶³ï¼Œåˆ™å°è¯•æ‹¼æ¥ä¸Šä¸‹å—</span><br><span class="line">        if height &lt; min_height or width &lt; min_width:</span><br><span class="line">            if temp_chunk is None:</span><br><span class="line">                temp_chunk = chunk</span><br><span class="line">            else:</span><br><span class="line">                # æ‹¼æ¥ä¸Šä¸‹å—</span><br><span class="line">                new_chunk = Image.new(&quot;RGB&quot;, (max(temp_chunk.width, chunk.width), temp_chunk.height + chunk.height))</span><br><span class="line">                new_chunk.paste(temp_chunk, (0, 0))</span><br><span class="line">                new_chunk.paste(chunk, (0, temp_chunk.height))</span><br><span class="line">                temp_chunk = new_chunk</span><br><span class="line">        else:</span><br><span class="line">            # å¦‚æœæœ‰æœªå¤„ç†çš„ä¸´æ—¶å—ï¼Œå…ˆä¿å­˜</span><br><span class="line">            if temp_chunk is not None:</span><br><span class="line">                merged_chunks.append(temp_chunk)</span><br><span class="line">                temp_chunk = None</span><br><span class="line">            merged_chunks.append(chunk)</span><br><span class="line">    # æ·»åŠ æœ€åä¸€ä¸ªä¸´æ—¶å—ï¼ˆå¦‚æœæœ‰ï¼‰</span><br><span class="line">    if temp_chunk is not None:</span><br><span class="line">        # å¦‚æœæ•´ä¸ªè¡¨æ ¼å›¾ç‰‡çš„é«˜åº¦ä½äºæœ€å°é«˜åº¦ï¼Œåˆ™æŒ‰æœ€ä½é«˜åº¦è®¡ç®—</span><br><span class="line">        if temp_chunk.height &lt; min_height:</span><br><span class="line">            new_chunk = Image.new(&quot;RGB&quot;, (temp_chunk.width, max(temp_chunk.height, 20)))</span><br><span class="line">            new_chunk.paste(temp_chunk, (0, 0))</span><br><span class="line">            merged_chunks.append(new_chunk)</span><br><span class="line">        else:</span><br><span class="line">            merged_chunks.append(temp_chunk)</span><br><span class="line">    return merged_chunks</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è¾“å…¥</strong>: è£åˆ‡åçš„å›¾åƒç‰‡æ®µåˆ—è¡¨ <code>chunks</code>ï¼Œä»¥åŠæœ€ä½é«˜åº¦ <code>min_height</code>ï¼ˆé»˜è®¤ 300 åƒç´ ï¼‰å’Œæœ€ä½å®½åº¦ <code>min_width</code>ï¼ˆé»˜è®¤ 20 åƒç´ ï¼‰ã€‚</li>
<li><strong>é€»è¾‘</strong>:<ul>
<li>éå†æ‰€æœ‰ç‰‡æ®µï¼š<ul>
<li>å¦‚æœæŸä¸ªç‰‡æ®µçš„é«˜åº¦æˆ–å®½åº¦å°äºæœ€ä½è¦æ±‚ï¼Œåˆ™å°†å…¶ä¸ä¸‹ä¸€ä¸ªç‰‡æ®µæ‹¼æ¥ï¼Œç›´åˆ°æ»¡è¶³æœ€ä½å°ºå¯¸è¦æ±‚ã€‚</li>
<li>å¦‚æœæŸä¸ªç‰‡æ®µå·²ç»æ»¡è¶³æœ€ä½è¦æ±‚ï¼Œåˆ™ç›´æ¥åŠ å…¥ç»“æœåˆ—è¡¨ã€‚</li>
</ul>
</li>
<li>å¯¹äºæœ€åä¸€ä¸ªä¸´æ—¶å—ï¼Œå¦‚æœå…¶é«˜åº¦ä»ä½äºæœ€ä½è¦æ±‚ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾åƒå—ï¼Œå¡«å……åˆ°æœ€ä½é«˜åº¦ã€‚</li>
</ul>
</li>
<li><strong>è¾“å‡º</strong>: è¿”å›ä¸€ä¸ªç»è¿‡åˆå¹¶åçš„å›¾åƒç‰‡æ®µåˆ—è¡¨ã€‚</li>
</ul>
<hr>
<h4 id="3-ç»¼åˆå¤„ç†æµç¨‹"><a href="#3-ç»¼åˆå¤„ç†æµç¨‹" class="headerlink" title="3. ç»¼åˆå¤„ç†æµç¨‹"></a>3. <strong>ç»¼åˆå¤„ç†æµç¨‹</strong></h4><p>åœ¨ä¸»æµç¨‹ä¸­ï¼Œè¡¨æ ¼å¼‚å¸¸çš„å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if not table_df.columns.is_unique or table_df.shape[1] &lt; 2:</span><br><span class="line">    log.warning(f&quot;è¡¨æ ¼ &#123;table_counter&#125; ç»“æ„å¼‚å¸¸ï¼Œä½¿ç”¨å¤šè½®å›¾åƒæ¨ç†ä¿®å¤&quot;)</span><br><span class="line">    # è‡ªåŠ¨å›¾åƒåˆ‡å—</span><br><span class="line">    sub_images = split_table_image_rows(pil_img)</span><br><span class="line">    # æ‹¼æ¥ä¸ç¬¦åˆå°ºå¯¸é™åˆ¶çš„åˆ‡å—</span><br><span class="line">    sub_images = merge_small_chunks(sub_images)</span><br><span class="line"></span><br><span class="line">    # ä½¿ç”¨å±€éƒ¨å˜é‡ç®¡ç†è¯¥è¡¨æ ¼çš„ä¿®å¤ä»»åŠ¡</span><br><span class="line">    chunk_futures = []</span><br><span class="line">    for idx, chunk_img in enumerate(sub_images):</span><br><span class="line">        future = vlm_executor.submit(ask_table_from_image, chunk_img)</span><br><span class="line">        chunk_futures.append((future, idx, chunk_img))</span><br><span class="line"></span><br><span class="line">    # æ”¶é›†ç»“æœ</span><br><span class="line">    full_md_lines = []</span><br><span class="line">    for future, idx, chunk_img in chunk_futures:</span><br><span class="line">        try:</span><br><span class="line">            chunk_md = future.result()</span><br><span class="line">            lines = chunk_md.splitlines()</span><br><span class="line">            if idx == 0:</span><br><span class="line">                full_md_lines.extend(lines)  # è¡¨å¤´ + åˆ†éš”çº¿</span><br><span class="line">            else:</span><br><span class="line">                full_md_lines.extend(lines[2:])  # ä»…æ•°æ®è¡Œ</span><br><span class="line">        except Exception as e:</span><br><span class="line">            log.warning(f&quot;è¡¨æ ¼åˆ†å—å¤„ç†å¤±è´¥: &#123;e&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    markdown_lines.append(f&quot;&lt;!-- è¡¨æ ¼ &#123;table_counter&#125; ä½¿ç”¨ Qwen ä¿®å¤ï¼Œå·²åˆ†å—æ‹¼æ¥ --&gt;&quot;)</span><br><span class="line">    markdown_lines.append(&quot;\n&quot;.join(full_md_lines))</span><br><span class="line">    markdown_lines.append(&quot;&quot;)</span><br><span class="line">    json_data.append(&#123;</span><br><span class="line">        &quot;type&quot;: &quot;table&quot;,</span><br><span class="line">        &quot;level&quot;: level,</span><br><span class="line">        &quot;image&quot;: table_image_filename.name,</span><br><span class="line">        &quot;source&quot;: &quot;reconstructed_by_qwen_chunked&quot;,</span><br><span class="line">        &quot;markdown&quot;: &quot;\n&quot;.join(full_md_lines),</span><br><span class="line">        &quot;page_number&quot;: element.prov[0].page_no,</span><br><span class="line">        &quot;bbox&quot;: bbox</span><br><span class="line">    &#125;)</span><br><span class="line">    continue </span><br></pre></td></tr></table></figure>

<h4 id="æµç¨‹è¯´æ˜ï¼š"><a href="#æµç¨‹è¯´æ˜ï¼š" class="headerlink" title="æµç¨‹è¯´æ˜ï¼š"></a>æµç¨‹è¯´æ˜ï¼š</h4><ol>
<li><strong>æ£€æµ‹è¡¨æ ¼å¼‚å¸¸</strong>:<ul>
<li>å¦‚æœè¡¨æ ¼çš„åˆ—åä¸å”¯ä¸€ (<code>table_df.columns.is_unique</code>) æˆ–è€…åˆ—æ•°å°‘äº 2 (<code>table_df.shape[1] &lt; 2</code>)ï¼Œè®¤ä¸ºè¡¨æ ¼ç»“æ„å¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸é€šå¸¸æ˜¯ OCR æ¨¡å‹æœ¬èº«çš„ä¸è¶³å¯¼è‡´çš„è¡¨æ ¼ç”Ÿæˆå¤±è´¥ã€‚</li>
</ul>
</li>
<li><strong>æŒ‰å›ºå®šè¡Œé«˜åˆ‡å—</strong>:<ul>
<li>ä½¿ç”¨ <code>split_table_image_rows</code> å°†è¡¨æ ¼å›¾åƒæŒ‰å›ºå®šè¡Œé«˜ï¼ˆé»˜è®¤ 400 åƒç´ ï¼‰åˆ‡åˆ†ä¸ºå¤šä¸ªç‰‡æ®µã€‚</li>
</ul>
</li>
<li><strong>åˆå¹¶å°å—</strong>:<ul>
<li>ä½¿ç”¨ <code>merge_small_chunks</code> åˆå¹¶é«˜åº¦æˆ–å®½åº¦ä¸è¶³çš„ç‰‡æ®µï¼Œç¡®ä¿æ¯ä¸ªç‰‡æ®µçš„é«˜åº¦è‡³å°‘ä¸º 300 åƒç´ ï¼Œå®½åº¦è‡³å°‘ä¸º 20 åƒç´ ã€‚</li>
</ul>
</li>
<li><strong>å¹¶å‘è°ƒç”¨å¤§æ¨¡å‹</strong>:<ul>
<li>å¯¹æ¯ä¸ªåˆå¹¶åçš„ç‰‡æ®µå¹¶å‘è°ƒç”¨ <code>ask_table_from_image</code> å‡½æ•°ï¼Œå°†å›¾åƒè½¬æ¢ä¸º Markdown è¡¨æ ¼ã€‚</li>
</ul>
</li>
<li><strong>æ‹¼æ¥ç»“æœ</strong>:<ul>
<li>å°†æ‰€æœ‰ç‰‡æ®µçš„ Markdown è¡¨æ ¼æ‹¼æ¥èµ·æ¥ï¼š<ul>
<li>ç¬¬ä¸€ä¸ªç‰‡æ®µä¿ç•™è¡¨å¤´å’Œåˆ†å‰²çº¿ã€‚</li>
<li>å…¶ä½™ç‰‡æ®µä»…ä¿ç•™æ•°æ®è¡Œã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong>ä¿å­˜ç»“æœ</strong>:<ul>
<li>å°†ä¿®å¤åçš„è¡¨æ ¼ä»¥ Markdown æ ¼å¼ä¿å­˜ï¼Œå¹¶è®°å½•ç›¸å…³ä¿¡æ¯åˆ° JSON æ–‡ä»¶ä¸­ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h4 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå¼‚å¸¸çš„è¡¨æ ¼å›¾åƒã€‚è¯¥è¡¨æ ¼çš„é«˜åº¦ä¸º <strong>1208 åƒç´ </strong>ï¼Œå®½åº¦ä¸º <strong>900 åƒç´ </strong>ï¼Œä»£ç ä¼šæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¤„ç†è¯¥è¡¨æ ¼å›¾åƒï¼š</p>
<p>åœ¨å‡½æ•° <code>split_table_image_rows</code> ä¸­ï¼Œè¡¨æ ¼å›¾åƒä¼šè¢«æŒ‰å›ºå®šè¡Œé«˜ï¼ˆé»˜è®¤ä¸º 400 åƒç´ ï¼‰è¿›è¡Œè£åˆ‡ã€‚</p>
<ul>
<li>è¡¨æ ¼é«˜åº¦ä¸º <strong>1208 åƒç´ </strong>ï¼Œå›ºå®šè¡Œé«˜ä¸º <strong>400 åƒç´ </strong>ã€‚</li>
<li>è£åˆ‡çš„ç‰‡æ®µèŒƒå›´å¦‚ä¸‹ï¼š<ul>
<li>ç¬¬ä¸€å—ï¼š<code>top=0</code>, <code>bottom=400</code> â†’ é«˜åº¦ä¸º 400 åƒç´ ã€‚</li>
<li>ç¬¬äºŒå—ï¼š<code>top=400</code>, <code>bottom=800</code> â†’ é«˜åº¦ä¸º 400 åƒç´ ã€‚</li>
<li>ç¬¬ä¸‰å—ï¼š<code>top=800</code>, <code>bottom=1200</code> â†’ é«˜åº¦ä¸º 400 åƒç´ ã€‚</li>
<li>ç¬¬å››å—ï¼š<code>top=1200</code>, <code>bottom=1208</code> â†’ é«˜åº¦ä¸º 8 åƒç´ ã€‚</li>
</ul>
</li>
</ul>
<p>æœ€ç»ˆä¼šç”Ÿæˆ <strong>4 ä¸ªç‰‡æ®µ</strong>ï¼Œå…¶ä¸­å‰ 3 ä¸ªç‰‡æ®µçš„é«˜åº¦ä¸º 400 åƒç´ ï¼Œæœ€åä¸€ä¸ªç‰‡æ®µçš„é«˜åº¦ä¸º 8 åƒç´ ã€‚</p>
<p>åœ¨å‡½æ•° <code>merge_small_chunks</code> ä¸­ï¼Œä¼šå¯¹è£åˆ‡åçš„ç‰‡æ®µè¿›è¡Œæ£€æŸ¥ï¼Œç¡®ä¿æ¯ä¸ªç‰‡æ®µçš„é«˜åº¦å’Œå®½åº¦æ»¡è¶³æœ€ä½è¦æ±‚ï¼ˆé»˜è®¤é«˜åº¦ä¸º 300 åƒç´ ï¼Œå®½åº¦ä¸º 20 åƒç´ ï¼‰ã€‚</p>
<ul>
<li><strong>ç¬¬ä¸€å—</strong>ï¼šé«˜åº¦ä¸º 400 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´  â†’ ç¬¦åˆæœ€ä½è¦æ±‚ï¼Œç›´æ¥ä¿ç•™ã€‚</li>
<li><strong>ç¬¬äºŒå—</strong>ï¼šé«˜åº¦ä¸º 400 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´  â†’ ç¬¦åˆæœ€ä½è¦æ±‚ï¼Œç›´æ¥ä¿ç•™ã€‚</li>
<li><strong>ç¬¬ä¸‰å—</strong>ï¼šé«˜åº¦ä¸º 400 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´  â†’ ç¬¦åˆæœ€ä½è¦æ±‚ï¼Œç›´æ¥ä¿ç•™ã€‚</li>
<li><strong>ç¬¬å››å—</strong>ï¼šé«˜åº¦ä¸º 8 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´  â†’ ä¸ç¬¦åˆæœ€ä½é«˜åº¦è¦æ±‚ï¼ˆ300 åƒç´ ï¼‰ï¼Œéœ€è¦ä¸å‰é¢çš„å—åˆå¹¶ã€‚</li>
</ul>
<p>æœ€ç»ˆç»“æœï¼š</p>
<ul>
<li><strong>ç¬¬å››å—ï¼ˆ8 åƒç´ ï¼‰</strong> ä¼šä¸ <strong>ç¬¬ä¸‰å—ï¼ˆ400 åƒç´ ï¼‰</strong> åˆå¹¶ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰‡æ®µï¼Œé«˜åº¦ä¸º <strong>408 åƒç´ </strong>ï¼Œå®½åº¦ä¸º <strong>900 åƒç´ </strong>ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œç»è¿‡åˆå¹¶åï¼Œæœ€ç»ˆä¼šæœ‰ <strong>3 ä¸ªç‰‡æ®µ</strong>ï¼š</p>
<ol>
<li>ç¬¬ä¸€å—ï¼šé«˜åº¦ä¸º 400 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´ ã€‚</li>
<li>ç¬¬äºŒå—ï¼šé«˜åº¦ä¸º 400 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´ ã€‚</li>
<li>ç¬¬ä¸‰å—ï¼šé«˜åº¦ä¸º 408 åƒç´ ï¼Œå®½åº¦ä¸º 900 åƒç´ ã€‚</li>
</ol>
<p>åœ¨ä¸»æµç¨‹ä¸­ï¼Œåˆå¹¶åçš„ç‰‡æ®µä¼šå¹¶å‘è°ƒç”¨è§†è§‰æ¨¡å‹ï¼ˆ<code>ask_table_from_image</code>ï¼‰è¿›è¡Œä¿®å¤ï¼Œåœ¨æ”¶é›†æ‰€æœ‰ç‰‡æ®µçš„ä¿®å¤ç»“æœåï¼Œä»£ç ä¼šå°†è¿™äº›ç‰‡æ®µæ‹¼æ¥æˆå®Œæ•´çš„ Markdown è¡¨æ ¼ã€‚</p>
<ul>
<li><strong>ç¬¬ä¸€å—</strong> çš„ä¿®å¤ç»“æœä¼šä¿ç•™è¡¨å¤´å’Œåˆ†å‰²çº¿ã€‚</li>
<li><strong>ç¬¬äºŒå—</strong> å’Œ <strong>ç¬¬ä¸‰å—</strong> çš„ä¿®å¤ç»“æœåªä¼šä¿ç•™æ•°æ®è¡Œã€‚</li>
<li>æœ€ç»ˆå°†æ‰€æœ‰ç‰‡æ®µçš„ç»“æœæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„ Markdown è¡¨æ ¼ã€‚</li>
</ul>
<h4 id="ä½¿ç”¨è§†è§‰æ¨¡å‹ä¿®å¤è¡¨æ ¼ç¤ºä¾‹æ•ˆæœå±•ç¤º"><a href="#ä½¿ç”¨è§†è§‰æ¨¡å‹ä¿®å¤è¡¨æ ¼ç¤ºä¾‹æ•ˆæœå±•ç¤º" class="headerlink" title="ä½¿ç”¨è§†è§‰æ¨¡å‹ä¿®å¤è¡¨æ ¼ç¤ºä¾‹æ•ˆæœå±•ç¤º"></a>ä½¿ç”¨è§†è§‰æ¨¡å‹ä¿®å¤è¡¨æ ¼ç¤ºä¾‹æ•ˆæœå±•ç¤º</h4><p><img src="https://github.com/user-attachments/assets/ab583ea5-b8b2-4466-a6ed-ea8b43f21bd9" alt="709f27681f3bf94551b729283c54046a-table-17"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">| tD(on)  | - | 20 | - | ns | V_DS=400V, V_GS=0 - 12V, I_D=3A, R_G=30Î© |</span><br><span class="line">| ------- | - | -- | - | -- | ---------------------------------------- |</span><br><span class="line">| tR      | - | 7  | - | ns | V_DS=400V, V_GS=0 - 12V, I_D=3A, R_G=30Î© |</span><br><span class="line">| tD(off) | - | 80 | - | ns | V_DS=400V, V_GS=0 - 12V, I_D=3A, R_G=30Î© |</span><br><span class="line">| tF      | - | 6  | - | ns | V_DS=400V, V_GS=0 - 12V, I_D=3A, R_G=30Î© |</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-æ–‡æœ¬å†…å®¹å¤„ç†"><a href="#2-æ–‡æœ¬å†…å®¹å¤„ç†" class="headerlink" title="2. æ–‡æœ¬å†…å®¹å¤„ç†"></a>2. æ–‡æœ¬å†…å®¹å¤„ç†</h3><ul>
<li>ä½¿ç”¨ OCR ä¸ Docling æ£€æµ‹æ–‡æœ¬æ®µè½ã€‚</li>
<li>æ–‡æœ¬ç±»å‹åˆ¤æ–­ï¼šä½¿ç”¨ OpenAI æ–‡æœ¬æ¨¡å‹åˆ¤æ–­æ˜¯â€œæ ‡é¢˜â€è¿˜æ˜¯â€œæ­£æ–‡â€ã€‚</li>
<li>è‹±æ–‡åˆ†è¯ä¿®å¤æœºåˆ¶ï¼šæ£€æµ‹é•¿ä¸²æ— ç©ºæ ¼æ–‡æœ¬ï¼Œè°ƒç”¨å¤§æ¨¡å‹è¿›è¡Œè‹±æ–‡åˆ†è¯æ¢å¤ï¼Œæé«˜å¯è¯»æ€§ä¸å‡†ç¡®æ€§ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹è¾“å…¥ï¼š</span><br><span class="line">THISISATESTSTRING</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹è¾“å‡ºï¼š</span><br><span class="line">THIS IS A TEST STRING</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-å›¾ç‰‡å†…å®¹ç†è§£"><a href="#3-å›¾ç‰‡å†…å®¹ç†è§£" class="headerlink" title="3. å›¾ç‰‡å†…å®¹ç†è§£"></a>3. å›¾ç‰‡å†…å®¹ç†è§£</h3><ul>
<li>å¯¹è¯†åˆ«å‡ºçš„å›¾åƒï¼ˆéè¡¨æ ¼ï¼‰è°ƒç”¨è§†è§‰å¤§æ¨¡å‹è¿›è¡Œå†…å®¹æè¿°ï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å›¾åƒæ‘˜è¦ï¼Œå¹¶å†™å…¥ Markdown ä¸ç»“æ„ JSONã€‚</li>
<li>æ‘˜è¦ä¼šæ’å…¥åœ¨å›¾ç‰‡ <code>alt text</code> ä¸­ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">![è¿™æ˜¯ä¸€ä¸ªè‹¹æœ](./1ca13ed90bf22bae348f93027fb876d5-picture-2.png)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4-ç”ŸæˆMarkdownæ–‡æ¡£"><a href="#4-ç”ŸæˆMarkdownæ–‡æ¡£" class="headerlink" title="4. ç”ŸæˆMarkdownæ–‡æ¡£"></a>4. <strong>ç”ŸæˆMarkdownæ–‡æ¡£</strong></h3><p>åœ¨å®Œæˆè¡¨æ ¼å’Œå›¾ç‰‡çš„æå–ã€æ–‡æœ¬å¤„ç†ä¹‹åï¼Œæœ€ç»ˆå°†æ‰€æœ‰æå–çš„ä¿¡æ¯è½¬æ¢ä¸ºMarkdownæ–‡æ¡£ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚æ¯ä¸ªè¡¨æ ¼ã€å›¾åƒã€æ–‡æœ¬éƒ½ä¼šè¢«æ ¼å¼åŒ–æˆç›¸åº”çš„Markdownæ ¼å¼ï¼Œå¹¶ä»¥å›¾åƒå’Œè¡¨æ ¼å½¢å¼åµŒå…¥ã€‚</p>
<ul>
<li>Markdown æ–‡æ¡£ï¼ˆç»“æ„åŒ–å±•ç¤ºå›¾åƒã€è¡¨æ ¼ã€æ–‡æœ¬ï¼Œä¾¿äºäººå·¥æ ¸æŸ¥ä¸å‘å¸ƒï¼‰</li>
<li>JSON æ–‡æ¡£ï¼ˆç»“æ„åŒ–ã€å«åæ ‡ bboxã€é¡µç ã€åˆ†å—æ¥æºï¼Œé€‚åˆä¸‹æ¸¸çŸ¥è¯†å›¾è°±ä»»åŠ¡è¿›è¡Œé”šç‚¹çš„æ ‡è®°ï¼‰</li>
</ul>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://github.com/openfe-docling/docling">Docling</a> æ¡†æ¶ï¼Œå¯¹ PDF æ–‡ä»¶è¿›è¡Œç»“æ„è§£æï¼Œç»“åˆå¤šç§å¤§æ¨¡å‹èƒ½åŠ›ï¼ˆå¦‚ Qwen-VLã€OpenAI æ–‡æœ¬æ¨¡å‹ï¼‰ï¼Œå®ç°äº†æ–‡æ¡£çš„å¤šæ¨¡æ€ç†è§£ä¸ Markdown &#x2F; JSON æ ¼å¼ç»“æ„åŒ–è¾“å‡ºï¼Œä¸ºçŸ¥è¯†å›¾è°±æ„å»ºå¥ å®šåŸºç¡€ã€‚</p>
<p>ä½†è¯¥é¡¹ç›®åœ¨å¤„ç†å¤æ‚è¡¨æ ¼æ—¶ä»å­˜åœ¨ä¸è¶³ï¼Œä¾‹å¦‚è¡¨æ ¼ä¸­å­˜åœ¨å­—ç¬¦æ˜¯æ¨ªç€æ‘†æ”¾æ—¶ï¼Œæˆ–è€…æ˜¯å­˜åœ¨å›¾åƒåµŒå…¥åœ¨è¡¨æ ¼ä¸­ï¼Œåˆ™æ— æ³•ä¿è¯åŸæœ‰çš„ç»“æ„ã€‚</p>
<hr>
]]></content>
      <categories>
        <category>OCR</category>
      </categories>
      <tags>
        <tag>OCR</tag>
        <tag>PDF</tag>
        <tag>AI</tag>
        <tag>Markdown</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Qwen</tag>
        <tag>Docling</tag>
        <tag>Knowledge Graph</tag>
      </tags>
  </entry>
  <entry>
    <title>Function Calling</title>
    <url>/2025/03/21/Function-Calling/</url>
    <content><![CDATA[<h1 id="Qwen-Function-Calling-è¯¦ç»†è§£æ"><a href="#Qwen-Function-Calling-è¯¦ç»†è§£æ" class="headerlink" title="Qwen Function Calling è¯¦ç»†è§£æ"></a>Qwen Function Calling è¯¦ç»†è§£æ</h1><hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="1-Function-Calling-ç®€ä»‹"><a href="#1-Function-Calling-ç®€ä»‹" class="headerlink" title="1. Function Calling ç®€ä»‹"></a><strong>1. Function Calling ç®€ä»‹</strong></h2><p>Function Calling å…è®¸ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åœ¨å›ç­”é—®é¢˜æ—¶è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œå¦‚ Python å‡½æ•°ã€API æˆ–æ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<p><strong>æ ¸å¿ƒæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥é—®é¢˜</strong></li>
<li><strong>AI åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·</strong></li>
<li><strong>å¦‚æœéœ€è¦ï¼ŒAI è¿”å› <code>tool_calls</code>ï¼Œè¯·æ±‚è°ƒç”¨ç‰¹å®šå‡½æ•°</strong></li>
<li><strong>å¼€å‘è€…æ‰§è¡Œå¯¹åº”çš„ Python å‡½æ•°ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœ</strong></li>
<li><strong>AI è¯»å–å·¥å…·è¿”å›å€¼ï¼Œç»§ç»­æ¨ç†å¹¶ç”Ÿæˆæœ€ç»ˆå›ç­”</strong></li>
</ol>
<h2 id="2-ä»£ç æ‹†è§£ï¼šFunction-Calling-åŠŸèƒ½å®ç°"><a href="#2-ä»£ç æ‹†è§£ï¼šFunction-Calling-åŠŸèƒ½å®ç°" class="headerlink" title="2. ä»£ç æ‹†è§£ï¼šFunction Calling åŠŸèƒ½å®ç°"></a><strong>2. ä»£ç æ‹†è§£ï¼šFunction Calling åŠŸèƒ½å®ç°</strong></h2><p>æœ¬æ–‡å®šä¹‰äº†ä¸€ä¸ªread_markdownå‡½æ•°ï¼Œç”¨äºé€šè¿‡æé—®è®©å¤§æ¨¡å‹è‡ªä¸»è°ƒç”¨å‡½æ•°é˜…è¯»markdownæ–‡æœ¬å†…å®¹ï¼Œå›ç­”é—®é¢˜ã€‚</p>
<h3 id="ï¼ˆ1ï¼‰åˆå§‹åŒ–-Qwen-å®¢æˆ·ç«¯"><a href="#ï¼ˆ1ï¼‰åˆå§‹åŒ–-Qwen-å®¢æˆ·ç«¯" class="headerlink" title="ï¼ˆ1ï¼‰åˆå§‹åŒ– Qwen å®¢æˆ·ç«¯"></a><strong>ï¼ˆ1ï¼‰åˆå§‹åŒ– Qwen å®¢æˆ·ç«¯</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">client = OpenAI(</span><br><span class="line">    api_key=<span class="string">&quot;your_api_key&quot;</span>,</span><br><span class="line">    base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è¿æ¥ Qwen API è¿›è¡Œè¯·æ±‚ã€‚</li>
<li><code>api_key</code> å¿…é¡»æ­£ç¡®ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction-Callingï¼‰"><a href="#ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction-Callingï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction Callingï¼‰"></a><strong>ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction Callingï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tools = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;read_markdown&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¯»å– &#x27;documents&#x27; æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡æ¡£ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;&#125;,  <span class="comment"># è¿™ä¸ªå·¥å…·ä¸éœ€è¦å‚æ•°</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>å‘Šè¯‰ Qwen å¯è°ƒç”¨çš„å·¥å…·ã€‚</li>
<li><code>name</code> å¿…é¡»ä¸ Python å‡½æ•°åä¸€è‡´ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è°ƒç”¨ã€‚</li>
<li><code>description</code> ç”¨äºè®© AI çŸ¥é“å·¥å…·çš„ç”¨é€”ã€‚</li>
<li>åœ¨ Qwen çš„ Function Calling ä¸­ï¼Œå·¥å…·çš„<code>parameters</code> çš„ <code>type</code> å¿…é¡»æ˜¯ <code>object</code>ã€‚</li>
<li><code>parameters</code> ä¸ºç©º <code>&#123;&#125;</code>ï¼Œè¡¨ç¤ºæ­¤å·¥å…·ä¸éœ€è¦å‚æ•°ã€‚</li>
<li><code>parameters</code> <strong>å¦‚æœä¸ä¸ºç©º</strong>ï¼Œè¡¨ç¤ºæ­¤å·¥å…·éœ€è¦<strong>ä¼ é€’å‚æ•°</strong>ã€‚<ul>
<li><code>properties</code> å®šä¹‰äº†æ¯ä¸ªå‚æ•°çš„åç§°ã€ç±»å‹å’Œæè¿°ã€‚</li>
<li><code>required</code> æŒ‡å®šäº†å“ªäº›å‚æ•°æ˜¯å¿…å¡«é¡¹ã€‚</li>
</ul>
</li>
</ul>
<p>å¦‚æœä»£ç ä¸­æ¶‰åŠåˆ°äº†å¤šä¸ªå·¥å…·çš„è°ƒç”¨ï¼Œå¯æŒ‰ç…§ä»¥ä¸‹çš„æ ¼å¼è¿›è¡Œå¤šä¸ªå·¥å…·çš„å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tools = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;read_markdown&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¯»å– &#x27;documents&#x27; æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡æ¡£ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;&#125;,  <span class="comment"># è¿™ä¸ªå·¥å…·ä¸éœ€è¦å‚æ•°</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;fetch_weather&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;city&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚åç§°&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;required&quot;</span>: [<span class="string">&quot;city&quot;</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>read_markdown</code> <strong>ä¸éœ€è¦å‚æ•°</strong>ï¼Œæ‰€ä»¥ <code>properties</code> ä¸ºç©ºã€‚</li>
<li><code>fetch_weather</code> <strong>éœ€è¦å‚æ•°</strong>ï¼Œå®ƒçš„ <code>parameters</code> é‡ŒåŒ…å« <code>city</code> è¿™ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚</li>
<li>AI åœ¨è°ƒç”¨ <code>fetch_weather</code> æ—¶ï¼Œä¼šä¼ é€’ JSON ç»“æ„çš„ <code>arguments</code>ï¼Œå¦‚ï¼š<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shanghai&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="ï¼ˆ3ï¼‰è¯»å–-Markdown-æ–‡ä»¶"><a href="#ï¼ˆ3ï¼‰è¯»å–-Markdown-æ–‡ä»¶" class="headerlink" title="ï¼ˆ3ï¼‰è¯»å– Markdown æ–‡ä»¶"></a><strong>ï¼ˆ3ï¼‰è¯»å– Markdown æ–‡ä»¶</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_markdown</span>():</span><br><span class="line">    doc_path = <span class="string">&quot;documents&quot;</span></span><br><span class="line">    md_file = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(doc_path):</span><br><span class="line">        <span class="keyword">if</span> file.endswith(<span class="string">&quot;.md&quot;</span>):</span><br><span class="line">            md_file = os.path.join(doc_path, file)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> md_file:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;No markdown file found in the &#x27;documents&#x27; folder.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md_file, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        content = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content[:<span class="number">5000</span>]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è¯»å– <code>documents/</code> ç›®å½•ä¸‹åç¼€ä¸º <code>.md</code> æ–‡ä»¶ã€‚</li>
<li>é™åˆ¶ 5000 å­—ç¬¦ï¼Œé˜²æ­¢è¶…å‡º Token é™åˆ¶ã€‚</li>
<li>å°†<code>markdown</code>æ–‡æœ¬çš„å‰5000ä¸ªå­—ç¬¦ä¼ é€’ç»™AIã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰"><a href="#ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰"></a><strong>ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fetch_weather</span>(<span class="params">city</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;å½“å‰ <span class="subst">&#123;city&#125;</span> çš„å¤©æ°”ï¼šæ™´ï¼Œ25Â°C&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿè·å–å¤©æ°”ä¿¡æ¯ï¼Œ<strong>å‚æ•° <code>city</code> å¿…é¡»ä¼ é€’</strong>ã€‚</li>
<li>Qwen åœ¨è°ƒç”¨ <code>fetch_weather</code> æ—¶ï¼Œä¼šè‡ªåŠ¨æä¾› <code>city</code> çš„å€¼ã€‚</li>
</ul>
<h3 id="ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹"><a href="#ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹" class="headerlink" title="ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹"></a><strong>ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    user_question = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é—®é¢˜ï¼š&quot;</span>).strip()</span><br><span class="line">    messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_question&#125;]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®©ç”¨æˆ·è¾“å…¥é—®é¢˜ï¼Œå¹¶å­˜å…¥ <code>messages</code> ä½œä¸ºå¯¹è¯å†å²ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹-AI-æ˜¯å¦è°ƒç”¨å·¥å…·"><a href="#ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹-AI-æ˜¯å¦è°ƒç”¨å·¥å…·" class="headerlink" title="ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹ AI æ˜¯å¦è°ƒç”¨å·¥å…·"></a><strong>ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹ AI æ˜¯å¦è°ƒç”¨å·¥å…·</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">completion = client.chat.completions.create(</span><br><span class="line">    model=<span class="string">&quot;qwen-plus&quot;</span>,</span><br><span class="line">    messages=messages,</span><br><span class="line">    tools=tools</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è°ƒç”¨ Qwenï¼Œè®©å…¶å†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ7ï¼‰æ£€æŸ¥-Qwen-æ˜¯å¦è°ƒç”¨äº†å·¥å…·"><a href="#ï¼ˆ7ï¼‰æ£€æŸ¥-Qwen-æ˜¯å¦è°ƒç”¨äº†å·¥å…·" class="headerlink" title="ï¼ˆ7ï¼‰æ£€æŸ¥ Qwen æ˜¯å¦è°ƒç”¨äº†å·¥å…·"></a><strong>ï¼ˆ7ï¼‰æ£€æŸ¥ Qwen æ˜¯å¦è°ƒç”¨äº†å·¥å…·</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> tool_calls:</span><br><span class="line">    tool_results = []</span><br><span class="line">    <span class="keyword">for</span> tool_call <span class="keyword">in</span> tool_calls:</span><br><span class="line">        tool_name = tool_call[<span class="string">&quot;function&quot;</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line">        tool_id = tool_call[<span class="string">&quot;id&quot;</span>]</span><br><span class="line">        tool_args = tool_call[<span class="string">&quot;function&quot;</span>][<span class="string">&quot;arguments&quot;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> tool_name == <span class="string">&quot;read_markdown&quot;</span>:</span><br><span class="line">            result_content = read_markdown()</span><br><span class="line">        <span class="keyword">elif</span> tool_name == <span class="string">&quot;fetch_weather&quot;</span>:</span><br><span class="line">            city = tool_args.get(<span class="string">&quot;city&quot;</span>, <span class="string">&quot;æœªçŸ¥åŸå¸‚&quot;</span>)</span><br><span class="line">            result_content = fetch_weather(city)</span><br><span class="line">        </span><br><span class="line">        tool_results.append(&#123;</span><br><span class="line">            <span class="string">&quot;role&quot;</span>: <span class="string">&quot;tool&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tool_call_id&quot;</span>: tool_id,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: result_content</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è§£æ Qwen è¿”å›çš„ <code>tool_calls</code>ã€‚</li>
<li><strong>è°ƒç”¨ä¸åŒçš„å·¥å…·</strong>ï¼Œå¦‚ <code>read_markdown()</code> æˆ– <code>fetch_weather(city)</code> ï¼Œå¹¶å­˜å…¥ <code>tool</code> æ¶ˆæ¯ã€‚</li>
<li><strong>å¦‚æœå·¥å…·éœ€è¦å‚æ•°</strong>ï¼Œå°±ä» <code>tool_args</code> é‡Œæå–ã€‚</li>
<li>è‹¥ <code>tool_calls</code> ä¸ºç©ºï¼Œè¯´æ˜ AI <strong>ä¸éœ€è¦è°ƒç”¨å·¥å…·</strong>ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ8ï¼‰è®©-Qwen-ç»§ç»­æ¨ç†"><a href="#ï¼ˆ8ï¼‰è®©-Qwen-ç»§ç»­æ¨ç†" class="headerlink" title="ï¼ˆ8ï¼‰è®© Qwen ç»§ç»­æ¨ç†"></a><strong>ï¼ˆ8ï¼‰è®© Qwen ç»§ç»­æ¨ç†</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">messages.append(&#123;</span><br><span class="line">    <span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tool_calls&quot;</span>: tool_calls</span><br><span class="line">&#125;)</span><br><span class="line">messages.extend(tool_results)</span><br><span class="line"></span><br><span class="line">completion2 = client.chat.completions.create(</span><br><span class="line">    model=<span class="string">&quot;qwen-plus&quot;</span>,</span><br><span class="line">    messages=messages,</span><br><span class="line">    tools=tools</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®© Qwen <strong>è¯»å–å·¥å…·è¿”å›å€¼ï¼Œå¹¶ç»§ç»­å›ç­”</strong>ã€‚</li>
</ul>
<hr>
<p>æ•ˆæœæµ‹è¯•ï¼š</p>
<p align="center">
  <img width="1198" alt="function_calling" src="https://github.com/user-attachments/assets/6da63b40-55b2-4eb0-b13c-b5f30225ff33" />
</p>

<hr>
<h2 id="3-ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› "><a href="#3-ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› " class="headerlink" title="3. ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› "></a><strong>3. ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› </strong></h2><ol>
<li><code>name</code> å’Œ Python å‡½æ•°ä¸åŒ¹é…ï¼Œå¯¼è‡´ AI æ— æ³•æ­£ç¡®è°ƒç”¨å·¥å…·ã€‚</li>
<li><code>role=&quot;tool&quot;</code> æ¶ˆæ¯æœªç´§è·Ÿ <code>assistant</code>ï¼Œå¯¼è‡´ AI è§£æé”™è¯¯ã€‚</li>
</ol>
<ul>
<li>è§£å†³æ–¹æ³•æ˜¯åœ¨è°ƒç”¨å®Œå·¥å…·ä¹‹åï¼Œå‘ messages ä¸­æ‰‹åŠ¨æ’å…¥ä¸€æ¡ role&#x3D;â€assistantâ€ çš„ç©ºæ¶ˆæ¯ï¼Œé™„å¸¦ tool_calls å­—æ®µï¼Œç„¶åç´§æ¥ç€æ·»åŠ  role&#x3D;â€toolâ€ çš„è¿”å›ç»“æœï¼Œè¿™æ ·å°±ä¿è¯äº†æ­£ç¡®çš„è°ƒç”¨é“¾è·¯ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">messages.append(&#123;</span><br><span class="line">    &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">    &quot;content&quot;: &quot;&quot;,  # ä¸€å®šä¸ºç©º</span><br><span class="line">    &quot;tool_calls&quot;: tool_calls  # å°† AI æœ€åˆè¿”å›çš„ tool_calls åŸæ ·æ”¾å›</span><br><span class="line">&#125;)</span><br><span class="line">messages.extend(tool_results)  # é©¬ä¸Šæ¥ä¸Š tool è¿”å›å€¼</span><br></pre></td></tr></table></figure></li>
<li>å› ä¸º Qwen æ¨¡å‹çš„è°ƒç”¨é“¾è§„åˆ™å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·æ¶ˆæ¯ï¼ˆrole=&quot;user&quot;ï¼‰</span><br><span class="line">â†’ AI è¿”å› tool_callsï¼ˆrole=&quot;assistant&quot;ï¼Œtool_callsï¼‰</span><br><span class="line">â†’ å·¥å…·æ‰§è¡Œï¼Œè¿”å›ç»“æœï¼ˆrole=&quot;tool&quot;ï¼Œtool_call_idï¼‰</span><br><span class="line">â†’ AI æ¥æ”¶åˆ°ç»“æœï¼Œç»§ç»­æ¨ç†</span><br></pre></td></tr></table></figure></li>
<li>å¦‚æœ role&#x3D;â€toolâ€ çš„æ¶ˆæ¯ä¸ç´§è·Ÿåœ¨å¸¦æœ‰ tool_calls çš„ assistant æ¶ˆæ¯åé¢ï¼Œæ¨¡å‹å°±æ— æ³•å¯¹ä¸Šâ€œè¿™ä¸ªå·¥å…·è°ƒç”¨è¿”å›äº†è¿™ä¸ªå€¼â€ï¼Œäºæ˜¯ä¼šæŠ¥é”™æˆ–è¾“å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<ol start="3">
<li><code>parameters</code> è®¾ç½®é”™è¯¯ï¼Œå¯¼è‡´ AI ä¼ é€’äº†é”™è¯¯çš„å‚æ•°ã€‚</li>
<li><code>messages</code> ç»“æ„é”™è¯¯ï¼Œå¯¼è‡´ AI ä¸èƒ½æ­£ç¡®è¯»å–å†å²å¯¹è¯ã€‚</li>
</ol>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://help.aliyun.com/zh/model-studio/user-guide/qwen-function-calling?spm=0.0.0.i4#8c41d25020ipz">Qwenå®˜æ–¹Function Calling</a>ã€‚</p>
]]></content>
      <categories>
        <category>LLMå­¦ä¹ ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Qwen</tag>
        <tag>Function Calling</tag>
        <tag>Agent</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>GraphRag Visualization</title>
    <url>/2025/04/11/GraphRag-Visualization/</url>
    <content><![CDATA[<h1 id="GraphRag-å›¾è°±å¯è§†åŒ–"><a href="#GraphRag-å›¾è°±å¯è§†åŒ–" class="headerlink" title="GraphRag å›¾è°±å¯è§†åŒ–"></a>GraphRag å›¾è°±å¯è§†åŒ–</h1><p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•å°†å¾®è½¯ GraphRAG æ¡†æ¶ç”Ÿæˆçš„ <code>entities.parquet</code> ä¸ <code>relationships.parquet</code> æ–‡ä»¶è½¬æ¢ä¸º GraphML å›¾ç»“æ„åœ¨ Gephi ä¸­å®ç°å¯è§†åŒ–ã€‚æˆ‘ä»¬å°†é€æ­¥è§£é‡Šæ•°æ®æ ¼å¼ã€å›¾æ„å»ºé€»è¾‘åŠ Python ä»£ç å®ç°çš„æ¯ä¸ªæ¨¡å—åŠŸèƒ½ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h2><p><img src="https://github.com/user-attachments/assets/df017c54-9d42-4708-bf90-7a6a7f25a632" alt="image"></p>
<hr>
<h2 id="1-GraphRAG-ç®€ä»‹ä¸æ•°æ®è¯´æ˜"><a href="#1-GraphRAG-ç®€ä»‹ä¸æ•°æ®è¯´æ˜" class="headerlink" title="1. GraphRAG ç®€ä»‹ä¸æ•°æ®è¯´æ˜"></a>1. GraphRAG ç®€ä»‹ä¸æ•°æ®è¯´æ˜</h2><p>Microsoft GraphRAG æ˜¯ä¸€ç§ç»“åˆå›¾ç»“æ„ä¸æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆ<strong>Retrieval-Augmented Generation</strong>ï¼‰çš„çŸ¥è¯†å¢å¼ºæ–¹æ¡ˆã€‚å®ƒä¼šè‡ªåŠ¨ä»æ–‡æœ¬ä¸­æå–å®ä½“åŠå…¶å…³ç³»ï¼Œåˆ†åˆ«å­˜å‚¨ä¸º <code>entities.parquet</code> å’Œ <code>relationships.parquet</code> æ–‡ä»¶ã€‚ç”¨æˆ·å¯åŸºäºæ­¤å›¾è°±è¿›è¡Œå¯è§†åŒ–åˆ†æã€ç»“æ„åŒ–æ£€ç´¢åŠä¸Šä¸‹æ–‡å¢å¼ºç”Ÿæˆä»»åŠ¡ã€‚</p>
<p>å¦‚æœä¸çŸ¥é“æ€ä¹ˆé…ç½® GraphRagï¼Œå¯ä»¥å‚è€ƒ<a href="https://microsoft.github.io/graphrag/get_started/">å®˜æ–¹æ–‡æ¡£</a></p>
<p>GraphRAG è¾“å‡ºæ–‡ä»¶è¯´æ˜å¦‚ä¸‹ï¼š</p>
<h3 id="1-entities-parquet"><a href="#1-entities-parquet" class="headerlink" title="1. entities.parquet"></a>1. <code>entities.parquet</code></h3><p>è¯¥æ–‡ä»¶ç”¨äºå­˜å‚¨å›¾ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªå®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰ã€‚å­—æ®µå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µå</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>å®ä½“çš„å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰</td>
</tr>
<tr>
<td><code>human_readable_id</code></td>
<td>å¯è¯»IDï¼ˆåºå·æˆ–åˆ«åï¼‰</td>
</tr>
<tr>
<td><code>title</code></td>
<td>å®ä½“çš„æ ‡é¢˜æˆ–åç§°</td>
</tr>
<tr>
<td><code>type</code></td>
<td>å®ä½“ç±»å‹ï¼ˆå¦‚æ¦‚å¿µ&#x2F;æœ¯è¯­ï¼‰</td>
</tr>
<tr>
<td><code>description</code></td>
<td>å®ä½“çš„æ–‡æœ¬æè¿°ä¿¡æ¯</td>
</tr>
<tr>
<td><code>text_unit_ids</code></td>
<td>æ‰€å±æ–‡æœ¬å•å…ƒIDé›†åˆ</td>
</tr>
<tr>
<td><code>frequency</code></td>
<td>å‡ºç°é¢‘ç‡</td>
</tr>
<tr>
<td><code>degree</code></td>
<td>åœ¨å›¾ä¸­çš„è¿æ¥åº¦ï¼ˆå¯é€‰ï¼‰</td>
</tr>
<tr>
<td><code>x</code>, <code>y</code></td>
<td>å¯è§†åŒ–åæ ‡ï¼ˆå¯é€‰ï¼‰</td>
</tr>
</tbody></table>
<h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">id: 053f7bde-5adf-4185-9964-0d51ccc5c313</span><br><span class="line">title: Transformer Model</span><br><span class="line">type: Concept</span><br><span class="line">description: A deep learning model architecture...</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-relationships-parquet"><a href="#2-relationships-parquet" class="headerlink" title="2. relationships.parquet"></a>2. <code>relationships.parquet</code></h3><p>è¯¥æ–‡ä»¶è¡¨ç¤ºå›¾ä¸­çš„è¾¹ï¼ˆå…³ç³»ï¼‰ï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸¤ä¸ªå®ä½“ä¹‹é—´çš„è¿çº¿åŠå…¶å±æ€§ã€‚</p>
<table>
<thead>
<tr>
<th>å­—æ®µå</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>å…³ç³»çš„å”¯ä¸€ID</td>
</tr>
<tr>
<td><code>human_readable_id</code></td>
<td>å¯è¯»ID</td>
</tr>
<tr>
<td><code>source</code></td>
<td>èµ·ç‚¹å®ä½“çš„IDï¼ˆå¯¹åº”entities.idï¼‰</td>
</tr>
<tr>
<td><code>target</code></td>
<td>ç»ˆç‚¹å®ä½“çš„ID</td>
</tr>
<tr>
<td><code>description</code></td>
<td>è¾¹çš„æ ‡ç­¾ï¼ˆå¦‚â€å¼•å‡ºâ€ã€â€å±äºâ€ï¼‰</td>
</tr>
<tr>
<td><code>weight</code></td>
<td>æƒé‡å€¼ï¼ˆå¦‚å…³ç³»å¼ºåº¦ï¼‰</td>
</tr>
<tr>
<td><code>combined_degree</code></td>
<td>ç»¼åˆåº¦é‡ï¼ˆå¯é€‰ï¼‰</td>
</tr>
<tr>
<td><code>text_unit_ids</code></td>
<td>æ¥æºæ–‡æœ¬IDé›†åˆ</td>
</tr>
</tbody></table>
<hr>
<h2 id="2-ä»-Parquet-åˆ°-GraphML-çš„å­—æ®µæ˜ å°„å…³ç³»"><a href="#2-ä»-Parquet-åˆ°-GraphML-çš„å­—æ®µæ˜ å°„å…³ç³»" class="headerlink" title="2. ä» Parquet åˆ° GraphML çš„å­—æ®µæ˜ å°„å…³ç³»"></a>2. ä» Parquet åˆ° GraphML çš„å­—æ®µæ˜ å°„å…³ç³»</h2><h3 id="1-entities-parquet-â†’-GraphML-èŠ‚ç‚¹ï¼ˆnodeï¼‰"><a href="#1-entities-parquet-â†’-GraphML-èŠ‚ç‚¹ï¼ˆnodeï¼‰" class="headerlink" title="1. entities.parquet â†’ GraphML èŠ‚ç‚¹ï¼ˆnodeï¼‰"></a>1. <code>entities.parquet</code> â†’ GraphML èŠ‚ç‚¹ï¼ˆnodeï¼‰</h3><table>
<thead>
<tr>
<th><code>.parquet</code> å­—æ®µ</th>
<th>GraphMLä¸­æ˜ å°„å†…å®¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td><code>node id</code></td>
<td>èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼ŒGraphML ä¸­ <code>&lt;node id=&quot;...&quot;&gt;</code></td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>label</code>ï¼ˆå±æ€§ï¼‰</td>
<td>èŠ‚ç‚¹æ˜¾ç¤ºæ ‡ç­¾</td>
</tr>
<tr>
<td><code>type</code></td>
<td><code>type</code>ï¼ˆå±æ€§ï¼‰</td>
<td>èŠ‚ç‚¹ç±»å‹</td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>description</code>ï¼ˆå±æ€§ï¼‰</td>
<td>èŠ‚ç‚¹çš„æ–‡æœ¬æè¿°</td>
</tr>
<tr>
<td><code>text_unit_ids</code></td>
<td><code>text_unit_ids</code>ï¼ˆå±æ€§ï¼‰</td>
<td>æ¥æºæ–‡æœ¬æ®µè½ ID</td>
</tr>
<tr>
<td><code>frequency</code></td>
<td><code>frequency</code>ï¼ˆå±æ€§ï¼‰</td>
<td>å‡ºç°é¢‘ç‡ï¼ˆå¯é€‰ï¼‰</td>
</tr>
<tr>
<td><code>degree</code></td>
<td><code>degree</code>ï¼ˆå±æ€§ï¼‰</td>
<td>å›¾ä¸­è¿æ¥åº¦ï¼ˆå¯é€‰ï¼‰</td>
</tr>
<tr>
<td><code>x</code>, <code>y</code></td>
<td><code>x</code>, <code>y</code>ï¼ˆå±æ€§ï¼‰</td>
<td>å¯è§†åŒ–åæ ‡ä½ç½®ï¼ˆå¯é€‰ï¼‰</td>
</tr>
</tbody></table>
<h3 id="2-relationships-parquet-â†’-GraphML-è¾¹ï¼ˆedgeï¼‰"><a href="#2-relationships-parquet-â†’-GraphML-è¾¹ï¼ˆedgeï¼‰" class="headerlink" title="2. relationships.parquet â†’ GraphML è¾¹ï¼ˆedgeï¼‰"></a>2. <code>relationships.parquet</code> â†’ GraphML è¾¹ï¼ˆedgeï¼‰</h3><table>
<thead>
<tr>
<th><code>.parquet</code> å­—æ®µ</th>
<th>GraphMLä¸­æ˜ å°„å†…å®¹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>source</code></td>
<td><code>edge source</code></td>
<td>è¾¹çš„èµ·ç‚¹</td>
</tr>
<tr>
<td><code>target</code></td>
<td><code>edge target</code></td>
<td>è¾¹çš„ç»ˆç‚¹</td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>label</code>ï¼ˆå±æ€§ï¼‰</td>
<td>è¾¹çš„æ ‡ç­¾</td>
</tr>
<tr>
<td><code>weight</code></td>
<td><code>weight</code>ï¼ˆå±æ€§ï¼‰</td>
<td>è¾¹çš„æƒé‡</td>
</tr>
<tr>
<td><code>text_unit_ids</code></td>
<td><code>text_unit_ids</code>ï¼ˆå±æ€§ï¼‰</td>
<td>æ¥æºæ–‡æœ¬ ID</td>
</tr>
<tr>
<td><code>combined_degree</code></td>
<td><code>combined_degree</code>ï¼ˆå±æ€§ï¼‰</td>
<td>ç»¼åˆåº¦é‡ï¼ˆå¯é€‰ï¼‰</td>
</tr>
</tbody></table>
<h3 id="GraphML-è¾“å‡ºç»“æ„ç¤ºä¾‹"><a href="#GraphML-è¾“å‡ºç»“æ„ç¤ºä¾‹" class="headerlink" title="GraphML è¾“å‡ºç»“æ„ç¤ºä¾‹"></a>GraphML è¾“å‡ºç»“æ„ç¤ºä¾‹</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">id</span>=<span class="string">&quot;523ff398-4659-461e-810a-1b00e4af85df&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;label&quot;</span>&gt;</span>Transformer Model<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;type&quot;</span>&gt;</span>Concept<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;description&quot;</span>&gt;</span>A deep learning model architecture...<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;frequency&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">edge</span> <span class="attr">source</span>=<span class="string">&quot;523ff398-4659-461e-810a-1b00e4af85df&quot;</span> <span class="attr">target</span>=<span class="string">&quot;23a77be7-1b36-4fac-a505-f9424d3dbce2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;label&quot;</span>&gt;</span>based on<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">data</span> <span class="attr">key</span>=<span class="string">&quot;weight&quot;</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">edge</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-ä»£ç ç»“æ„ä¸åŠŸèƒ½è§£é‡Š"><a href="#3-ä»£ç ç»“æ„ä¸åŠŸèƒ½è§£é‡Š" class="headerlink" title="3. ä»£ç ç»“æ„ä¸åŠŸèƒ½è§£é‡Š"></a>3. ä»£ç ç»“æ„ä¸åŠŸèƒ½è§£é‡Š</h2><h3 id="æ–‡ä»¶é€‰æ‹©ç•Œé¢"><a href="#æ–‡ä»¶é€‰æ‹©ç•Œé¢" class="headerlink" title="æ–‡ä»¶é€‰æ‹©ç•Œé¢"></a>æ–‡ä»¶é€‰æ‹©ç•Œé¢</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">root = tk.Tk()</span><br><span class="line">root.withdraw()</span><br><span class="line">entities_path = filedialog.askopenfilename(...)</span><br><span class="line">relations_path = filedialog.askopenfilename(...)</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ©ç”¨ <code>tkinter</code> å¼¹å‡ºå›¾å½¢ç•Œé¢ï¼Œåˆ†åˆ«é€‰æ‹©å®ä½“æ–‡ä»¶å’Œå…³ç³»æ–‡ä»¶è·¯å¾„ã€‚</li>
<li>è‹¥ç”¨æˆ·æœªé€‰æ‹©æ–‡ä»¶ï¼Œåˆ™ç¨‹åºä¸­æ–­é€€å‡ºã€‚</li>
</ul>
<h3 id="åŠ è½½-parquet-æ–‡ä»¶"><a href="#åŠ è½½-parquet-æ–‡ä»¶" class="headerlink" title="åŠ è½½ parquet æ–‡ä»¶"></a>åŠ è½½ parquet æ–‡ä»¶</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">entities_df = pd.read_parquet(entities_path)</span><br><span class="line">relations_df = pd.read_parquet(relations_path)</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ <code>pandas</code> å°† <code>.parquet</code> æ–‡ä»¶è¯»å–ä¸º <code>DataFrame</code>ã€‚</li>
<li>åç»­æ“ä½œä»¥ <code>DataFrame</code> è¡Œä¸ºå•ä½è¿›è¡Œå›¾æ„å»ºã€‚</li>
</ul>
<h3 id="åˆ›å»ºå›¾ç»“æ„"><a href="#åˆ›å»ºå›¾ç»“æ„" class="headerlink" title="åˆ›å»ºå›¾ç»“æ„"></a>åˆ›å»ºå›¾ç»“æ„</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">G = nx.DiGraph()</span><br></pre></td></tr></table></figure>
<ul>
<li>æ„å»º NetworkX æœ‰å‘å›¾å¯¹è±¡ <code>DiGraph()</code>ã€‚</li>
<li>è‹¥å¸Œæœ›ç”Ÿæˆæ— å‘å›¾ï¼Œæ›¿æ¢ä¸º <code>nx.Graph()</code> å³å¯ã€‚</li>
</ul>
<h3 id="æ·»åŠ èŠ‚ç‚¹"><a href="#æ·»åŠ èŠ‚ç‚¹" class="headerlink" title="æ·»åŠ èŠ‚ç‚¹"></a>æ·»åŠ èŠ‚ç‚¹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _, row <span class="keyword">in</span> entities_df.iterrows():</span><br><span class="line">    G.add_node(row[<span class="string">&quot;id&quot;</span>], label=row[<span class="string">&quot;title&quot;</span>], <span class="built_in">type</span>=row[<span class="string">&quot;type&quot;</span>], description=row[<span class="string">&quot;description&quot;</span>])</span><br></pre></td></tr></table></figure>
<ul>
<li>éå† <code>entities_df</code> çš„æ¯ä¸€è¡Œã€‚</li>
<li>æ¯è¡Œæ•°æ®ä½œä¸ºå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼š<ul>
<li>ID ä¸º <code>row[&quot;id&quot;]</code></li>
<li>é™„å¸¦å±æ€§åŒ…æ‹¬ <code>label</code>, <code>type</code>, <code>description</code></li>
</ul>
</li>
</ul>
<h3 id="æ·»åŠ è¾¹"><a href="#æ·»åŠ è¾¹" class="headerlink" title="æ·»åŠ è¾¹"></a>æ·»åŠ è¾¹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> _, row <span class="keyword">in</span> relations_df.iterrows():</span><br><span class="line">    G.add_edge(row[<span class="string">&quot;source&quot;</span>], row[<span class="string">&quot;target&quot;</span>], label=row[<span class="string">&quot;description&quot;</span>], weight=row.get(<span class="string">&quot;weight&quot;</span>, <span class="number">1.0</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>éå† <code>relationships_df</code> çš„æ¯ä¸€è¡Œã€‚</li>
<li>ä½¿ç”¨ <code>add_edge(source, target, **attrs)</code> æ–¹å¼æ·»åŠ æœ‰å‘è¾¹ã€‚</li>
<li>è¾¹çš„å±æ€§åŒ…æ‹¬ï¼š<ul>
<li><code>label</code>: æè¿°å…³ç³»å«ä¹‰</li>
<li><code>weight</code>: æƒé‡ï¼Œé»˜è®¤ä¸º 1.0</li>
</ul>
</li>
</ul>
<h3 id="å¯¼å‡ºä¸º-GraphML-æ–‡ä»¶"><a href="#å¯¼å‡ºä¸º-GraphML-æ–‡ä»¶" class="headerlink" title="å¯¼å‡ºä¸º GraphML æ–‡ä»¶"></a>å¯¼å‡ºä¸º GraphML æ–‡ä»¶</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">output_path = os.path.join(output_dir, <span class="string">&quot;output.graphml&quot;</span>)</span><br><span class="line">nx.write_graphml(G, output_path, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>è®¾ç½®è¾“å‡ºè·¯å¾„åˆ°æœ¬åœ° <code>output_graphml/</code> æ–‡ä»¶å¤¹ä¸­ã€‚</li>
<li>åˆ©ç”¨ <code>networkx.write_graphml()</code> å°†å›¾å†™ä¸º <code>.graphml</code> æ–‡ä»¶ã€‚</li>
<li>GraphML æ˜¯ XML æ ¼å¼ï¼Œä¾¿äºè¢« Gephiã€Cytoscape ç­‰å›¾åˆ†æå·¥å…·è¯»å–ã€‚</li>
</ul>
<hr>
<h2 id="4-å°†-GraphML-å¯¼å…¥-Gephi-å®ç°å¯è§†åŒ–"><a href="#4-å°†-GraphML-å¯¼å…¥-Gephi-å®ç°å¯è§†åŒ–" class="headerlink" title="4. å°† GraphML å¯¼å…¥ Gephi å®ç°å¯è§†åŒ–"></a>4. å°† GraphML å¯¼å…¥ Gephi å®ç°å¯è§†åŒ–</h2><h3 id="1-ä¸‹è½½-Gephi"><a href="#1-ä¸‹è½½-Gephi" class="headerlink" title="1. ä¸‹è½½ Gephi"></a>1. ä¸‹è½½ Gephi</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="https://gephi.org/users/download/">https://gephi.org/users/download/</a></p>
<h3 id="2-åœ¨-Gephi-ä¸­æ‰“å¼€è½¬æ¢åçš„-graphml-æ–‡ä»¶"><a href="#2-åœ¨-Gephi-ä¸­æ‰“å¼€è½¬æ¢åçš„-graphml-æ–‡ä»¶" class="headerlink" title="2. åœ¨ Gephi ä¸­æ‰“å¼€è½¬æ¢åçš„.graphml æ–‡ä»¶"></a>2. åœ¨ Gephi ä¸­æ‰“å¼€è½¬æ¢åçš„<code>.graphml</code> æ–‡ä»¶</h3><p>ç‚¹å‡»å·¦ä¸Šæ–¹çš„ <strong>æ•°æ®èµ„æ–™</strong>ï¼ŒæŸ¥çœ‹èŠ‚ç‚¹ä¸è¾¹çš„ä¿¡æ¯æ˜¯å¦å‡è¢«æ­£ç¡®å¯¼å…¥ã€‚</p>
<h3 id="3-èŠ‚ç‚¹ä¸è¾¹çš„æ¸²æŸ“"><a href="#3-èŠ‚ç‚¹ä¸è¾¹çš„æ¸²æŸ“" class="headerlink" title="3. èŠ‚ç‚¹ä¸è¾¹çš„æ¸²æŸ“"></a>3. èŠ‚ç‚¹ä¸è¾¹çš„æ¸²æŸ“</h3><ul>
<li>æ‰“å¼€ <strong>çª—å£</strong>, é€‰æ‹© <strong>å¤–è§‚</strong>ã€‚</li>
<li>åœ¨ <strong>å¤–è§‚</strong> ä¸­çš„ <strong>èŠ‚ç‚¹</strong> çª—å£ï¼Œç‚¹å‡» <strong>åˆ†å‰²</strong> ï¼Œé€‰æ‹© <strong>description</strong> æˆ–æ˜¯ <strong>type</strong> è¿›è¡Œæ¸²æŸ“ï¼Œç‚¹å‡» <strong>åº”ç”¨</strong>ã€‚</li>
<li>å¦‚æœéœ€è¦èŠ‚ç‚¹ä¸è¾¹çš„å…·ä½“ä¿¡æ¯è¢«æ¸²æŸ“åœ¨çª—å£ï¼Œæ ¹æ®å›¾ä¸­çš„é…ç½®è‡ªè¡Œå¤„ç†ã€‚</li>
</ul>
<p><img src="https://github.com/user-attachments/assets/8a2cfa7c-de43-4200-a7f4-74d2e0b57f7b" alt="image"></p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://github.com/microsoft/graphrag.git">GraphRag</a>ã€‚</p>
]]></content>
      <categories>
        <category>Knowledge Graph</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Knowledge Graph</tag>
        <tag>Python</tag>
        <tag>GraphRAG</tag>
        <tag>RAG</tag>
        <tag>Gephi</tag>
      </tags>
  </entry>
  <entry>
    <title>NebulaGraphQAChain</title>
    <url>/2025/03/20/NebulaGraphQAChain/</url>
    <content><![CDATA[<h1 id="åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG"><a href="#åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG" class="headerlink" title="åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG"></a>åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG</h1><hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/NebulaGraphQAChain.git">https://github.com/EvannZhongg/NebulaGraphQAChain.git</a></p>
<hr>
<h2 id="1-è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#1-è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="1. è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a><strong>1. è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong></h2><ul>
<li><strong>æŠŠè‡ªç„¶è¯­è¨€é—®é¢˜è½¬åŒ–ä¸ºå›¾æ•°æ®åº“NebulaGraphæŸ¥è¯¢è¯­å¥</strong></li>
<li><strong>æŸ¥è¯¢ NebulaGraphï¼ˆç¡®ä¿å›¾æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œæœ¬ä»£ç ä¸å†é¢å¤–æ„å»ºæ•°æ®æ’å…¥å›¾æ•°æ®åº“ï¼‰</strong></li>
<li><strong>è¿”å›æŸ¥è¯¢ç»“æœ</strong></li>
</ul>
<p><strong>ç®€å•æ¥è¯´</strong>ï¼š<br>ä½ å¯ä»¥ç”¨â€œäººè¯â€é—®å®ƒé—®é¢˜ï¼Œå®ƒä¼šè‡ªåŠ¨ <strong>ç¿»è¯‘æˆå›¾æ•°æ®åº“è¯­è¨€</strong>ï¼Œç„¶åå» <strong>å›¾æ•°æ®åº“æ‰¾ç­”æ¡ˆ</strong>ï¼Œå°†æŸ¥è¯¢åˆ°çš„ç»“æœä¸æé—®ç›¸ç»“åˆé‡æ–°ç”¨â€œäººè¯â€å›ç­”é—®é¢˜ã€‚</p>
<hr>
<h2 id="2-ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>2. ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ol>
<li>è¯»å– <strong>API é…ç½®</strong>ï¼ˆå‘Šè¯‰ä»£ç å¦‚ä½•è®¿é—® LLMï¼‰</li>
<li>è°ƒç”¨ <strong>å¤§æ¨¡å‹ï¼ˆLLMï¼‰</strong>ï¼Œè®©å®ƒå¸®æˆ‘ä»¬ç¿»è¯‘é—®é¢˜</li>
<li>è¿æ¥ <strong>NebulaGraph</strong> æ•°æ®åº“</li>
<li>æ‰§è¡Œ <strong>æ•°æ®åº“æŸ¥è¯¢</strong>ï¼Œè·å¾—ç»“æœ</li>
<li>è¿”å›æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœ</li>
</ol>
<hr>
<h2 id="3-ä»£ç åˆ†è§£è®²è§£"><a href="#3-ä»£ç åˆ†è§£è®²è§£" class="headerlink" title="3. ä»£ç åˆ†è§£è®²è§£"></a><strong>3. ä»£ç åˆ†è§£è®²è§£</strong></h2><h3 id="3-1-è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI-é…ç½®ï¼‰"><a href="#3-1-è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI-é…ç½®ï¼‰" class="headerlink" title="3.1 è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI é…ç½®ï¼‰"></a><strong>3.1 è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI é…ç½®ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å– .env æ–‡ä»¶</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">CHAT_API_URL = os.getenv(<span class="string">&quot;CHAT_API_URL&quot;</span>)</span><br><span class="line">API_KEY = os.getenv(<span class="string">&quot;API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> CHAT_API_URL <span class="keyword">or</span> <span class="keyword">not</span> API_KEY:</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&quot;è¯·åœ¨ .env æ–‡ä»¶ä¸­æ­£ç¡®é…ç½® CHAT_API_URL å’Œ API_KEY&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li><strong>è¯»å– API åœ°å€</strong> å’Œ <strong>å¯†é’¥</strong>ï¼Œè®©ä»£ç çŸ¥é“å¦‚ä½•è®¿é—®å¤§æ¨¡å‹ã€‚</li>
<li><strong>å¦‚æœæ²¡æœ‰é…ç½® API</strong>ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæé†’ç”¨æˆ·ã€‚</li>
</ul>
<p>ğŸ”¹ <strong>ä»€ä¹ˆæ˜¯ .env æ–‡ä»¶ï¼Ÿ</strong></p>
<p><code>.env</code> æ–‡ä»¶ç”¨äºå­˜æ”¾ <strong>API å¯†é’¥</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨åœ¨ä»£ç é‡Œå†™æ˜ç™½ï¼Œä¿è¯å®‰å…¨ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>.env</code> æ–‡ä»¶ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯siliconflowå¹³å°æä¾›çš„APIæœåŠ¡ï¼Œä½ å¯ä»¥åœ¨siliconflowå¹³å°è¿›è¡Œæ³¨å†Œç”³è¯·API KEYå¡«å…¥ä¸‹æ–¹çš„<code>API_KEY</code>å˜é‡ä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">CHAT_API_URL=https://api.siliconflow.cn/v1/chat/completions</span><br><span class="line">API_KEY=sk-***************************</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-2-è°ƒç”¨-LLM-API"><a href="#3-2-è°ƒç”¨-LLM-API" class="headerlink" title="3.2 è°ƒç”¨ LLM API"></a><strong>3.2 è°ƒç”¨ LLM API</strong></h3><h4 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">call_chat_api</span>(<span class="params">prompt</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è°ƒç”¨ LLM API ç”Ÿæˆ Cypher æŸ¥è¯¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(</span><br><span class="line">            CHAT_API_URL,</span><br><span class="line">            headers=&#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;API_KEY&#125;</span>&quot;</span>&#125;,</span><br><span class="line">            json=&#123;</span><br><span class="line">                <span class="string">&quot;model&quot;</span>: <span class="string">&quot;deepseek-ai/DeepSeek-V3&quot;</span>,  <span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">                <span class="string">&quot;messages&quot;</span>: [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            data = response.json()</span><br><span class="line">            result = data[<span class="string">&quot;choices&quot;</span>][<span class="number">0</span>][<span class="string">&quot;message&quot;</span>][<span class="string">&quot;content&quot;</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å¤„ç† Markdown ä»£ç å—</span></span><br><span class="line">            <span class="keyword">if</span> result.startswith(<span class="string">&quot;```nebula&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```nebula&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```cypher&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```cypher&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```sql&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```sql&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;API è°ƒç”¨å¤±è´¥: <span class="subst">&#123;response.status_code&#125;</span> <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;API è°ƒç”¨å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-1"><a href="#ä½œç”¨ï¼š-1" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ol>
<li><strong>å‘é€è¯·æ±‚</strong> ç»™ LLMï¼ˆå¤§æ¨¡å‹ï¼‰ï¼Œè®©å®ƒæŠŠç”¨æˆ·é—®é¢˜ç¿»è¯‘æˆ <strong>æ•°æ®åº“æŸ¥è¯¢è¯­å¥</strong>ã€‚</li>
<li><strong>è§£æè¿”å›ç»“æœ</strong>ï¼Œæå–çœŸæ­£çš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ã€‚</li>
<li><strong>å¦‚æœå‡ºé”™</strong>ï¼Œå°±æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</li>
</ol>
<ul>
<li>ä»£ç ä¸­çš„ä»¥ä¸‹éƒ¨åˆ†ç”¨äºå¤„ç†å¤§æ¨¡å‹è¾“å‡ºå«æœ‰ä»£ç æ ‡è®°å—çš„æƒ…å†µï¼Œå¦‚æœä½ çš„å¤§æ¨¡å‹è¾“å‡ºå«æœ‰ä»£ç æ ‡è®°å—åˆ™æŸ¥è¯¢è¯­å¥ä¼šå‡ºç°å¤±è´¥ï¼Œåœ¨ä¸‹æ–¹ä»£ç ä¸­æ·»åŠ ä»£ç æ ‡è®°å—åç§°ï¼Œé¿å…æŸ¥è¯¢å‡ºé”™.<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if result.startswith(&quot;```ä»£ç æ ‡è®°å—å†…å®¹&quot;) and result.endswith(&quot;```&quot;):</span><br><span class="line">  result = result[len(&quot;```&quot;):-len(&quot;```&quot;)].strip()</span><br></pre></td></tr></table></figure></li>
</ul>
<p> <strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>ä½ è¾“å…¥ï¼šâ€œåˆ—å‡ºæŸä¸ªç”µå­å™¨ä»¶çš„æ‰€æœ‰ç›¸å…³å‚æ•°â€</li>
<li>LLM å¯èƒ½è¿”å›ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MATCH (n:Component) RETURN n.parameters</span><br></pre></td></tr></table></figure>
è¿™ä¸ªå°±æ˜¯ <strong>Cypher æŸ¥è¯¢è¯­å¥</strong>ï¼Œå¯ä»¥ç›´æ¥åœ¨å›¾æ•°æ®åº“æ‰§è¡Œã€‚</li>
</ul>
<hr>
<h3 id="3-3-è‡ªå®šä¹‰-LLM-å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥"><a href="#3-3-è‡ªå®šä¹‰-LLM-å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥" class="headerlink" title="3.3 è‡ªå®šä¹‰ LLM å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥"></a><strong>3.3 è‡ªå®šä¹‰ LLM å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.runnables <span class="keyword">import</span> Runnable</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompt_values <span class="keyword">import</span> StringPromptValue</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomChatModel</span>(<span class="title class_ inherited__">Runnable</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">invoke</span>(<span class="params">self, <span class="built_in">input</span>, config: <span class="built_in">dict</span> = <span class="literal">None</span>, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(<span class="built_in">input</span>, StringPromptValue):</span><br><span class="line">            <span class="built_in">input</span> = <span class="built_in">input</span>.to_string()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(<span class="built_in">input</span>, <span class="built_in">str</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;Expected input to be a string, got <span class="subst">&#123;<span class="built_in">type</span>(<span class="built_in">input</span>)&#125;</span> instead.&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        result = call_chat_api(<span class="built_in">input</span>)</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;API è°ƒç”¨æœªè¿”å›æœ‰æ•ˆå“åº”&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-2"><a href="#ä½œç”¨ï¼š-2" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è®© <strong>LangChain æ¡†æ¶</strong> çŸ¥é“å¦‚ä½•è°ƒç”¨ LLMã€‚</li>
<li>å¤„ç†è¾“å…¥æ•°æ®ï¼Œç¡®ä¿ LLM <strong>å¯ä»¥æ­£ç¡®ç†è§£é—®é¢˜</strong>ã€‚</li>
<li>è°ƒç”¨ <code>call_chat_api()</code>ï¼Œè·å– LLM ç”Ÿæˆçš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ã€‚</li>
</ul>
<hr>
<h3 id="3-4-è¿æ¥-NebulaGraph"><a href="#3-4-è¿æ¥-NebulaGraph" class="headerlink" title="3.4 è¿æ¥ NebulaGraph"></a><strong>3.4 è¿æ¥ NebulaGraph</strong></h3><h4 id="ä»£ç ï¼š-1"><a href="#ä»£ç ï¼š-1" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.graphs <span class="keyword">import</span> NebulaGraph</span><br><span class="line"></span><br><span class="line">graph = NebulaGraph(</span><br><span class="line">    space=<span class="string">&quot;SPACE&quot;</span>,  <span class="comment">#å°†SPACEä¿®æ”¹ä¸ºè‡ªå·±çš„å›¾ç©ºé—´åç§°</span></span><br><span class="line">    username=<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    password=<span class="string">&quot;nebula&quot;</span>,</span><br><span class="line">    address=<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    port=<span class="number">9669</span>,</span><br><span class="line">    session_pool_size=<span class="number">30</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-3"><a href="#ä½œç”¨ï¼š-3" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è¿æ¥ <strong>NebulaGraph å›¾æ•°æ®åº“</strong>ï¼Œè®©ä»£ç å¯ä»¥æŸ¥è¯¢æ•°æ®ã€‚</li>
<li>é…ç½® <strong>æ•°æ®åº“åœ°å€ã€ç”¨æˆ·åã€å¯†ç </strong>ã€‚</li>
</ul>
<hr>
<h3 id="3-5-è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹"><a href="#3-5-è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹" class="headerlink" title="3.5 è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹"></a><strong>3.5 è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹</strong></h3><h4 id="ä»£ç ï¼š-2"><a href="#ä»£ç ï¼š-2" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">query_graph</span>(<span class="params">question</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿è¡Œ NebulaGraph QAChainï¼Œå¤„ç†è‡ªç„¶è¯­è¨€æŸ¥è¯¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        answer = chain.run(question)</span><br><span class="line">        <span class="keyword">return</span> answer</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æŸ¥è¯¢æ‰§è¡Œå‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test_question = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢é—®é¢˜: &quot;</span>)  <span class="comment"># è®©ç”¨æˆ·åœ¨ç»ˆç«¯è¾“å…¥é—®é¢˜</span></span><br><span class="line">    response = query_graph(test_question)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢ç»“æœ:&quot;</span>, response)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-4"><a href="#ä½œç”¨ï¼š-4" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è®©ç”¨æˆ·è¾“å…¥é—®é¢˜ã€‚</li>
<li>è°ƒç”¨ <code>chain.run(question)</code> å¤„ç†æŸ¥è¯¢ã€‚</li>
<li><strong>è¿”å›æŸ¥è¯¢è¯­å¥å’Œç»“æœ</strong>ã€‚</li>
</ul>
<p>ğŸ“Œ <strong>ç¤ºä¾‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·è¾“å…¥ï¼š<strong>â€œ1N4736AT-Dçš„åº”ç”¨æœ‰ä»€ä¹ˆâ€</strong></li>
<li>ä»£ç è°ƒç”¨ LLMï¼Œè·å– Cypher è¯­å¥</li>
<li>æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿”å›ç»“æœã€‚<br><img src="https://github.com/user-attachments/assets/fefb7d40-9737-4dc1-a3d0-266445ccc65a" alt="Query Execution"></li>
<li>æˆ‘ä»¬å¯ä»¥åœ¨å›¾æ•°æ®åº“ä¸­è¿›è¡ŒéªŒè¯ã€‚<br><img src="https://github.com/user-attachments/assets/72b07b88-740e-4210-aaaf-823e29bfb3d1" alt="Nebula Graph Query"></li>
<li>è¿™é‡Œåˆ¶ä½œäº†ä¸€ä¸ªç®€æ˜“çš„å‰ç«¯é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹æ•ˆæœå’Œåç«¯æ—¥å¿—ï¼Œè¯¦ç»†ä»£ç å¯åœ¨æœ¬æ–‡å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–ã€‚<br><img src="https://github.com/user-attachments/assets/8a1613eb-ec9a-4e2f-bce9-3876ebc80191" alt="image"></li>
</ol>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://github.com/hwchase17/langchain">LangChain</a> å’Œ <a href="http://doc.cnlangchain.com/modules/chains/examples/graph_nebula_qa.html">NebulaGraphQAChain</a>ã€‚</p>
]]></content>
      <categories>
        <category>Knowledge Graph</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Knowledge Graph</tag>
        <tag>Python</tag>
        <tag>GraphRAG</tag>
        <tag>RAG</tag>
        <tag>å›¾æ•°æ®åº“</tag>
        <tag>LangChain</tag>
        <tag>NebulaGraph</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo and Chic themes add Giscus comment system</title>
    <url>/2025/03/24/Hexo-and-Chic-themes-add-Giscus-comment-system/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸»é¢˜é›†æˆ-Giscus-è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹"><a href="#Hexo-Chic-ä¸»é¢˜é›†æˆ-Giscus-è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹" class="headerlink" title="Hexo + Chic ä¸»é¢˜é›†æˆ Giscus è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹"></a>Hexo + Chic ä¸»é¢˜é›†æˆ Giscus è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹</h1><p>æœ¬æ•™ç¨‹å°†æ•™ä½ å¦‚ä½•åœ¨ Hexo åšå®¢ï¼ˆä½¿ç”¨ Chic ä¸»é¢˜ï¼‰ä¸­æ·»åŠ  Giscus è¯„è®ºç³»ç»Ÿï¼Œè®©ä½ çš„åšå®¢æ‹¥æœ‰ç®€æ´ç°ä»£çš„è¯„è®ºåŠŸèƒ½ï¼Œå¹¶ä¸”æ”¯æŒæ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h2><h3 id="1-ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š"><a href="#1-ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š" class="headerlink" title="1. ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š"></a>1. ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š</h3><ul>
<li>åšå®¢å·²æ­å»ºå¹¶ä½¿ç”¨ Hexo æ¡†æ¶</li>
<li>æ­£åœ¨ä½¿ç”¨ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ä¸»é¢˜</li>
<li>åšå®¢æ‰˜ç®¡åœ¨ GitHub</li>
</ul>
<h3 id="2-å¯ç”¨-GitHub-Discussions-åŠŸèƒ½"><a href="#2-å¯ç”¨-GitHub-Discussions-åŠŸèƒ½" class="headerlink" title="2. å¯ç”¨ GitHub Discussions åŠŸèƒ½"></a>2. å¯ç”¨ GitHub Discussions åŠŸèƒ½</h3><ol>
<li>æ‰“å¼€ä½ çš„åšå®¢ä»“åº“é¡µé¢</li>
<li>ç‚¹å‡»é¡¶éƒ¨çš„ <strong>Settings</strong></li>
<li>åœ¨ <strong>General</strong> ä¸­ <strong>Features</strong> åŒºåŸŸç‚¹å‡» <strong>Discussions</strong></li>
<li>å‹¾é€‰ <strong>â€œEnable discussions for this repositoryâ€</strong></li>
</ol>
<p><img src="https://github.com/user-attachments/assets/6686f60e-f2d4-4a87-8b0d-d3425070c2cd" alt="setting_discussions"></p>
<hr>
<h2 id="äºŒã€ä½¿ç”¨-Giscus-app-è·å–è¯„è®ºé…ç½®ä»£ç "><a href="#äºŒã€ä½¿ç”¨-Giscus-app-è·å–è¯„è®ºé…ç½®ä»£ç " class="headerlink" title="äºŒã€ä½¿ç”¨ Giscus.app è·å–è¯„è®ºé…ç½®ä»£ç "></a>äºŒã€ä½¿ç”¨ Giscus.app è·å–è¯„è®ºé…ç½®ä»£ç </h2><ol>
<li>æ‰“å¼€ Giscus å®˜ç½‘ï¼š<a href="https://giscus.app/">https://giscus.app</a></li>
<li>ç™»å½• GitHub è´¦å·</li>
<li>å®‰è£… <a href="https://github.com/apps/giscus">giscus</a> app  ï¼Œå¦åˆ™è®¿å®¢å°†æ— æ³•è¯„è®ºå’Œå›åº”</li>
<li>æŒ‰ç…§å¦‚ä¸‹é€‰æ‹©è¿›è¡Œé…ç½®ï¼š<ul>
<li>Repository: é€‰æ‹©ä½ çš„åšå®¢ä»“åº“ï¼ˆæ³¨æ„å¡«å†™æ ¼å¼ä¸º <strong>ç”¨æˆ·å&#x2F;ä»“åº“å</strong>ï¼‰</li>
<li>Discussion Category: å»ºè®®é€‰æ‹© <strong>Announcements</strong>ï¼ˆé˜²æ­¢è¯»è€…éšæ„å‘å¸–ï¼‰</li>
<li>Page â†”ï¸ Discussion Mapping: é€‰æ‹© <strong>pathname</strong></li>
<li>Theme: é€‰æ‹©ä»»æ„ï¼ˆæˆ‘ä»¬åç»­ä¼šåŠ¨æ€æ§åˆ¶ï¼‰</li>
<li>Language: é€‰æ‹© <code>zh-CN</code></li>
</ul>
</li>
<li>ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ <strong>â€œCopy code snippetâ€</strong>ï¼Œå¤åˆ¶ç”Ÿæˆçš„ <code>&lt;script&gt;</code> æ ‡ç­¾ä»£ç </li>
</ol>
<hr>
<h2 id="ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶"><a href="#ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶" class="headerlink" title="ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶"></a>ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶</h2><h3 id="1-æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•"><a href="#1-æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•" class="headerlink" title="1. æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•"></a>1. æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•</h3><p>è·¯å¾„ï¼š<code>themes/hexo-theme-Chic/layout/_partial/</code></p>
<h3 id="2-åˆ›å»ºæˆ–ç¼–è¾‘-livers-ejs-æ–‡ä»¶"><a href="#2-åˆ›å»ºæˆ–ç¼–è¾‘-livers-ejs-æ–‡ä»¶" class="headerlink" title="2. åˆ›å»ºæˆ–ç¼–è¾‘ livers.ejs æ–‡ä»¶"></a>2. åˆ›å»ºæˆ–ç¼–è¾‘ <code>livers.ejs</code> æ–‡ä»¶</h3><p>å°† Giscus ä¸­ç”Ÿæˆçš„ <code>&lt;script&gt;</code> æ ‡ç­¾ä»£ç å¡«å…¥æ–‡ä»¶ï¼ˆæ³¨æ„éƒ¨åˆ†å‚æ•°çš„åŒºåˆ«ï¼‰ï¼ŒåŒæ—¶å¢åŠ ä¸»é¢˜è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Giscus è¯„è®ºåŒºæŒ‚è½½ç‚¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;giscus-container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 2.5rem;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Giscus åŠ¨æ€åŠ è½½è„šæœ¬ï¼šåˆå§‹åŠ è½½ + æ˜æš—ä¸»é¢˜åˆ‡æ¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">createGiscus</span>(<span class="params">theme</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> giscusContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;giscus-container&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (!giscusContainer) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ¸…é™¤æ—§çš„è¯„è®º iframe</span></span></span><br><span class="line"><span class="language-javascript">    giscusContainer.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="property">src</span> = <span class="string">&#x27;https://giscus.app/client.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ›¿æ¢ä¸ºä½ çš„ GitHub ä»“åº“ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šusername/repoï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo&#x27;</span>, <span class="string">&#x27;your-github-username/your-repo-name&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">// æ›¿æ¢ä¸ºä½ çš„ repo-id å’Œ category-idï¼ˆåœ¨ giscus.app é…ç½®é¡µé¢ç”Ÿæˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo-id&#x27;</span>, <span class="string">&#x27;your-repo-id&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category&#x27;</span>, <span class="string">&#x27;your-category-name&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category-id&#x27;</span>, <span class="string">&#x27;your-category-id&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å…¶ä»–å¸¸è§„æ¨èè®¾ç½®</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-mapping&#x27;</span>, <span class="string">&#x27;pathname&#x27;</span>);           <span class="comment">// ç”¨é¡µé¢è·¯å¾„åŒ¹é…è¯„è®ºå¸–</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-strict&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);                   <span class="comment">// è‹¥æ— åŒ¹é…å¸–åˆ™åˆ›å»ºæ–°å¸–</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-reactions-enabled&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);        <span class="comment">// å¯ç”¨è¡¨æƒ…ååº”</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-emit-metadata&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);            <span class="comment">// ä¸è¾“å‡ºå…ƒæ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-input-position&#x27;</span>, <span class="string">&#x27;top&#x27;</span>);         <span class="comment">// è¾“å…¥æ¡†åœ¨è¯„è®ºä¸Šæ–¹</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, theme);                </span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-lang&#x27;</span>, <span class="string">&#x27;zh-CN&#x27;</span>);                 <span class="comment">// ä¸­æ–‡ç•Œé¢</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;crossorigin&#x27;</span>, <span class="string">&#x27;anonymous&#x27;</span>);           <span class="comment">// è·¨åŸŸèµ„æºå®‰å…¨</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="property">async</span> = <span class="literal">true</span>;                                       </span></span><br><span class="line"><span class="language-javascript">     </span></span><br><span class="line"><span class="language-javascript">    giscusContainer.<span class="title function_">appendChild</span>(script);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">getCurrentTheme</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark-theme&#x27;</span>) ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// é¡µé¢é¦–æ¬¡åŠ è½½ï¼Œæ ¹æ®å½“å‰ä¸»é¢˜æŒ‚è½½è¯„è®º</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç›‘å¬æŒ‰é’®ç‚¹å‡»åˆ‡æ¢ä¸»é¢˜ â†’ é‡è½½è¯„è®ºåŒº</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> buttons = [</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toggleBtn&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mobile-toggle-theme&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript">    buttons.<span class="title function_">forEach</span>(<span class="function"><span class="params">btn</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!btn) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">400</span>); <span class="comment">// ç¨ä½œå»¶è¿Ÿï¼Œç¡®ä¿ class åˆ‡æ¢å®Œæ¯•</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç›‘å¬ body class æ”¹å˜ï¼ˆä¿é™©æ–¹æ¡ˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123; <span class="attr">attributes</span>: <span class="literal">true</span>, <span class="attr">attributeFilter</span>: [<span class="string">&#x27;class&#x27;</span>] &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>âš ï¸ è¯·å°† <code>data-repo-id</code> å’Œ <code>data-category-id</code> æ›¿æ¢ä¸ºä½ ä» giscus.app è·å–çš„å€¼ã€‚</p>
</blockquote>
<hr>
<h2 id="å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿"><a href="#å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿" class="headerlink" title="å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿"></a>å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿</h2><p>æ‰“å¼€æ–‡ä»¶ï¼š<code>themes/hexo-theme-Chic/layout/_page/post.ejs</code></p>
<p>æ‰¾åˆ°ä»£ç åº•éƒ¨ï¼Œåœ¨ <code>&lt;/article&gt;</code> ä¸Šæ–¹æ·»åŠ ä¸€è¡Œä»£ç  <code>&lt;%- partial(&#39;_partial/livers&#39;) %&gt;</code> ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">        &lt;section class=&quot;post-nav&quot;&gt;</span><br><span class="line">            &lt;% if(post.prev)&#123; %&gt;</span><br><span class="line">                &lt;a class=&quot;prev&quot; rel=&quot;prev&quot; href=&quot;&lt;%- url_for(post.prev.path)%&gt;&quot;&gt;&lt;%- post.prev.title%&gt;&lt;/a&gt;</span><br><span class="line">            &lt;% &#125; %&gt;</span><br><span class="line">            &lt;% if(post.next)&#123; %&gt;</span><br><span class="line">            &lt;a class=&quot;next&quot; rel=&quot;next&quot; href=&quot;&lt;%- url_for(post.next.path)%&gt;&quot;&gt;&lt;%- post.next.title%&gt;&lt;/a&gt;</span><br><span class="line">            &lt;% &#125; %&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">	&lt;%- partial(&#x27;_partial/livers&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/article&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šè®©è¯„è®ºåŒºå‡ºç°åœ¨æ¯ç¯‡æ–‡ç« çš„åº•éƒ¨ã€‚</p>
<hr>
<h2 id="äº”ã€é‡æ–°éƒ¨ç½²åšå®¢"><a href="#äº”ã€é‡æ–°éƒ¨ç½²åšå®¢" class="headerlink" title="äº”ã€é‡æ–°éƒ¨ç½²åšå®¢"></a>äº”ã€é‡æ–°éƒ¨ç½²åšå®¢</h2><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—®ä½ çš„åšå®¢æ–‡ç« é¡µé¢ï¼Œåº”è¯¥å°±èƒ½çœ‹åˆ° Giscus è¯„è®ºæ¡†</p>
<hr>
<h2 id="æˆåŠŸæ•ˆæœ"><a href="#æˆåŠŸæ•ˆæœ" class="headerlink" title="æˆåŠŸæ•ˆæœ"></a>æˆåŠŸæ•ˆæœ</h2><p><img src="https://github.com/user-attachments/assets/b75a7ffd-d99b-4d4a-9e95-cb43b06b36aa" alt="discussions"> </p>
<ul>
<li>æ”¯æŒ GitHub ç™»å½•è¯„è®º</li>
<li>è¯„è®ºå­˜å‚¨åœ¨ Discussions ä¸­ï¼Œä¾¿äºç®¡ç†</li>
<li>è¯„è®ºåŒºæ”¯æŒæ˜æš—ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼Œä¸ Chic åšå®¢é£æ ¼ä¸€è‡´</li>
</ul>
<hr>
<p>å¦‚æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰åŠ è½½é”™è¯¯</li>
<li>ç¡®ä¿ repo-id å’Œ category-id æ­£ç¡®</li>
<li>ç¡®ä¿å¯ç”¨äº† Discussions åŠŸèƒ½</li>
</ul>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Securely Rendering LLM-Generated Local Image Paths in Flask</title>
    <url>/2025/06/13/Securely-Rendering-LLM-Generated-Local-Image-Paths-in-Flask/</url>
    <content><![CDATA[<h1 id="ä¸€ä¸ªåœ¨Flask-Webåº”ç”¨ä¸­å®‰å…¨æ¸²æŸ“LLMè¾“å‡ºçš„æœ¬åœ°å›¾ç‰‡è·¯å¾„çš„æ–¹æ³•"><a href="#ä¸€ä¸ªåœ¨Flask-Webåº”ç”¨ä¸­å®‰å…¨æ¸²æŸ“LLMè¾“å‡ºçš„æœ¬åœ°å›¾ç‰‡è·¯å¾„çš„æ–¹æ³•" class="headerlink" title="ä¸€ä¸ªåœ¨Flask Webåº”ç”¨ä¸­å®‰å…¨æ¸²æŸ“LLMè¾“å‡ºçš„æœ¬åœ°å›¾ç‰‡è·¯å¾„çš„æ–¹æ³•"></a>ä¸€ä¸ªåœ¨Flask Webåº”ç”¨ä¸­å®‰å…¨æ¸²æŸ“LLMè¾“å‡ºçš„æœ¬åœ°å›¾ç‰‡è·¯å¾„çš„æ–¹æ³•</h1><h2 id="1-é—®é¢˜èƒŒæ™¯ï¼šæµè§ˆå™¨å®‰å…¨æ¨¡å‹ä¸æœ¬åœ°æ–‡ä»¶è®¿é—®é™åˆ¶"><a href="#1-é—®é¢˜èƒŒæ™¯ï¼šæµè§ˆå™¨å®‰å…¨æ¨¡å‹ä¸æœ¬åœ°æ–‡ä»¶è®¿é—®é™åˆ¶" class="headerlink" title="1. é—®é¢˜èƒŒæ™¯ï¼šæµè§ˆå™¨å®‰å…¨æ¨¡å‹ä¸æœ¬åœ°æ–‡ä»¶è®¿é—®é™åˆ¶"></a>1. é—®é¢˜èƒŒæ™¯ï¼šæµè§ˆå™¨å®‰å…¨æ¨¡å‹ä¸æœ¬åœ°æ–‡ä»¶è®¿é—®é™åˆ¶</h2><p>åœ¨æ„å»ºåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆ<code>LLM</code>ï¼‰çš„ <code>Web</code> åº”ç”¨æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯ <code>LLM</code> çš„è¾“å‡ºä¸­åŒ…å«äº†æŒ‡å‘æœåŠ¡å™¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å›¾ç‰‡è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæœ¬åœ°æ­å»ºçš„ <code>RAG</code> ç³»ç»Ÿä¸­ï¼Œ<code>LLM</code> å¯èƒ½ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆä¸€æ®µåŒ…å«æ ‡å‡† <code>Markdown</code> å›¾ç‰‡è¯­æ³•çš„å›ç­”ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">![å›¾ç‰‡](D:\images\image.png)</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œå¦‚æœå°†è¿™æ®µ <code>Markdown</code> ç›´æ¥è½¬æ¢ä¸º <code>HTML</code>ï¼ˆä¾‹å¦‚ <code>&lt;img src=&quot;D:\project\data\images\package_diagram.png&quot;&gt;</code>ï¼‰ï¼Œå¹¶è¯•å›¾åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ¸²æŸ“ï¼Œè¯¥è¯·æ±‚å°†ä¼šå¤±è´¥å‡ºç°æŠ¥é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Not allowed to load local resource: file:///D:/...</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºç°ä»£æµè§ˆå™¨çš„å®‰å…¨æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯åŒæºç­–ç•¥ï¼ˆ<code>Same-Origin Policy</code>ï¼‰å’Œå®‰å…¨æ²™ç®±æœºåˆ¶ï¼Œä¸¥æ ¼ç¦æ­¢ç½‘é¡µä¸­çš„JavaScriptä»£ç ç›´æ¥è®¿é—®ç”¨æˆ·çš„æœ¬åœ°æˆ–è¿œç¨‹æœåŠ¡å™¨çš„ä»»æ„æ–‡ä»¶ç³»ç»Ÿã€‚è¿™ç§é™åˆ¶æ˜¯ä¿éšœç”¨æˆ·å®‰å…¨çš„åŸºçŸ³ã€‚</p>
<p>å› æ­¤ï¼Œå¿…é¡»è®¾è®¡ä¸€ä¸ªå®‰å…¨ä¸”æœ‰æ•ˆçš„æœºåˆ¶ï¼Œä½œä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„â€œä¸­é—´äººâ€ï¼Œä»¥å®ç°å›¾ç‰‡çš„æ­£ç¡®æ¸²æŸ“ã€‚</p>
<hr>
<h2 id="2-è§£å†³æ–¹æ¡ˆæ¶æ„ï¼šå»ºç«‹ä¸€ä¸ªâ€œå—ä¿¡ä»»çš„ä¸­é—´äººâ€"><a href="#2-è§£å†³æ–¹æ¡ˆæ¶æ„ï¼šå»ºç«‹ä¸€ä¸ªâ€œå—ä¿¡ä»»çš„ä¸­é—´äººâ€" class="headerlink" title="2. è§£å†³æ–¹æ¡ˆæ¶æ„ï¼šå»ºç«‹ä¸€ä¸ªâ€œå—ä¿¡ä»»çš„ä¸­é—´äººâ€"></a>2. è§£å†³æ–¹æ¡ˆæ¶æ„ï¼šå»ºç«‹ä¸€ä¸ªâ€œå—ä¿¡ä»»çš„ä¸­é—´äººâ€</h2><p>æ—¢ç„¶å‰ç«¯æµè§ˆå™¨ä¸èƒ½ç›´æ¥å»æœåŠ¡å™¨ç¡¬ç›˜ä¸Šâ€œæ‹¿â€å›¾ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªâ€œä¸­é—´äººâ€æ¥ä»£åŠ³ã€‚è¿™ä¸ªä¸­é—´äººå¿…é¡»æ˜¯æœåŠ¡å™¨è‡ªå·±ï¼Œå› ä¸ºæœåŠ¡å™¨æœ‰æƒé™è®¿é—®è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>è¿™ä¸ªæ€è·¯å¼•å‡ºäº†ä¸€ç§ç»å…¸çš„æ¶æ„æ¨¡å¼ï¼šä»£ç†æœåŠ¡ï¼ˆ<code>Proxy Service</code>ï¼‰ã€‚</p>
<p>æˆ‘ä»¬çš„æ–¹æ³•è®ºå¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li><p><strong>çº¦å®šä¸€ä¸ªæš—å·</strong>ï¼šå‰ç«¯å’Œåç«¯çº¦å®šä¸€ä¸ªç‰¹æ®Šçš„ <code>URL</code> æ ¼å¼ï¼Œä½œä¸ºè¯·æ±‚å›¾ç‰‡çš„â€œæš—å·â€ã€‚è¿™ä¸ª <code>URL</code> ä¸ä¼šæš´éœ²çœŸå®çš„æ–‡ä»¶è·¯å¾„ï¼Œè€Œæ˜¯æŒ‡å‘æˆ‘ä»¬å³å°†åˆ›å»ºçš„åç«¯æœåŠ¡ã€‚</p>
</li>
<li><p><strong>åˆ›å»ºåç«¯ä»£ç†ç«¯ç‚¹</strong>ï¼šåœ¨ <code>Flask</code> ä¸­åˆ›å»ºä¸€ä¸ª <code>API</code> ç«¯ç‚¹ï¼ˆä¾‹å¦‚ <code>/image</code>ï¼‰ã€‚è¿™ä¸ªç«¯ç‚¹æ˜¯å”¯ä¸€æœ‰æƒè®¿é—®æœåŠ¡å™¨ä¸Šç‰¹å®šå›¾ç‰‡ç›®å½•çš„â€œå®ˆé—¨äººâ€ã€‚</p>
</li>
<li><p><strong>å‰ç«¯å‘èµ·ä»£ç†è¯·æ±‚</strong>ï¼šå½“å‰ç«¯éœ€è¦æ˜¾ç¤ºä¸€å¼ æœ¬åœ°å›¾ç‰‡æ—¶ï¼Œå®ƒä¸ç›´æ¥ä½¿ç”¨æ–‡ä»¶è·¯å¾„ï¼Œè€Œæ˜¯å‘è¿™ä¸ª <code>/image</code> ç«¯ç‚¹å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶å°†çœŸå®çš„æ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p>
</li>
<li><p><strong>åç«¯éªŒè¯å¹¶æœåŠ¡</strong>ï¼šåç«¯ä»£ç†æ”¶åˆ°è¯·æ±‚åï¼Œé¦–å…ˆè¿›è¡Œä¸¥æ ¼çš„å®‰å…¨æ£€æŸ¥ï¼Œç¡®ä¿è¯·æ±‚çš„è·¯å¾„æ˜¯åˆæ³•çš„ã€‚éªŒè¯é€šè¿‡åï¼Œå®ƒæ‰å»ç¡¬ç›˜ä¸Šè¯»å–å›¾ç‰‡æ–‡ä»¶ã€‚</p>
</li>
<li><p><strong>å®‰å…¨çš„æ•°æ®ä¼ è¾“</strong>ï¼šåç«¯ä¸ç›´æ¥å‘é€æ–‡ä»¶ï¼Œè€Œæ˜¯å°†å›¾ç‰‡å†…å®¹ç¼–ç ä¸º <code>Base64</code> å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ç§èƒ½å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºçº¯æ–‡æœ¬çš„ç¼–ç æ–¹å¼ï¼Œéå¸¸é€‚åˆåœ¨ <code>JSON</code> ä¸­ä¼ è¾“ã€‚</p>
</li>
<li><p><strong>å‰ç«¯åŠ¨æ€æ¸²æŸ“</strong>ï¼šå‰ç«¯æ¥æ”¶åˆ°åŒ…å«Base64æ•°æ®çš„JSONåï¼Œç”¨è¿™äº›æ•°æ®åŠ¨æ€åœ°æ„å»ºä¸€ä¸ª <code>Data URL</code> ï¼Œå¹¶å°†å…¶èµ‹ç»™ <code>&lt;img&gt;</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§ï¼Œæœ€ç»ˆå°†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
</li>
</ul>
<p>è¿™ä¸ªæµç¨‹çš„æ ¸å¿ƒåœ¨äºï¼Œå°†ä¸€ä¸ªä¸å®‰å…¨çš„ç›´æ¥æ–‡ä»¶è®¿é—®ï¼Œè½¬å˜ä¸ºä¸€ä¸ªå®‰å…¨çš„ã€å—æ§çš„ <code>API</code> è°ƒç”¨ã€‚</p>
<hr>
<h2 id="3-ä»£ç å®ç°è¯¦è§£"><a href="#3-ä»£ç å®ç°è¯¦è§£" class="headerlink" title="3. ä»£ç å®ç°è¯¦è§£"></a>3. ä»£ç å®ç°è¯¦è§£</h2><h3 id="3-1-åç«¯-app-py-æ„å»ºå®‰å…¨çš„æ–‡ä»¶ä»£ç†ä¸Base64ç¼–ç å™¨"><a href="#3-1-åç«¯-app-py-æ„å»ºå®‰å…¨çš„æ–‡ä»¶ä»£ç†ä¸Base64ç¼–ç å™¨" class="headerlink" title="3.1. åç«¯ (app.py): æ„å»ºå®‰å…¨çš„æ–‡ä»¶ä»£ç†ä¸Base64ç¼–ç å™¨"></a>3.1. åç«¯ (app.py): æ„å»ºå®‰å…¨çš„æ–‡ä»¶ä»£ç†ä¸Base64ç¼–ç å™¨</h3><p>æ ¸å¿ƒæ”¹åŠ¨æ˜¯åœ¨Flaskåº”ç”¨ä¸­å¢åŠ  <code>/image</code> è·¯ç”±ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import os</span><br><span class="line">import base64</span><br><span class="line">from flask import Flask, jsonify, request, abort</span><br><span class="line"></span><br><span class="line"># ... (å…¶ä»–Flaskåº”ç”¨è®¾ç½®) ...</span><br><span class="line"></span><br><span class="line"># 1. å®šä¹‰ä¸€ä¸ªå®‰å…¨çš„æ ¹ç›®å½•ï¼Œæ‰€æœ‰å›¾ç‰‡è¯·æ±‚éƒ½å¿…é¡»åœ¨æ­¤ç›®å½•ä¹‹ä¸‹</span><br><span class="line">#    ä¸ºå®‰å…¨èµ·è§ï¼Œè¯·å°†æ­¤è·¯å¾„è®¾ç½®ä¸ºæ‚¨çš„é¡¹ç›®æ ¹ç›®å½•æˆ–åŒ…å«æ‰€æœ‰å›¾ç‰‡çš„ç‰¹å®šçˆ¶ç›®å½•ã€‚</span><br><span class="line">#    os.getcwd() ä¼šè·å–å½“å‰è„šæœ¬è¿è¡Œçš„ç›®å½•ï¼Œè¿™æ˜¯ä¸€ä¸ªå®‰å…¨çš„é»˜è®¤å€¼ã€‚</span><br><span class="line">IMAGE_BASE_DIR = os.path.abspath(os.getcwd())</span><br><span class="line"></span><br><span class="line">@app.route(&#x27;/image&#x27;)</span><br><span class="line">def serve_image():</span><br><span class="line">    # 2. è·å–å‰ç«¯é€šè¿‡URLå‚æ•°ä¼ æ¥çš„è·¯å¾„</span><br><span class="line">    image_path = request.args.get(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line">    # 3. å®‰å…¨æ ¡éªŒï¼šç¡®ä¿è¯·æ±‚çš„è·¯å¾„æ²¡æœ‰â€œè¶Šç•Œâ€</span><br><span class="line">    safe_path = os.path.abspath(image_path)</span><br><span class="line">    if not safe_path.startswith(IMAGE_BASE_DIR):</span><br><span class="line">        abort(403) # æ‹’ç»éæ³•è¯·æ±‚</span><br><span class="line"></span><br><span class="line">    # 4. è¯»å–æ–‡ä»¶å¹¶ç¼–ç ä¸ºBase64</span><br><span class="line">    try:</span><br><span class="line">        with open(safe_path, &quot;rb&quot;) as image_file:</span><br><span class="line">            encoded_string = base64.b64encode(image_file.read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        </span><br><span class="line">        # 5. æ„é€ åŒ…å«MIMEç±»å‹å’Œç¼–ç æ•°æ®çš„Data URL</span><br><span class="line">        ext = os.path.splitext(safe_path)[1].lower()</span><br><span class="line">        mime_type = &#123;&#x27;.png&#x27;: &#x27;image/png&#x27;, &#x27;.jpg&#x27;: &#x27;image/jpeg&#x27;&#125;.get(ext, &#x27;application/octet-stream&#x27;)</span><br><span class="line">        data_url = f&quot;data:&#123;mime_type&#125;;base64,&#123;encoded_string&#125;&quot;</span><br><span class="line"></span><br><span class="line">        # 6. å°†Data URLæ‰“åŒ…æˆJSONè¿”å›</span><br><span class="line">        return jsonify(&#123;&quot;imageData&quot;: data_url&#125;)</span><br><span class="line">    except FileNotFoundError:</span><br><span class="line">        abort(404)</span><br><span class="line">    except Exception as e:</span><br><span class="line">        abort(500)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å®‰å…¨æ£€æŸ¥: <code>IMAGE_BASE_DIR</code> çš„è®¾ç½®å’Œ <code>startswith()</code> çš„éªŒè¯æ˜¯æ­¤ç«¯ç‚¹çš„å®‰å…¨æ ¸å¿ƒï¼Œå®ƒå°†æ–‡ä»¶è®¿é—®æƒé™ä¸¥æ ¼é™åˆ¶åœ¨é¢„è®¾çš„ç›®å½•èŒƒå›´å†…ã€‚</p>
</li>
<li><p>Base64ç¼–ç : å°†å›¾ç‰‡è½¬æ¢ä¸º <code>Base64</code> æ ¼å¼çš„ <code>Data URL</code>ï¼Œå…è®¸å›¾ç‰‡æ•°æ®ä½œä¸ºæ–‡æœ¬åµŒå…¥åˆ° <code>JSON</code> å“åº”ä¸­ï¼Œå¹¶èƒ½è¢«æµè§ˆå™¨ç›´æ¥æ¸²æŸ“ï¼Œé¿å…äº†å‰ç«¯éœ€è¦ä¸ºè·å–å›¾ç‰‡è€Œå‘èµ·é¢å¤–çš„ <code>HTTP</code> è¯·æ±‚ã€‚</p>
</li>
</ul>
<hr>
<h3 id="3-2-å‰ç«¯-index-html-è‡ªå®šä¹‰Markdownæ¸²æŸ“ä¸å¼‚æ­¥åŠ è½½"><a href="#3-2-å‰ç«¯-index-html-è‡ªå®šä¹‰Markdownæ¸²æŸ“ä¸å¼‚æ­¥åŠ è½½" class="headerlink" title="3.2. å‰ç«¯ (index.html): è‡ªå®šä¹‰Markdownæ¸²æŸ“ä¸å¼‚æ­¥åŠ è½½"></a>3.2. å‰ç«¯ (index.html): è‡ªå®šä¹‰Markdownæ¸²æŸ“ä¸å¼‚æ­¥åŠ è½½</h3><p>å‰ç«¯çš„æ ¸å¿ƒå·¥ä½œåœ¨ <code>appendAiMessage</code> å‡½æ•°ä¸­ï¼Œé€šè¿‡é‡å†™ <code>marked.js</code> çš„å›¾ç‰‡æ¸²æŸ“é€»è¾‘æ¥å®ç°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function appendAiMessage(data, fullLog = &#x27;&#x27;) &#123;</span><br><span class="line">    // ... (å…¶ä»–åˆ›å»ºæ¶ˆæ¯å…ƒç´ çš„ä»£ç ) ...</span><br><span class="line">    const messageDiv = document.createElement(&#x27;div&#x27;);</span><br><span class="line">    </span><br><span class="line">    // --- 1. è‡ªå®šä¹‰Markdownå›¾ç‰‡æ¸²æŸ“è§„åˆ™ ---</span><br><span class="line">    const renderer = new marked.Renderer();</span><br><span class="line">    renderer.image = (href, title, text) =&gt; &#123;</span><br><span class="line">        // å®‰å…¨æ£€æŸ¥ï¼Œç¡®ä¿hrefæ˜¯å­—ç¬¦ä¸²</span><br><span class="line">        if (typeof href !== &#x27;string&#x27;) &#123;</span><br><span class="line">            console.error(&quot;marked.js renderer received a non-string href:&quot;, href);</span><br><span class="line">            return &#x27;&#x27;; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        const decodedHref = decodeURIComponent(href || &#x27;&#x27;);</span><br><span class="line">        </span><br><span class="line">        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥æ˜¯å¦æ˜¯éœ€è¦ä»£ç†çš„æœ¬åœ°ç»å¯¹è·¯å¾„</span><br><span class="line">        if (/^[a-zA-Z]:[\\\/]/.test(decodedHref)) &#123;</span><br><span class="line">            const encodedPath = encodeURIComponent(decodedHref);</span><br><span class="line">            // **æ­¥éª¤ A (ç”Ÿæˆå ä½ç¬¦)**: è¿”å›ä¸€ä¸ª&lt;img&gt;æ ‡ç­¾ï¼Œå…¶srcæŒ‡å‘åç«¯çš„/imageä»£ç†API</span><br><span class="line">            return &#x27;&lt;img src=&quot;/image?path=&#x27; + encodedPath + &#x27;&quot; alt=&quot;&#x27; + (text || &#x27;ç›¸å…³å›¾ç‰‡&#x27;) + &#x27;&quot; style=&quot;opacity: 0.5;&quot;&gt;&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">        // å¯¹äºæ ‡å‡†çš„ç½‘ç»œå›¾ç‰‡ï¼Œç»´æŒåŸæ ·</span><br><span class="line">        return &#x27;&lt;img src=&quot;&#x27; + href + &#x27;&quot; alt=&quot;&#x27; + (text || &#x27;&#x27;) + &#x27;&quot;&gt;&#x27;;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    // ä½¿ç”¨è‡ªå®šä¹‰æ¸²æŸ“å™¨å°†Markdownæ–‡æœ¬è½¬æ¢ä¸ºHTML</span><br><span class="line">    const htmlContent = marked.parse(answer || &quot;æŠ±æ­‰ï¼Œæ²¡æœ‰æ”¶åˆ°å›ç­”ã€‚&quot;, &#123; renderer: renderer &#125;);</span><br><span class="line">    messageDiv.innerHTML = htmlContent;</span><br><span class="line">    // ... (å°†messageDivæ·»åŠ åˆ°èŠå¤©çª—å£) ...</span><br><span class="line"></span><br><span class="line">    // --- 2. å¼‚æ­¥è·å–å¹¶æ›¿æ¢å›¾ç‰‡ ---</span><br><span class="line">    // æŸ¥æ‰¾æ‰€æœ‰éœ€è¦ä»åç«¯åŠ è½½çš„&quot;å ä½&quot;å›¾ç‰‡</span><br><span class="line">    const imagesToLoad = messageDiv.querySelectorAll(&#x27;img[src^=&quot;/image?path=&quot;]&#x27;);</span><br><span class="line">    imagesToLoad.forEach(async (img) =&gt; &#123;</span><br><span class="line">        const placeholderSrc = img.getAttribute(&#x27;src&#x27;);</span><br><span class="line">        if (!placeholderSrc) return;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            // **æ­¥éª¤ B (å‘èµ·ä»£ç†è¯·æ±‚)**: å¼‚æ­¥å‘åç«¯APIè¯·æ±‚çœŸå®çš„å›¾ç‰‡æ•°æ®</span><br><span class="line">            const response = await fetch(placeholderSrc);</span><br><span class="line">            if (!response.ok) throw new Error(&#x27;Failed to fetch image data: &#x27; + response.status);</span><br><span class="line">            const imgData = await response.json(); // è§£æåç«¯è¿”å›çš„JSON</span><br><span class="line">            </span><br><span class="line">            // **æ­¥éª¤ C (æ›¿æ¢src)**: å°†å›¾ç‰‡çš„srcå±æ€§æ›¿æ¢ä¸ºåç«¯è¿”å›çš„Base64 Data URL</span><br><span class="line">            if (imgData.imageData) &#123;</span><br><span class="line">                img.src = imgData.imageData;</span><br><span class="line">                img.style.opacity = 1; // ä½¿å›¾ç‰‡å®Œå…¨å¯è§</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (error) &#123;</span><br><span class="line">            console.error(&#x27;åŠ è½½å›¾ç‰‡å¤±è´¥:&#x27;, error);</span><br><span class="line">            img.alt = &quot;å›¾ç‰‡åŠ è½½å¤±è´¥&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // ... (å…¶ä»–ä»£ç ) ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ¸²æŸ“é€»è¾‘åˆ†ç¦»: <code>HTML</code> çš„åˆå§‹æ¸²æŸ“å’Œå›¾ç‰‡çš„æœ€ç»ˆåŠ è½½æ˜¯åˆ†ç¦»çš„ã€‚<code>marked.js</code> é¦–å…ˆåˆ›å»ºäº†åŒ…å«ä»£ç† <code>URL</code> çš„ <code>HTML</code> ç»“æ„ã€‚</p>
</li>
<li><p>å¼‚æ­¥éé˜»å¡: å›¾ç‰‡çš„åŠ è½½è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢çš„å…¶ä»–æ“ä½œã€‚ç”¨æˆ·å¯ä»¥ç«‹å³çœ‹åˆ°æ–‡æœ¬å†…å®¹ï¼Œè€Œå›¾ç‰‡ä¼šåœ¨åå°åŠ è½½å®Œæˆåæ˜¾ç¤ºã€‚</p>
</li>
</ul>
<hr>
<h3 id="3-2-1-æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£"><a href="#3-2-1-æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£" class="headerlink" title="3.2.1. æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£"></a>3.2.1. æ­£åˆ™è¡¨è¾¾å¼è¯¦è§£</h3><p>åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œç”¨äºåˆ¤æ–­è·¯å¾„æ˜¯å¦ä¸ºæœ¬åœ°ç»å¯¹è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ <code>/^(?:[a-zA-Z]:[\\\/]|\/)/</code> æ˜¯ä¸€ä¸ªå…³é”®éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬æ¥è¯¦ç»†è§£æå®ƒçš„å·¥ä½œåŸç†ï¼š</p>
<ul>
<li><p><code>^</code>: è¿™ä¸ªç¬¦å·ä»£è¡¨â€œå­—ç¬¦ä¸²çš„å¼€å§‹â€ã€‚å®ƒç¡®ä¿æˆ‘ä»¬åªåŒ¹é…è·¯å¾„çš„èµ·å§‹éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è·¯å¾„ä¸­é—´çš„æŸä¸ªä½ç½®ã€‚</p>
</li>
<li><p><code>(?: ... )</code>: è¿™æ˜¯ä¸€ä¸ªéæ•è·ç»„ï¼ˆ<code>non-capturing group</code>ï¼‰ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†æ‹¬å·å†…çš„å¤šä¸ªæ¨¡å¼ç»„åˆæˆä¸€ä¸ªå•å…ƒï¼Œä½†ä¸ä¼šåƒæ™®é€šæ‹¬å·é‚£æ ·â€œæ•è·â€åŒ¹é…åˆ°çš„å†…å®¹ã€‚åœ¨è¿™é‡Œï¼Œå®ƒå°†ä¸¤ç§ä¸»è¦çš„è·¯å¾„æ ¼å¼ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
</li>
<li><p><code>[a-zA-Z]:[\\\/]</code>: è¿™æ˜¯ç”¨æ¥åŒ¹é…Windowsç»å¯¹è·¯å¾„çš„éƒ¨åˆ†ã€‚</p>
</li>
<li><p><code>[a-zA-Z]</code>: åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™æˆ–å°å†™å­—æ¯ï¼ˆå³ç›˜ç¬¦ï¼Œå¦‚ C, Dï¼‰ã€‚</p>
</li>
<li><p><code>:</code>: åŒ¹é…ç´§è·Ÿåœ¨ç›˜ç¬¦åé¢çš„å†’å·ã€‚</p>
</li>
<li><p><code>[\\\/]</code>: åŒ¹é…ä¸€ä¸ªè·¯å¾„åˆ†éš”ç¬¦ã€‚\ æ˜¯å¯¹åæ–œæ  \ çš„è½¬ä¹‰ï¼Œ&#x2F; æ˜¯æ­£æ–œæ ã€‚è¿™ä¸ªéƒ¨åˆ†æ„å‘³ç€æ— è®ºæ˜¯ <code>D:\...</code> è¿˜æ˜¯ <code>D:/...</code>  æ ¼å¼çš„è·¯å¾„éƒ½èƒ½è¢«è¯†åˆ«ã€‚</p>
</li>
<li><p><code>|</code>: è¿™æ˜¯ä¸€ä¸ªâ€œæˆ–â€æ“ä½œç¬¦ã€‚å®ƒè¡¨ç¤ºåŒ¹é…å·¦è¾¹çš„æ¨¡å¼ æˆ–è€… å³è¾¹çš„æ¨¡å¼ã€‚</p>
</li>
<li><p><code>/</code>: è¿™æ˜¯ç”¨æ¥åŒ¹é…Unix&#x2F;Linuxç»å¯¹è·¯å¾„çš„éƒ¨åˆ†ã€‚æ‰€æœ‰Unix-likeç³»ç»Ÿçš„ç»å¯¹è·¯å¾„éƒ½ä»¥ä¸€ä¸ªæ­£æ–œæ  &#x2F; å¼€å§‹ï¼ˆä¾‹å¦‚ <code>/home/user/image.png</code>ï¼‰ã€‚</p>
</li>
</ul>
<hr>
<h2 id="4-å¯¹LLMçš„è¾“å‡ºå¼•å¯¼"><a href="#4-å¯¹LLMçš„è¾“å‡ºå¼•å¯¼" class="headerlink" title="4. å¯¹LLMçš„è¾“å‡ºå¼•å¯¼"></a>4. å¯¹LLMçš„è¾“å‡ºå¼•å¯¼</h2><p>æœ€åä¸€æ­¥æ˜¯ç¡®ä¿LLMèƒ½å¤ŸæŒç»­ç”Ÿæˆç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ã€åŒ…å«æœ¬åœ°è·¯å¾„çš„ <code>Markdown</code> å›¾ç‰‡è¯­æ³•ã€‚è¿™é€šè¿‡åœ¨ç³»ç»Ÿæç¤ºï¼ˆSystem Promptï¼‰ä¸­æä¾›æ¸…æ™°çš„æŒ‡ä»¤å’Œç¤ºä¾‹æ¥å®Œæˆã€‚</p>
<p>æŒ‡ä»¤ç¤ºä¾‹:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å›¾ç‰‡å¤„ç†: å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯æ–‡ä»¶è·¯å¾„ï¼ˆä¾‹å¦‚ä»¥ .png, .jpg ç­‰ç»“å°¾ï¼‰ï¼Œä½ åº”è¯¥è¯´â€œå®ƒçš„å°è£…å›¾å¦‚ä¸‹æ‰€ç¤ºï¼šâ€æˆ–ç±»ä¼¼çš„è¯ï¼Œç„¶åå¦èµ·ä¸€è¡Œï¼Œä½¿ç”¨æ ‡å‡†çš„Markdownè¯­æ³• ![å°è£…å›¾](å›¾ç‰‡è·¯å¾„) æ¥æ ¼å¼åŒ–å¹¶å±•ç¤ºå›¾ç‰‡ã€‚</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸåœ¨å‰ç«¯æ¸²æŸ“ <code>markdown</code> å›¾ç‰‡æ•ˆæœå±•ç¤ºï¼š<br><img src="https://github.com/user-attachments/assets/6241fccf-1ec6-4c52-af78-6b115500ad48" alt="image"></p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://www.jianshu.com/p/5cc1fff0280c">Not allowed to load local resource: æŠ¥é”™è§£å†³æ–¹æ³•</a></p>
]]></content>
      <categories>
        <category>LLMå­¦ä¹ ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>AI</tag>
        <tag>Markdown</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Python</tag>
        <tag>RAG</tag>
        <tag>flask</tag>
      </tags>
  </entry>
  <entry>
    <title>Sync Code Block Theme with Dark Mode in Hexo Chic</title>
    <url>/2025/03/25/Sync-Code-Block-Theme-with-Dark-Mode-in-Hexo-Chic/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ"><a href="#Hexo-Chic-ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ" class="headerlink" title="Hexo + Chic ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ"></a>Hexo + Chic ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ</h1><p>è¿™ä»½æ–‡æ¡£è®°å½•å¦‚ä½•åœ¨ Hexo åšå®¢ï¼ˆä½¿ç”¨ Chic ä¸»é¢˜ï¼‰ï¼Œå®Œæˆä»£ç å— (highlight.js) æ ·å¼éšæ˜&#x2F;æš—ä¸»é¢˜åˆ‡æ¢ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h2><ul>
<li><strong>ä»£ç å—</strong> æ˜¯ä½ å†™æ–‡ç« æ—¶ç”¨ &#96;&#96;&#96; åŒ…èµ·æ¥çš„é‚£äº› Python&#x2F;JavaScript ä»£ç éƒ¨åˆ†ã€‚</li>
<li><strong>highlight.js</strong> æ˜¯ç”¨æ¥ç»™ä»£ç å—åŠ é¢œè‰²çš„å·¥å…·ï¼Œå®ƒæœ‰â€œäº®è‰²â€å’Œâ€œæš—è‰²â€ä¸¤å¥—æ ·å¼ã€‚</li>
</ul>
<p>å¸Œæœ›è§£å†³çš„é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p>å½“æˆ‘åˆ‡æ¢ç½‘ç«™åˆ°æš—è‰²æ¨¡å¼æ—¶ï¼Œä»£ç å—è¿˜æ˜¯ç™½åº•ï¼Œçœ‹èµ·æ¥å¾ˆçªå…€ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼šè®©ä»£ç å—ä¹Ÿèƒ½â€œè·Ÿç€å˜é»‘â€ã€‚</p>
<hr>
<h2 id="1-ç¡®è®¤-Hexo-æ­£åœ¨ä½¿ç”¨-highlight-js"><a href="#1-ç¡®è®¤-Hexo-æ­£åœ¨ä½¿ç”¨-highlight-js" class="headerlink" title="1. ç¡®è®¤ Hexo æ­£åœ¨ä½¿ç”¨ highlight.js"></a><strong>1. ç¡®è®¤ Hexo æ­£åœ¨ä½¿ç”¨ highlight.js</strong></h2><p>æ‰“å¼€ä½ åšå®¢æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢çš„å†…å®¹å¹¶ç¡®ä¿è®¾ç½®ä¸€è‡´ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">syntax_highlighter:</span> <span class="string">highlight.js</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µé…ç½®çš„æ„æ€æ˜¯å‘Šè¯‰ Hexoï¼šæˆ‘è¦ç”¨ highlight.js æ¥åšä»£ç é«˜äº®ã€‚</p>
<hr>
<h2 id="2-ä¿®æ”¹-head-ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼"><a href="#2-ä¿®æ”¹-head-ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼" class="headerlink" title="2.ä¿®æ”¹ head.ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼"></a><strong>2.ä¿®æ”¹ head.ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/head.ejs</span><br></pre></td></tr></table></figure>

<p>åœ¨é‡Œé¢æ·»åŠ è¿™å‡ è¡Œï¼ˆæ’å…¥åˆ°å·²æœ‰çš„ <code>&lt;link&gt;</code> æ ‡ç­¾ä¹‹åå³å¯ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- highlight.js æ ·å¼ï¼ˆé»˜è®¤äº®è‰²ï¼‰ --&gt;</span><br><span class="line">&lt;link id=&quot;hljs-theme&quot; rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.css&quot;&gt;</span><br><span class="line">&lt;!-- highlight.js è‡ªåŠ¨ä¸Šè‰²åŠŸèƒ½ --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;hljs.highlightAll();&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬ä¸€è¡Œæ˜¯é»˜è®¤ä»£ç æ ·å¼ï¼ˆäº®è‰²ï¼‰ã€‚</li>
<li>ç¬¬äºŒä¸‰è¡Œæ˜¯è®©ä»£ç è‡ªåŠ¨åŠ é¢œè‰²ã€‚</li>
</ul>
<hr>
<h2 id="3-ä¿®æ”¹-script-jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥"><a href="#3-ä¿®æ”¹-script-jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥" class="headerlink" title="3. ä¿®æ”¹ script.jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥"></a><strong>3. ä¿®æ”¹ script.jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/source/js/script.js</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æˆ‘ä»¬æ·»åŠ ä¸»é¢˜åˆ‡æ¢çš„åœ°æ–¹ï¼Œæ·»åŠ ä»¥ä¸‹ JavaScript ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hljsTheme = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hljs-theme&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateCodeHighlightStyle</span>(<span class="params">isDarkMode</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!hljsTheme) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> newHref = isDarkMode</span><br><span class="line">        ? <span class="string">&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github-dark.css&quot;</span></span><br><span class="line">        : <span class="string">&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.css&quot;</span>;</span><br><span class="line">    hljsTheme.<span class="title function_">setAttribute</span>(<span class="string">&#x27;href&#x27;</span>, newHref);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥åœ¨ä¸»é¢˜åˆ‡æ¢æŒ‰é’®äº‹ä»¶é‡Œè°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">updateCodeHighlightStyle</span>(<span class="literal">true</span>); <span class="comment">// æˆ– falseï¼Œæ ¹æ®ä½ å½“å‰æ¨¡å¼</span></span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡åˆ‡æ¢ä¸»é¢˜æ—¶éƒ½è°ƒç”¨å®ƒï¼Œå°±èƒ½åˆ‡æ¢ä»£ç æ ·å¼ã€‚</p>
<hr>
<h2 id="4-åˆ›å»ºä¸€ä¸ª-CSS-æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜"><a href="#4-åˆ›å»ºä¸€ä¸ª-CSS-æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜" class="headerlink" title="4. åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜"></a><strong>4. åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜</strong></h2><p>è¿™ä¸ªæ­¥éª¤å¾ˆå…³é”®ï¼Œå¦åˆ™åœ¨æš—è‰²æ ·å¼æ—¶ä»£ç å—å‘¨å›´å¯èƒ½ä¼šç•™ä¸‹ä¸€åœˆç™½è‰²è¾¹æ¡†ï¼Œå¦‚ä¸‹æ–¹å›¾ç‰‡æ‰€ç¤ºï¼š<br><img src="https://github.com/user-attachments/assets/6baef8c8-887d-448f-a5c9-5f0501ab4ee2" alt="image"></p>
<h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶</h3><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd themes/hexo-theme-Chic/source/css</span><br><span class="line">mkdir custom</span><br><span class="line">cd custom</span><br><span class="line">nano custom.css</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æ‰‹åŠ¨ï¼šåœ¨ <code>themes/hexo-theme-Chic/source/css/</code> ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ <code>custom</code>ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºæ–‡ä»¶ <code>custom.css</code></p>
<h3 id="ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š"><a href="#ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š"></a>ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">pre,</span><br><span class="line"><span class="selector-tag">code</span>,</span><br><span class="line">pre <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: inherit <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: inherit <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> pre,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0d1117</span> <span class="meta">!important</span>;  <span class="comment">/* æš—è‰²èƒŒæ™¯ */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#c9d1d9</span> <span class="meta">!important</span>;       <span class="comment">/* æš—è‰²æ–‡å­— */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> pre::-webkit-scrollbar-track,</span><br><span class="line">body.dark-theme code::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0d1117</span> <span class="meta">!important</span>;  <span class="comment">/* ä¿®å¤æ»šåŠ¨æ¡ç™½è¾¹ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-åœ¨-head-ejs-ä¸­å¼•å…¥è‡ªå®šä¹‰-CSS-æ–‡ä»¶"><a href="#5-åœ¨-head-ejs-ä¸­å¼•å…¥è‡ªå®šä¹‰-CSS-æ–‡ä»¶" class="headerlink" title="5. åœ¨ head.ejs ä¸­å¼•å…¥è‡ªå®šä¹‰ CSS æ–‡ä»¶"></a><strong>5. åœ¨ head.ejs ä¸­å¼•å…¥è‡ªå®šä¹‰ CSS æ–‡ä»¶</strong></h2><p>åœ¨ <code>head.ejs</code> ä¸­å†åŠ ä¸€è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%- url_for(&#x27;/css/custom/custom.css&#x27;) %&gt;&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>æ”¾åœ¨å…¶ä»– <code>&lt;link&gt;</code> æ ‡ç­¾çš„ä¸‹é¢ã€‚</p>
<hr>
<h2 id="6-é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo"><a href="#6-é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo" class="headerlink" title="6. é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo"></a><strong>6. é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo</strong></h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—®ä½ çš„æœ¬åœ°åšå®¢æ–‡ç« é¡µé¢ <code>http://localhost:4000</code>ï¼Œå°è¯•åˆ‡æ¢ä¸»é¢˜ï¼Œçœ‹ä»£ç å—æ˜¯å¦ä¹Ÿä¼šéšä¹‹å˜è‰²ã€‚</p>
<p>åœ¨ä¸¤ç§ä¸åŒä¸»é¢˜ä¸‹çš„æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://github.com/user-attachments/assets/db87a928-293d-4c00-8299-6619722c92f8" alt="image"></p>
<p><img src="https://github.com/user-attachments/assets/550ba759-3113-41b6-9737-887242fcfa14" alt="image"></p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo AI Assistant</title>
    <url>/2025/03/29/Hexo-AI-Assistant/</url>
    <content><![CDATA[<h1 id="Hexo-åšå®¢ä¸“å±AIåŠ©æ‰‹"><a href="#Hexo-åšå®¢ä¸“å±AIåŠ©æ‰‹" class="headerlink" title="Hexo åšå®¢ä¸“å±AIåŠ©æ‰‹"></a>Hexo åšå®¢ä¸“å±AIåŠ©æ‰‹</h1><p>æœ¬é¡¹ç›®é€šè¿‡å‘é‡æ£€ç´¢ + å¤§è¯­è¨€æ¨¡å‹ï¼ˆRAGï¼‰ç»“åˆæœ¬åœ° Hexo åšå®¢å†…å®¹ï¼Œå®ç°åŸºäºè¯­ä¹‰çš„æ™ºèƒ½é—®ç­”æ¥å£ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/hexo-ai-assistant.git">https://github.com/EvannZhongg/hexo-ai-assistant.git</a></p>
<hr>
<h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ğŸ“ D:/YourProjects/</span><br><span class="line">â”œâ”€â”€ ğŸ“ Blog/                       # Hexo åšå®¢é¡¹ç›®ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ source/_posts/             # Markdown åšæ–‡æ–‡ä»¶ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ themes/hexo-theme-xxx/     # è‡ªå®šä¹‰ä¸»é¢˜ç›®å½•</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ layout/_partial/</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ footer.ejs         # å‘é‡æ„å»ºè‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆHexo æ„å»ºé’©å­ï¼‰</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ chatbot.ejs        # aiåŠ©æ‰‹UI</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ ...</span><br><span class="line">â”‚   â”‚   â””â”€â”€ ...  </span><br><span class="line">â”‚   â”œâ”€â”€ scripts/auto_vector.js     # å‘é‡æ„å»ºè‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆHexo æ„å»ºé’©å­ï¼‰</span><br><span class="line">â”‚   â””â”€â”€ ...                        # å…¶ä»– Hexo æ–‡ä»¶</span><br><span class="line">â”‚   </span><br><span class="line">â”œâ”€â”€ ğŸ“ hexo-ai-assistant/          # AIåŠ©æ‰‹åç«¯é¡¹ç›®ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ build_vector_store.py      # å‘é‡åº“å’Œæ ‡é¢˜æ˜ å°„æ„å»ºè„šæœ¬</span><br><span class="line">â”‚   â”œâ”€â”€ main.py                    # Flask ä¸»æœåŠ¡å…¥å£ï¼ˆ/ask é—®ç­”æ¥å£ï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ embedder.py                # åµŒå…¥å‘é‡ç”Ÿæˆå™¨ï¼ˆè°ƒç”¨ç¬¬ä¸‰æ–¹ APIï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ chat.py                    # é€šç”¨ LLM èŠå¤©æ¨¡å—ï¼ˆOpenAI / DeepSeekï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ vector_store.json          # æœ¬åœ°è¯­ä¹‰å‘é‡æ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ title_mapping.json         # åšå®¢æ ‡é¢˜ä¸é“¾æ¥æ˜ å°„è¡¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ config.yml                 # æ‰€æœ‰è·¯å¾„ã€æ¨¡å‹ã€API Key é…ç½®é›†ä¸­ç®¡ç†</span><br><span class="line">â”‚   â””â”€â”€ .venv/                     # è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ‰§è¡ŒåŸç†ï¼ˆé¡¹ç›®è¿è¡Œæµç¨‹ï¼‰"><a href="#æ‰§è¡ŒåŸç†ï¼ˆé¡¹ç›®è¿è¡Œæµç¨‹ï¼‰" class="headerlink" title="æ‰§è¡ŒåŸç†ï¼ˆé¡¹ç›®è¿è¡Œæµç¨‹ï¼‰"></a>æ‰§è¡ŒåŸç†ï¼ˆé¡¹ç›®è¿è¡Œæµç¨‹ï¼‰</h2><ol>
<li><p><strong>è¯­ä¹‰çŸ¥è¯†æ„å»ºé˜¶æ®µ</strong>ï¼ˆç”± <code>build_vector_store.py</code> æ‰§è¡Œï¼‰ï¼š</p>
<ul>
<li>æ‰«æåšå®¢çš„ Markdown æºæ–‡ä»¶ï¼Œæå–æ–‡ç« æ­£æ–‡å†…å®¹ã€‚</li>
<li>ä½¿ç”¨åµŒå…¥æ¨¡å‹ï¼ˆå¦‚ BGEï¼‰ç”Ÿæˆè¯­ä¹‰å‘é‡ã€‚</li>
<li>æ„å»º <code>vector_store.json</code> å’Œ <code>title_mapping.json</code>ï¼Œä¾›é—®ç­”ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li><p><strong>ç”¨æˆ·é—®ç­”å¤„ç†é˜¶æ®µ</strong>ï¼ˆç”± <code>main.py</code> æä¾› APIï¼‰ï¼š</p>
<ul>
<li>ç”¨æˆ·é€šè¿‡å‰ç«¯å‘é€æé—®ã€‚</li>
<li>åç«¯æé—®å‘é‡åŒ–ï¼Œä¸æœ¬åœ°å‘é‡åº“åŒ¹é…æœ€ç›¸å…³æ–‡ç« ã€‚</li>
<li>æ‹¼æ¥é—®ç­”ä¸Šä¸‹æ–‡ï¼ˆåŒ…å«è¯­ä¹‰å†…å®¹å’Œæ ‡é¢˜ç´¢å¼•ï¼‰å‘ç»™å¤§è¯­è¨€æ¨¡å‹ã€‚</li>
<li>æ¨¡å‹ç”Ÿæˆå¸¦å‚è€ƒé“¾æ¥çš„å›ç­”ï¼Œæµå¼è¿”å›è‡³å‰ç«¯ã€‚</li>
</ul>
</li>
<li><p><strong>å‰ç«¯é—®ç­”å±•ç¤ºé˜¶æ®µ</strong>ï¼ˆç”± <code>chat.html</code> &#x2F; <code>chatbot.ejs</code> è´Ÿè´£ï¼‰ï¼š</p>
<ul>
<li>ç”¨æˆ·ç•Œé¢åŠ è½½èŠå¤©æ¡†ï¼Œæ”¯æŒ Markdown æ ¼å¼æ¸²æŸ“å’Œå¤šè½®å¯¹è¯ã€‚</li>
<li>è¯·æ±‚è¢«ä»£ç†è½¬å‘è‡³æœ¬åœ°åç«¯æˆ–å…¬ç½‘ä¸­è½¬åœ°å€ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="1-å®‰è£…ä¾èµ–"><a href="#1-å®‰è£…ä¾èµ–" class="headerlink" title="1. å®‰è£…ä¾èµ–"></a>1. å®‰è£…ä¾èµ–</h2><p>å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -m venv .venv</span><br><span class="line">.venv\Scripts\activate</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-é…ç½®é¡¹ä¿®æ”¹ï¼ˆhexo-ai-assistant-config-ymlï¼‰"><a href="#2-é…ç½®é¡¹ä¿®æ”¹ï¼ˆhexo-ai-assistant-config-ymlï¼‰" class="headerlink" title="2. é…ç½®é¡¹ä¿®æ”¹ï¼ˆhexo-ai-assistant/config.ymlï¼‰"></a>2. é…ç½®é¡¹ä¿®æ”¹ï¼ˆ<code>hexo-ai-assistant/config.yml</code>ï¼‰</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">paths:</span></span><br><span class="line">  <span class="attr">blog_post_dir:</span> <span class="string">/your/path/to/hexo/source/_posts</span>     <span class="comment"># ä¿®æ”¹ä¸ºä½ çš„åšå®¢ Markdown è·¯å¾„</span></span><br><span class="line">  <span class="attr">vector_store:</span> <span class="string">vector_store.json</span>                     <span class="comment"># å‘é‡åº“ä¿å­˜è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„</span></span><br><span class="line">  <span class="attr">title_mapping:</span> <span class="string">title_mapping.json</span>                   <span class="comment"># åšå®¢æ ‡é¢˜æ˜ å°„è¡¨è·¯å¾„ï¼Œå»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="attr">blog:</span></span><br><span class="line">  <span class="attr">base_url:</span> <span class="string">https://your-github-pages-url.github.io</span>   <span class="comment"># ä¿®æ”¹ä¸ºä½ çš„åšå®¢åœ°å€ï¼ˆä¸å«æœ«å°¾ /ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="attr">embedding:</span></span><br><span class="line">  <span class="attr">api_url:</span> <span class="string">https://api.siliconflow.cn/v1/embeddings</span>    <span class="comment"># åµŒå…¥æ¨¡å‹ API åœ°å€</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">BAAI/bge-large-zh-v1.5</span>                         <span class="comment"># ä½¿ç”¨çš„ä¸­æ–‡åµŒå…¥æ¨¡å‹</span></span><br><span class="line">  <span class="attr">api_key:</span> <span class="string">&lt;YOUR_EMBEDDING_API_KEY&gt;</span>                    <span class="comment"># æ›¿æ¢ä¸ºä½ çš„åµŒå…¥æ¨¡å‹ API Key</span></span><br><span class="line">  <span class="attr">max_characters:</span> <span class="number">5000</span>                                 <span class="comment"># æ¯ç¯‡æ–‡ç« æœ€å¤§æˆªå–å­—ç¬¦æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="attr">chat:</span></span><br><span class="line">  <span class="attr">api_url:</span> <span class="string">https://api.deepseek.com/v1</span>                 <span class="comment"># Chat æ¨¡å‹ API åœ°å€ï¼ˆå¯æ›¿æ¢ä¸º OpenAIï¼‰</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">deepseek-chat</span>                                 <span class="comment"># ä½¿ç”¨çš„æ¨¡å‹åç§°</span></span><br><span class="line">  <span class="attr">api_key:</span> <span class="string">&lt;YOUR_CHAT_API_KEY&gt;</span>                         <span class="comment"># æ›¿æ¢ä¸ºä½ çš„ LLM æ¥å£ Key</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">5000</span>                                           <span class="comment"># åç«¯æœåŠ¡è¿è¡Œç«¯å£ï¼ˆé»˜è®¤5000ï¼‰</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-æ„å»ºå‘é‡åº“-æ ‡é¢˜æ˜ å°„è¡¨"><a href="#3-æ„å»ºå‘é‡åº“-æ ‡é¢˜æ˜ å°„è¡¨" class="headerlink" title="3. æ„å»ºå‘é‡åº“ &amp; æ ‡é¢˜æ˜ å°„è¡¨"></a>3. æ„å»ºå‘é‡åº“ &amp; æ ‡é¢˜æ˜ å°„è¡¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python build_vector_store.py</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆæ–‡ä»¶ï¼š</p>
<ul>
<li><code>vector_store.json</code>: å«æ¯ç¯‡æ–‡ç« çš„æ–‡æœ¬å’Œè¯­ä¹‰å‘é‡</li>
<li><code>title_mapping.json</code>: å«æ¯ç¯‡æ–‡ç« çš„æ ‡é¢˜ + ä¸»æ ‡é¢˜ + é“¾æ¥</li>
</ul>
<p>åšå®¢æ ¼å¼éœ€éµå¾ªä»¥ä¸‹ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Article Title</span><br><span class="line">date: YYYY-MM-DD HH:mm:ss</span><br><span class="line">tags: [...]  # No impact</span><br><span class="line">categories: ...  # No impact</span><br><span class="line">---</span><br><span class="line"># Main Title  # Must be a first level title</span><br><span class="line"></span><br><span class="line">æ­£æ–‡å†…å®¹...</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-å¯åŠ¨åç«¯é—®ç­”æœåŠ¡"><a href="#4-å¯åŠ¨åç«¯é—®ç­”æœåŠ¡" class="headerlink" title="4. å¯åŠ¨åç«¯é—®ç­”æœåŠ¡"></a>4. å¯åŠ¨åç«¯é—®ç­”æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python main.py</span><br></pre></td></tr></table></figure>

<p>æœ¬åœ°æœåŠ¡å¯åŠ¨åé»˜è®¤ç›‘å¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://127.0.0.1:5000/ask</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <code>chat.html</code> è¿›è¡Œæµ‹è¯•ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯ä»¥æ­£ç¡®è¾“å‡ºå›ç­”ã€‚</p>
<hr>
<h2 id="5-é…ç½®-Hexo-è„šæœ¬"><a href="#5-é…ç½®-Hexo-è„šæœ¬" class="headerlink" title="5. é…ç½® Hexo è„šæœ¬"></a>5. é…ç½® <code>Hexo</code> è„šæœ¬</h2><p>å¦‚æœä¸Šè¿°æ“ä½œéƒ½æ­£ç¡®æ‰§è¡Œåï¼Œå°†å‘é‡æ„å»ºè„šæœ¬æ¥å…¥ <code>Hexo</code> æ„å»ºæµç¨‹</p>
<h3 id="1-åˆ›å»ºè„šæœ¬æ–‡ä»¶-scripts-auto-vector-jsï¼š"><a href="#1-åˆ›å»ºè„šæœ¬æ–‡ä»¶-scripts-auto-vector-jsï¼š" class="headerlink" title="1.åˆ›å»ºè„šæœ¬æ–‡ä»¶ scripts/auto_vector.jsï¼š"></a>1.åˆ›å»ºè„šæœ¬æ–‡ä»¶ <code>scripts/auto_vector.js</code>ï¼š</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; exec &#125; = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&quot;before_generate&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ„å»ºåšå®¢å‘é‡ä¸­...&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">exec</span>(<span class="string">&quot;/your_project/.venv/Scripts/python build_vector_store.py&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">cwd</span>: <span class="string">&quot;D:/your_project&quot;</span></span><br><span class="line">    &#125;, <span class="function">(<span class="params">err, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;æ„å»ºå¤±è´¥:&quot;</span>, stderr);</span><br><span class="line">        <span class="title function_">reject</span>(err);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ„å»ºæˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªè„šæœ¬çš„ä½œç”¨æ˜¯åœ¨è¿è¡Œ <code>hexo g</code> æ—¶ï¼Œè‡ªåŠ¨é‡æ„å‘é‡åº“ä¿è¯æ‰€æœ‰åšå®¢å‡è¢«é¡¹é“¾åŒ–ã€‚</p>
<h3 id="2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-ejs-æ–‡ä»¶"><a href="#2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-ejs-æ–‡ä»¶" class="headerlink" title="2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ ejs æ–‡ä»¶"></a>2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ ejs æ–‡ä»¶</h3><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/footer.ejs</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>&lt;/footer&gt;</code> æ ‡ç­¾ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%- partial(&#x27;chatbot&#x27;) %&gt;</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºæ–‡ä»¶ <code>chatbot.ejs</code> åœ¨è·¯å¾„ <code>themes\hexo-theme-Chic\layout\_partial\chatbot.ejs</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å°†chatbot.ejsçš„ä»£ç æ‹·è´è‡³æ­¤å¤„</span><br><span class="line">å®Œæ•´ä»£ç æ–‡ä»¶å¯è§æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://github.com/user-attachments/assets/40f5a3c5-74a6-453b-b83b-6152c5b40990" alt="image"></p>
<hr>
<h2 id="6-ä½¿ç”¨-Ngrok-æš´éœ²åç«¯æ¥å£ï¼ˆå¯é€‰ï¼‰"><a href="#6-ä½¿ç”¨-Ngrok-æš´éœ²åç«¯æ¥å£ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="6. ä½¿ç”¨ Ngrok æš´éœ²åç«¯æ¥å£ï¼ˆå¯é€‰ï¼‰"></a>6. ä½¿ç”¨ Ngrok æš´éœ²åç«¯æ¥å£ï¼ˆå¯é€‰ï¼‰</h2><p>åœ¨æœ¬åœ°æµ‹è¯•éƒ½æ²¡é—®é¢˜åï¼Œå¯ä»¥ä½¿ç”¨ Ngrok æš´éœ²æœ¬åœ°æœåŠ¡è‡³å…¬ç½‘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ngrok http 5000</span><br></pre></td></tr></table></figure>

<p>å°† <code>https://xxx.ngrok-free.app/ask</code> åœ°å€å¡«å…¥å‰ç«¯è¯·æ±‚ <code>chatbot.ejs</code> ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://xxx.ngrok-free.app/ask&quot;</span>, &#123;...&#125;);</span><br></pre></td></tr></table></figure>

<p>åªä½¿ç”¨ Ngrok æœ‰ç½‘è·¯å®‰å…¨é—®é¢˜ï¼Œä½ å¯ä»¥è‡ªè¡Œè®¾ç½®ä»£ç†ä¿è¯ä½ çš„ç«¯å£ä¸è¢«æš´éœ²åœ¨å…¬ç½‘ä¸­ã€‚</p>
<hr>
<h2 id="å®Œæ•´æµç¨‹æ€»ç»“"><a href="#å®Œæ•´æµç¨‹æ€»ç»“" class="headerlink" title="å®Œæ•´æµç¨‹æ€»ç»“"></a>å®Œæ•´æµç¨‹æ€»ç»“</h2><ol>
<li>å†™å¥½åšå®¢ï¼ˆMarkdown æ–‡ä»¶ï¼‰ï¼Œä¿è¯æ ¼å¼ç¬¦åˆè¦æ±‚</li>
<li><code>build_vector_store.py</code> æå–æ–‡æœ¬å¹¶ç”Ÿæˆå‘é‡</li>
<li><code>main.py</code> å¯åŠ¨é—®ç­”æœåŠ¡å¹¶æ”¯æŒè¯­ä¹‰æ£€ç´¢</li>
<li>å‰ç«¯è¯·æ±‚é€šè¿‡ Ngrok è®¿é—®æœåŠ¡</li>
<li>æ¨¡å‹ç»“åˆè¯­ä¹‰å†…å®¹å’Œæ ‡é¢˜è¡¨ç”Ÿæˆå‚è€ƒæ˜ç¡®çš„å›ç­”</li>
</ol>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
        <tag>AI</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Agent</tag>
        <tag>RAG</tag>
        <tag>flask</tag>
        <tag>åç«¯</tag>
        <tag>Ngrok</tag>
      </tags>
  </entry>
  <entry>
    <title>Uploading Local Images to Vision LLM</title>
    <url>/2025/04/18/Uploading-Local-Images-to-Vision-LLM/</url>
    <content><![CDATA[<h1 id="å¦‚ä½•ä½¿ç”¨è§†è§‰å¤§æ¨¡å‹ä¸Šä¼ æœ¬åœ°å›¾åƒå¹¶ç”Ÿæˆå›ç­”"><a href="#å¦‚ä½•ä½¿ç”¨è§†è§‰å¤§æ¨¡å‹ä¸Šä¼ æœ¬åœ°å›¾åƒå¹¶ç”Ÿæˆå›ç­”" class="headerlink" title="å¦‚ä½•ä½¿ç”¨è§†è§‰å¤§æ¨¡å‹ä¸Šä¼ æœ¬åœ°å›¾åƒå¹¶ç”Ÿæˆå›ç­”"></a>å¦‚ä½•ä½¿ç”¨è§†è§‰å¤§æ¨¡å‹ä¸Šä¼ æœ¬åœ°å›¾åƒå¹¶ç”Ÿæˆå›ç­”</h1><p>åœ¨æœ¬ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†è®²è§£å¦‚ä½•å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³è§†è§‰å¤§æ¨¡å‹ï¼Œå¹¶è®©æ¨¡å‹ç”Ÿæˆå›¾åƒçš„æè¿°ï¼Œæœ¬æ–‡ä»¥ Qwen çš„æ¨¡å‹ä¸¾ä¾‹ã€‚</p>
<h2 id="1-ä»€ä¹ˆæ˜¯è§†è§‰æ¨¡å‹ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯è§†è§‰æ¨¡å‹ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯è§†è§‰æ¨¡å‹ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯è§†è§‰æ¨¡å‹ï¼Ÿ</h2><p>è§†è§‰æ¨¡å‹æ˜¯ä¸€ä¸ªåŸºäºå¤§è§„æ¨¡è§†è§‰-è¯­è¨€æ¨¡å‹çš„å·¥å…·ï¼Œèƒ½å¤Ÿå°†å›¾ç‰‡ä¸è‡ªç„¶è¯­è¨€ç»“åˆã€‚é€šè¿‡è°ƒç”¨è¯¥æ¨¡å‹ï¼Œä½ å¯ä»¥å°†å›¾åƒå‘é€ç»™å®ƒï¼Œå¹¶è®©å®ƒç”Ÿæˆå¯¹å›¾åƒå†…å®¹çš„è¯¦ç»†æè¿°ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æè¿°å›¾åƒä¸­çš„ç‰©ä½“ã€åœºæ™¯ç”šè‡³æƒ…æ„Ÿã€‚</p>
<hr>
<h2 id="2-Qwenå®˜æ–¹çš„-API-è°ƒç”¨æ–¹æ³•"><a href="#2-Qwenå®˜æ–¹çš„-API-è°ƒç”¨æ–¹æ³•" class="headerlink" title="2. Qwenå®˜æ–¹çš„ API è°ƒç”¨æ–¹æ³•"></a>2. Qwenå®˜æ–¹çš„ API è°ƒç”¨æ–¹æ³•</h2><p>Qwen å®˜æ–¹æä¾›çš„è§†è§‰å¤§æ¨¡å‹è°ƒç”¨æ–¹å¼æ˜¯é€šè¿‡ç›´æ¥æä¾›å›¾åƒçš„ URL æ¥è¿›è¡Œå›¾åƒåˆ†æã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import os</span><br><span class="line">from openai import OpenAI</span><br><span class="line"></span><br><span class="line">client = OpenAI(</span><br><span class="line">    # è‹¥æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡ï¼Œè¯·ç”¨ç™¾ç‚¼API Keyå°†ä¸‹è¡Œæ›¿æ¢ä¸ºï¼šapi_key=&quot;sk-xxx&quot;,</span><br><span class="line">    api_key=os.getenv(&quot;DASHSCOPE_API_KEY&quot;),</span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">completion = client.chat.completions.create(</span><br><span class="line">    model=&quot;qwen-vl-plus&quot;,  # æ­¤å¤„ä»¥qwen-vl-plusä¸ºä¾‹ï¼Œå¯æŒ‰éœ€æ›´æ¢æ¨¡å‹åç§°ã€‚</span><br><span class="line">    messages=[&#123;</span><br><span class="line">        &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">        &quot;content&quot;: [</span><br><span class="line">            &#123;&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;è¿™æ˜¯ä»€ä¹ˆ&quot;&#125;,</span><br><span class="line">            &#123;&quot;type&quot;: &quot;image_url&quot;, </span><br><span class="line">             &quot;image_url&quot;: &#123;&quot;url&quot;: &quot;https://dashscope.oss-cn-beijing.aliyuncs.com/images/dog_and_girl.jpeg&quot;&#125;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">print(completion.model_dump_json())</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•éœ€è¦å°†å›¾åƒçš„ URLï¼ˆæŒ‡å‘å›¾ç‰‡å­˜å‚¨çš„ç½‘ç»œåœ°å€ï¼‰ä½œä¸ºæ¶ˆæ¯å‘é€ç»™æ¨¡å‹ã€‚</p>
<p>ä½†å¯¹äºæœ¬åœ°å›¾ç‰‡è¦ä¸Šä¼ è‡³å¤§æ¨¡å‹å¤„ç†ï¼Œå…ˆè½¬ä¸º URL æ˜¾ç„¶æœ‰äº›ç¹çã€‚</p>
<hr>
<h2 id="3-å¦‚ä½•å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³å¤§æ¨¡å‹"><a href="#3-å¦‚ä½•å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³å¤§æ¨¡å‹" class="headerlink" title="3. å¦‚ä½•å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³å¤§æ¨¡å‹"></a>3. å¦‚ä½•å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³å¤§æ¨¡å‹</h2><p>è¿™é‡Œæˆ‘å°†ä»‹ç»ä¸€ä¸ªæœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³ Qwen è§†è§‰æ¨¡å‹ï¼Œå¹¶è®©æ¨¡å‹æ ¹æ®promptç”Ÿæˆå›¾åƒçš„æè¿°çš„æ–¹æ³•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç æ¨¡æ¿ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import base64</span><br><span class="line">from io import BytesIO</span><br><span class="line">from openai import OpenAI</span><br><span class="line"></span><br><span class="line"># åˆå§‹åŒ– API å®¢æˆ·ç«¯</span><br><span class="line">client = OpenAI(</span><br><span class="line">    api_key=&quot;ä½ çš„ç™¾ç‚¼Key&quot;,</span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># === å‡†å¤‡å›¾åƒï¼ˆPILï¼‰å¹¶è½¬ä¸º base64 ===</span><br><span class="line">def pil_image_to_base64(pil_img: Image.Image) -&gt; str:</span><br><span class="line">    buffered = BytesIO()</span><br><span class="line">    pil_img.save(buffered, format=&quot;JPEG&quot;)</span><br><span class="line">    return base64.b64encode(buffered.getvalue()).decode(&quot;utf-8&quot;)</span><br><span class="line"></span><br><span class="line"># === æ„å»ºè°ƒç”¨å†…å®¹å¹¶å‘é€ ===</span><br><span class="line">def call_qwen_vl(pil_img: Image.Image, prompt_text: str = &quot;è¯·æè¿°å›¾åƒå†…å®¹&quot;) -&gt; str:</span><br><span class="line">    img_b64 = pil_image_to_base64(pil_img)</span><br><span class="line"></span><br><span class="line">    content = [</span><br><span class="line">        &#123;&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: prompt_text&#125;,</span><br><span class="line">        &#123;&quot;type&quot;: &quot;image_url&quot;, &quot;image_url&quot;: &#123;</span><br><span class="line">            &quot;url&quot;: f&quot;data:image/jpeg;base64,&#123;img_b64&#125;&quot;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    response = client.chat.completions.create(</span><br><span class="line">        model=&quot;qwen-vl-plus&quot;,</span><br><span class="line">        messages=[&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: content&#125;]</span><br><span class="line">    )</span><br><span class="line">    return response.choices[0].message.content.strip()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç›¸æ¯”å®˜æ–¹çš„ API è°ƒç”¨æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é€šè¿‡å°†å›¾åƒè½¬æ¢ä¸º Base64 ç¼–ç  å­—ç¬¦ä¸²çš„æ–¹å¼ä¼ è¾“å›¾åƒï¼Œè¿™æ ·å°±å¯ä»¥å°†å›¾åƒåµŒå…¥åˆ°è¯·æ±‚ä¸­ï¼Œç›´æ¥å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³è§†è§‰å¤§æ¨¡å‹è¿›è¡Œç†è§£</p>
<hr>
<h2 id="4-ä»£ç è§£æ"><a href="#4-ä»£ç è§£æ" class="headerlink" title="4. ä»£ç è§£æ"></a>4. ä»£ç è§£æ</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•å®ç°è¿™ä¸ªè¿‡ç¨‹ã€‚æ•´ä¸ªä»£ç çš„æ ¸å¿ƒåˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼šå›¾åƒåŠ è½½ã€å›¾åƒè½¬æ¢ä¸º base64 ç¼–ç ã€æ„å»º API è¯·æ±‚ã€è·å–å¹¶å¤„ç†æ¨¡å‹çš„å“åº”ã€‚</p>
<h3 id="4-1-å¯¼å…¥å¿…è¦çš„åº“"><a href="#4-1-å¯¼å…¥å¿…è¦çš„åº“" class="headerlink" title="4.1 å¯¼å…¥å¿…è¦çš„åº“"></a>4.1 å¯¼å…¥å¿…è¦çš„åº“</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"><span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>PIL</strong>ï¼šç”¨äºæ‰“å¼€å’Œå¤„ç†å›¾åƒæ–‡ä»¶ã€‚</li>
<li><strong>base64</strong>ï¼šç”¨äºå°†å›¾åƒæ•°æ®è½¬æ¢ä¸º base64 ç¼–ç ï¼Œä½¿å…¶é€‚åˆé€šè¿‡ HTTP è¯·æ±‚ä¼ è¾“ã€‚</li>
<li><strong>BytesIO</strong>ï¼šå°†å›¾åƒæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼Œè€Œä¸æ˜¯å†™å…¥ç£ç›˜ã€‚</li>
<li><strong>OpenAI</strong>ï¼šç”¨äºä¸ OpenAI API è¿›è¡Œäº¤äº’ï¼Œè°ƒç”¨ Qwen-VL æ¨¡å‹ã€‚</li>
</ul>
<h3 id="4-2-åˆå§‹åŒ–-API-å®¢æˆ·ç«¯"><a href="#4-2-åˆå§‹åŒ–-API-å®¢æˆ·ç«¯" class="headerlink" title="4.2 åˆå§‹åŒ– API å®¢æˆ·ç«¯"></a>4.2 åˆå§‹åŒ– API å®¢æˆ·ç«¯</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">client = OpenAI(</span><br><span class="line">    api_key=<span class="string">&quot;ä½ çš„ç™¾ç‚¼Key&quot;</span>,</span><br><span class="line">    base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ä½ éœ€è¦æä¾›ä¸€ä¸ª <strong>API å¯†é’¥</strong>ï¼ˆ<code>api_key</code>ï¼‰æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚<code>base_url</code> æ˜¯ API çš„åœ°å€ï¼Œç”¨æ¥ä¸ Qwen æ¨¡å‹é€šä¿¡ã€‚</p>
<h3 id="4-3-å›¾åƒè½¬æ¢ä¸º-Base64-ç¼–ç "><a href="#4-3-å›¾åƒè½¬æ¢ä¸º-Base64-ç¼–ç " class="headerlink" title="4.3 å›¾åƒè½¬æ¢ä¸º Base64 ç¼–ç "></a>4.3 å›¾åƒè½¬æ¢ä¸º Base64 ç¼–ç </h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pil_image_to_base64</span>(<span class="params">pil_img: Image.Image</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    buffered = BytesIO()</span><br><span class="line">    pil_img.save(buffered, <span class="built_in">format</span>=<span class="string">&quot;JPEG&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> base64.b64encode(buffered.getvalue()).decode(<span class="string">&quot;utf-8&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†å›¾åƒä» <strong>PIL å›¾åƒæ ¼å¼</strong> è½¬æ¢ä¸º <strong>base64 ç¼–ç </strong>ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ</p>
<ul>
<li>å›¾åƒæ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œç½‘ç»œé€šä¿¡ï¼ˆç‰¹åˆ«æ˜¯é€šè¿‡ HTTP è¯·æ±‚ï¼‰æ›´æ“…é•¿å¤„ç†æ–‡æœ¬æ•°æ®ã€‚é€šè¿‡å°†å›¾åƒè½¬æ¢ä¸º base64 ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†å…¶åµŒå…¥åˆ°æ–‡æœ¬è¯·æ±‚ä¸­å‘é€ç»™ APIã€‚</li>
<li><code>BytesIO()</code> æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„æ–‡ä»¶å¯¹è±¡ï¼Œç”¨æ¥æš‚å­˜å›¾åƒæ•°æ®ã€‚</li>
<li><code>pil_img.save(buffered, format=&quot;JPEG&quot;)</code> å°†å›¾åƒä¿å­˜åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼ˆ<code>buffered</code>ï¼‰ï¼Œå¹¶æŒ‡å®šå›¾åƒæ ¼å¼ä¸º JPEGã€‚</li>
<li><code>base64.b64encode(buffered.getvalue())</code> å°†å†…å­˜ä¸­çš„å›¾åƒæ•°æ®è¿›è¡Œ base64 ç¼–ç ã€‚</li>
<li><code>.decode(&quot;utf-8&quot;)</code> å°†ç¼–ç åçš„å­—èŠ‚æ•°æ®è½¬æ¢ä¸ºå¯è¯»çš„å­—ç¬¦ä¸²ã€‚</li>
</ul>
<h3 id="4-4-æ„å»º-API-è¯·æ±‚å¹¶å‘é€"><a href="#4-4-æ„å»º-API-è¯·æ±‚å¹¶å‘é€" class="headerlink" title="4.4 æ„å»º API è¯·æ±‚å¹¶å‘é€"></a>4.4 æ„å»º API è¯·æ±‚å¹¶å‘é€</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">call_qwen_vl</span>(<span class="params">pil_img: Image.Image, prompt_text: <span class="built_in">str</span> = <span class="string">&quot;è¯·æè¿°å›¾åƒå†…å®¹&quot;</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    img_b64 = pil_image_to_base64(pil_img)</span><br><span class="line"></span><br><span class="line">    content = [</span><br><span class="line">        &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="string">&quot;text&quot;</span>: prompt_text&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;image_url&quot;</span>, <span class="string">&quot;image_url&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">f&quot;data:image/jpeg;base64,<span class="subst">&#123;img_b64&#125;</span>&quot;</span></span><br><span class="line">        &#125;&#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    response = client.chat.completions.create(</span><br><span class="line">        model=<span class="string">&quot;qwen-vl-plus&quot;</span>,</span><br><span class="line">        messages=[&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: content&#125;]</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> response.choices[<span class="number">0</span>].message.content.strip()</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸€æ®µæ˜¯ä»£ç çš„æ ¸å¿ƒï¼Œä¸»è¦å®Œæˆäº†ä»¥ä¸‹å·¥ä½œï¼š</p>
<ol>
<li><p><strong>å°†å›¾åƒè½¬æ¢ä¸º Base64</strong>ï¼šæˆ‘ä»¬å…ˆè°ƒç”¨å‰é¢å†™çš„ <code>pil_image_to_base64()</code> å‡½æ•°å°†å›¾åƒè½¬æ¢ä¸º base64 ç¼–ç ã€‚</p>
</li>
<li><p><strong>æ„å»ºè¯·æ±‚å†…å®¹</strong>ï¼šè¿™é‡Œæˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªå†…å®¹åˆ—è¡¨ <code>content</code>ï¼ŒåŒ…æ‹¬äº†ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>æ–‡æœ¬æç¤º</strong>ï¼š<code>&#123;&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: prompt_text&#125;</code>ï¼Œè¿™æ˜¯ç»™æ¨¡å‹çš„æç¤ºï¼Œå‘Šè¯‰å®ƒéœ€è¦æè¿°å›¾åƒçš„å†…å®¹ã€‚é»˜è®¤çš„promptæ–‡æœ¬æ˜¯â€œè¯·æè¿°å›¾åƒå†…å®¹â€ã€‚</li>
<li><strong>å›¾åƒæ•°æ®</strong>ï¼š<code>&#123;&quot;type&quot;: &quot;image_url&quot;, &quot;image_url&quot;: &#123;&quot;url&quot;: f&quot;data:image/jpeg;base64,&#123;img_b64&#125;&quot;&#125;&#125;</code>ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª <code>data:image/jpeg;base64,...</code> çš„ URL æ ¼å¼æ¥å°†å›¾åƒæ•°æ®åµŒå…¥è¯·æ±‚ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹é¿å…äº†å›¾åƒå¿…é¡»æ‰˜ç®¡åœ¨ç½‘ç»œä¸Šçš„é™åˆ¶ã€‚</li>
</ul>
</li>
<li><p><strong>å‘é€è¯·æ±‚</strong>ï¼š<code>client.chat.completions.create(...)</code> è¿™è¡Œä»£ç é€šè¿‡ OpenAI å®¢æˆ·ç«¯å‘ Qwen-VL æ¨¡å‹å‘é€è¯·æ±‚ã€‚è¿™é‡ŒæŒ‡å®šäº†ä½¿ç”¨çš„æ¨¡å‹ <code>qwen-vl-plus</code>ï¼ˆä½ å¯ä»¥è‡ªå·±è·Ÿæ¢æ‰€éœ€çš„è§†è§‰å¤§æ¨¡å‹ï¼‰ï¼Œå¹¶å°†æ„å»ºå¥½çš„æ¶ˆæ¯å†…å®¹ä¼ é€’ç»™æ¨¡å‹ã€‚</p>
</li>
<li><p><strong>è·å–å“åº”</strong>ï¼šæ¨¡å‹å¤„ç†å®Œå›¾åƒåï¼Œä¼šè¿”å›ä¸€ä¸ªå“åº”ã€‚æˆ‘ä»¬ä» <code>response.choices[0].message.content</code> ä¸­æå–å‡ºæ¨¡å‹ç”Ÿæˆçš„æè¿°ï¼Œå¹¶ä½¿ç”¨ <code>.strip()</code> å»é™¤ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦ã€‚</p>
</li>
</ol>
<h3 id="4-5-å®Œæ•´æµç¨‹"><a href="#4-5-å®Œæ•´æµç¨‹" class="headerlink" title="4.5 å®Œæ•´æµç¨‹"></a>4.5 å®Œæ•´æµç¨‹</h3><ol>
<li><strong>åŠ è½½å›¾åƒ</strong>ï¼šé¦–å…ˆä»æœ¬åœ°åŠ è½½å›¾åƒï¼Œé€šå¸¸ä½¿ç”¨ <code>PIL.Image.open()</code> æ¥æ‰“å¼€æ–‡ä»¶ã€‚</li>
<li><strong>å›¾åƒè½¬æ¢</strong>ï¼šç„¶åæˆ‘ä»¬å°†å›¾åƒè½¬æ¢ä¸º base64 ç¼–ç ï¼Œä½¿å…¶èƒ½å¤Ÿé€šè¿‡ç½‘ç»œè¯·æ±‚å®‰å…¨ä¼ è¾“ã€‚</li>
<li><strong>æ„å»ºè¯·æ±‚å¹¶å‘é€ç»™ Qwen-VL æ¨¡å‹</strong>ï¼šæ„å»ºä¸€ä¸ªåŒ…å«å›¾åƒå’Œæ–‡æœ¬æç¤ºçš„è¯·æ±‚ï¼Œå‘é€ç»™ Qwen-VL æ¨¡å‹ã€‚</li>
<li><strong>æ¥æ”¶å¹¶å¤„ç†æ¨¡å‹çš„å“åº”</strong>ï¼šæ¨¡å‹ä¼šåˆ†æå›¾åƒå¹¶ç”Ÿæˆä¸€æ®µæè¿°æ–‡æœ¬ï¼Œæˆ‘ä»¬ä»å“åº”ä¸­æå–å¹¶è¿”å›è¿™æ®µæ–‡æœ¬ã€‚</li>
</ol>
<h2 id="5-ç¤ºä¾‹ï¼šå¦‚ä½•ä½¿ç”¨è¯¥ä»£ç "><a href="#5-ç¤ºä¾‹ï¼šå¦‚ä½•ä½¿ç”¨è¯¥ä»£ç " class="headerlink" title="5. ç¤ºä¾‹ï¼šå¦‚ä½•ä½¿ç”¨è¯¥ä»£ç "></a>5. ç¤ºä¾‹ï¼šå¦‚ä½•ä½¿ç”¨è¯¥ä»£ç </h2><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæœ¬åœ°çš„å›¾åƒæ–‡ä»¶ <code>example.jpg</code>ï¼Œä½ æƒ³è®©è§†è§‰æ¨¡å‹æè¿°å®ƒçš„å†…å®¹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æœ¬åœ°å›¾åƒæ–‡ä»¶</span></span><br><span class="line">image_path = <span class="string">&quot;example.jpg&quot;</span></span><br><span class="line">img = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨ Qwen-VL æ¨¡å‹è·å–å›¾åƒæè¿°</span></span><br><span class="line">description = call_qwen_vl(img)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å›¾åƒæè¿°ï¼š&quot;</span>, description)</span><br></pre></td></tr></table></figure>

<h3 id="5-1-ç»“æœ"><a href="#5-1-ç»“æœ" class="headerlink" title="5.1 ç»“æœ"></a>5.1 ç»“æœ</h3><p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œæ¨¡å‹ä¼šåˆ†æå›¾åƒå¹¶ç”Ÿæˆå¯¹è¯¥å›¾åƒçš„æè¿°ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šè¿”å›ç±»ä¼¼è¿™æ ·çš„æè¿°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å›¾åƒæè¿°ï¼šè¿™æ˜¯ä¸€å¼ åŒ…å«ä¸€ä¸ªç»¿è‰²è‹¹æœçš„ç…§ç‰‡ï¼Œè‹¹æœæ”¾ç½®åœ¨ç™½è‰²èƒŒæ™¯ä¸Šï¼Œæ—è¾¹è¿˜æœ‰ä¸€äº›å°è‰ã€‚</span><br></pre></td></tr></table></figure>

<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://bailian.console.aliyun.com/?spm=5176.28197619.aillm.2.4d7a1ad8wlSXpQ&scm=20140722.S_%E5%AF%BC%E8%88%AA%E5%88%B0%E6%A8%A1%E5%9E%8B%E5%B9%BF%E5%9C%BA._.RL_%E5%AF%BC%E8%88%AA%E5%88%B0%E6%A8%A1%E5%9E%8B%E5%B9%BF%E5%9C%BA-LOC_aillm-OR_chat-V_3-RC_llm&accounttraceid=2fcac53a3ff94398a308227a35f9638fekhp&tab=api#/api/?type=model&url=https%3A%2F%2Fhelp.aliyun.com%2Fdocument_detail%2F2712576.html%23cde3eb109flda">Qwenå®˜æ–¹çš„è§†è§‰æ¨¡å‹å›¾åƒè¾“å…¥ä½¿ç”¨æ–¹æ³•</a>ã€‚</p>
]]></content>
      <categories>
        <category>LLMå­¦ä¹ ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>AI</tag>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Qwen</tag>
        <tag>Agent</tag>
        <tag>Python</tag>
        <tag>è§†è§‰</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLeetCodeã€ Palindrome Number</title>
    <url>/2025/04/10/%E3%80%8CLeetCode%E3%80%8D-Palindrome-Number/</url>
    <content><![CDATA[<h1 id="å›æ–‡æ•°"><a href="#å›æ–‡æ•°" class="headerlink" title="å›æ–‡æ•°"></a>å›æ–‡æ•°</h1><hr>
<h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>x</code> ï¼Œå¦‚æœ <code>x</code> æ˜¯ä¸€ä¸ªå›æ–‡æ•´æ•°ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</p>
<p><strong>å›æ–‡æ•°</strong> æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼Œ<strong>121</strong> æ˜¯å›æ–‡ï¼Œè€Œ <strong>123</strong> ä¸æ˜¯ã€‚</li>
</ul>
<hr>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š121 â†’ è¾“å‡ºï¼štrue</span><br><span class="line">è¾“å…¥ï¼š-121 â†’ è¾“å‡ºï¼šfalse</span><br><span class="line">è¾“å…¥ï¼š10 â†’ è¾“å‡ºï¼šfalse</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ–¹æ³•-1ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡"><a href="#æ–¹æ³•-1ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡" class="headerlink" title="æ–¹æ³• 1ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡"></a>æ–¹æ³• 1ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡</h2><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><p>è¦åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ˜¯å›æ–‡æ•°ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p>
<ul>
<li>è´Ÿæ•°å¤„ç† ï¼šå¦‚æœè¾“å…¥çš„æ•´æ•° x æ˜¯è´Ÿæ•°ï¼Œåˆ™å®ƒä¸å¯èƒ½æ˜¯å›æ–‡æ•°ï¼Œå› ä¸ºè´Ÿå·ä¼šè®©æ­£åºå’Œå€’åºä¸åŒã€‚</li>
<li>åè½¬æ•°å­—æ¯”è¾ƒ ï¼šå°†æ•´æ•°åè½¬åä¸åŸæ•´æ•°è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œåˆ™è¯´æ˜å®ƒæ˜¯å›æ–‡æ•°ã€‚</li>
</ul>
<hr>
<h3 id="Python-å®ç°"><a href="#Python-å®ç°" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def isPalindrome(self, x):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type x: int</span><br><span class="line">        :rtype: bool</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        # å¦‚æœ x æ˜¯è´Ÿæ•°ï¼Œç›´æ¥è¿”å› False</span><br><span class="line">        if x &lt; 0:</span><br><span class="line">            return False</span><br><span class="line">        </span><br><span class="line">        # å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><br><span class="line">        str_x = str(x)</span><br><span class="line">        </span><br><span class="line">        # åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç­‰äºå…¶åè½¬åçš„ç»“æœ</span><br><span class="line">        return str_x == str_x[::-1]</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="é€è¡Œä»£ç è§£æ"><a href="#é€è¡Œä»£ç è§£æ" class="headerlink" title="é€è¡Œä»£ç è§£æ"></a>é€è¡Œä»£ç è§£æ</h3><h4 id="1-è´Ÿæ•°å¤„ç†"><a href="#1-è´Ÿæ•°å¤„ç†" class="headerlink" title="1. è´Ÿæ•°å¤„ç†"></a>1. è´Ÿæ•°å¤„ç†</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if x &lt; 0:</span><br><span class="line">    return False</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¾“å…¥çš„æ•´æ•° <code>x</code> æ˜¯è´Ÿæ•°ï¼Œç›´æ¥è¿”å› <code>False</code>ã€‚</p>
<hr>
<h4 id="2-æ•´æ•°è½¬å­—ç¬¦ä¸²"><a href="#2-æ•´æ•°è½¬å­—ç¬¦ä¸²" class="headerlink" title="2. æ•´æ•°è½¬å­—ç¬¦ä¸²"></a>2. æ•´æ•°è½¬å­—ç¬¦ä¸²</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">str_x = str(x)</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆè¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Ÿ</p>
<ul>
<li>å­—ç¬¦ä¸²æ”¯æŒåˆ‡ç‰‡æ“ä½œï¼ˆå¦‚ <code>[::-1]</code>ï¼‰ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è·å–å­—ç¬¦ä¸²çš„åè½¬ç»“æœã€‚</li>
<li>ç›´æ¥æ“ä½œæ•´æ•°æ— æ³•å®ç°ç±»ä¼¼çš„åè½¬æ“ä½œã€‚</li>
</ul>
<hr>
<h4 id="3-åˆ¤æ–­å›æ–‡æ•°"><a href="#3-åˆ¤æ–­å›æ–‡æ•°" class="headerlink" title="3. åˆ¤æ–­å›æ–‡æ•°"></a>3. åˆ¤æ–­å›æ–‡æ•°</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">return str_x == str_x[::-1]</span><br></pre></td></tr></table></figure>

<p>åˆ¤æ–­å­—ç¬¦ä¸² <code>str_x</code> æ˜¯å¦ç­‰äºå®ƒçš„åè½¬å­—ç¬¦ä¸² <code>str_x[::-1]</code>ã€‚</p>
<p>å¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å› <code>True</code>ï¼Œè¡¨ç¤º <code>x</code> æ˜¯å›æ–‡æ•°ï¼›å¦åˆ™è¿”å› <code>False</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">str_x[::-1]æ˜¯ Python çš„åˆ‡ç‰‡æ“ä½œï¼Œç”¨äºåè½¬å­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">åˆ‡ç‰‡è¯­æ³• [start:end:step]ï¼š</span><br><span class="line">startï¼šèµ·å§‹ç´¢å¼•ï¼ˆé»˜è®¤ä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦ï¼‰ã€‚</span><br><span class="line">endï¼šç»“æŸç´¢å¼•ï¼ˆé»˜è®¤ä¸ºæœ€åä¸€ä¸ªå­—ç¬¦ä¹‹åï¼‰ã€‚</span><br><span class="line">stepï¼šæ­¥é•¿ï¼ˆæ­£å€¼è¡¨ç¤ºæ­£å‘å–å€¼ï¼Œè´Ÿå€¼è¡¨ç¤ºåå‘å–å€¼ï¼‰ã€‚</span><br><span class="line">[::-1] è¡¨ç¤ºä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹ï¼Œä»¥æ­¥é•¿ -1 åå‘å–å€¼ï¼Œä»è€Œå®ç°å­—ç¬¦ä¸²çš„åè½¬ã€‚</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ–¹æ³•-2ï¼šä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆä»…ç”¨æ•°å­¦è¿ç®—ï¼‰"><a href="#æ–¹æ³•-2ï¼šä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆä»…ç”¨æ•°å­¦è¿ç®—ï¼‰" class="headerlink" title="æ–¹æ³• 2ï¼šä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆä»…ç”¨æ•°å­¦è¿ç®—ï¼‰"></a>æ–¹æ³• 2ï¼šä¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆä»…ç”¨æ•°å­¦è¿ç®—ï¼‰</h2><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æˆ‘ä»¬ä¸èƒ½ç”¨ <code>str(x)</code> æŠŠæ•´æ•°è½¬æˆå­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œéœ€è¦ç”¨æ•°å­¦æ–¹å¼æ„é€  â€œæ•´æ•°çš„å€’åºè¡¨ç¤ºâ€ï¼Œå¹¶ä¸”ä»…æ„é€ ä¸€åŠå°±èƒ½è¿›è¡Œå¯¹æ¯”ï¼š</p>
<ul>
<li>å¦‚æœæ•°æ˜¯å›æ–‡ï¼Œåˆ™å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è½¬è®¡ååŠéƒ¨æ•°å­—ï¼Œå’Œå‰©ä¸‹çš„ x è¿›è¡Œæ¯”è¾ƒå³å¯ã€‚</li>
</ul>
<hr>
<h3 id="å®ç°æ­¥éª¤-1"><a href="#å®ç°æ­¥éª¤-1" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol>
<li>å¦‚æœ x &lt; 0ï¼Œæ˜¯è´Ÿæ•°ï¼Œä¸å¯èƒ½æ˜¯å›æ–‡</li>
<li>å¦‚æœ x æœ€åä¸€ä½æ˜¯ 0ï¼Œä½† x ä¸æ˜¯ 0ï¼Œä¹Ÿä¸æ˜¯å›æ–‡</li>
<li>é€šè¿‡æ¯æ¬¡æŠ½å‡º x çš„æœ€åä¸€ä½ï¼ŒåŠ åˆ° reversed_half çš„å°¾éƒ¨ï¼Œå¹¶æŠŠ x å»æ‰æœ€åä¸€ä½</li>
<li>å½“ reversed_half å¤§äºæˆ–ç­‰äº x æ—¶ï¼Œè¡¨ç¤ºå·²å¤„ç†åˆ°ä¸­é—´ï¼Œå¼€å§‹æ¯”è¾ƒ</li>
</ol>
<hr>
<h3 id="ç¤ºæ„å›¾ï¼š1221-å¦‚ä½•å¤„ç†"><a href="#ç¤ºæ„å›¾ï¼š1221-å¦‚ä½•å¤„ç†" class="headerlink" title="ç¤ºæ„å›¾ï¼š1221 å¦‚ä½•å¤„ç†"></a>ç¤ºæ„å›¾ï¼š1221 å¦‚ä½•å¤„ç†</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = 1221</span><br><span class="line">reversed_half = 0</span><br><span class="line"></span><br><span class="line">æ­¥éª¤ï¼š</span><br><span class="line">å– 1ï¼š reversed_half = 1ï¼Œ x = 122</span><br><span class="line">å– 2ï¼š reversed_half = 12ï¼Œ x = 12</span><br><span class="line"></span><br><span class="line">æ¯”è¾ƒ: x == reversed_half â†’ æ˜¯ï¼Œè¿”å› true</span><br></pre></td></tr></table></figure>

<h3 id="å¦‚æœä¸æ˜¯å›æ–‡ï¼šç¤ºä¾‹-x-1234"><a href="#å¦‚æœä¸æ˜¯å›æ–‡ï¼šç¤ºä¾‹-x-1234" class="headerlink" title="å¦‚æœä¸æ˜¯å›æ–‡ï¼šç¤ºä¾‹ x &#x3D; 1234"></a>å¦‚æœä¸æ˜¯å›æ–‡ï¼šç¤ºä¾‹ x &#x3D; 1234</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = 1234</span><br><span class="line">reversed_half = 0</span><br><span class="line"></span><br><span class="line">å– 4 â†’ reversed_half = 4ï¼Œ x = 123</span><br><span class="line">å– 3 â†’ reversed_half = 43ï¼Œ x = 12</span><br><span class="line"></span><br><span class="line">æ¯”è¾ƒ: x = 12, reversed_half = 43 â†’ ä¸ç­‰</span><br><span class="line">è¿”å› false</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Python-å®ç°-1"><a href="#Python-å®ç°-1" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isPalindrome</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> (x % <span class="number">10</span> == <span class="number">0</span> <span class="keyword">and</span> x != <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        reversed_half = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> x &gt; reversed_half:</span><br><span class="line">            reversed_half = reversed_half * <span class="number">10</span> + x % <span class="number">10</span></span><br><span class="line">            x //= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x == reversed_half <span class="keyword">or</span> x == reversed_half // <span class="number">10</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="é€è¡Œä»£ç è§£æ-1"><a href="#é€è¡Œä»£ç è§£æ-1" class="headerlink" title="é€è¡Œä»£ç è§£æ"></a>é€è¡Œä»£ç è§£æ</h3><h4 id="1-æå‰å¤„ç†-æ˜æ˜¾ä¸æ˜¯å›æ–‡æ•°-çš„æƒ…å†µ"><a href="#1-æå‰å¤„ç†-æ˜æ˜¾ä¸æ˜¯å›æ–‡æ•°-çš„æƒ…å†µ" class="headerlink" title="1. æå‰å¤„ç† æ˜æ˜¾ä¸æ˜¯å›æ–‡æ•° çš„æƒ…å†µ"></a>1. æå‰å¤„ç† æ˜æ˜¾ä¸æ˜¯å›æ–‡æ•° çš„æƒ…å†µ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> (x % <span class="number">10</span> == <span class="number">0</span> <span class="keyword">and</span> x != <span class="number">0</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è´Ÿæ•°å’Œä»¥ 0 ç»“å°¾çš„é 0 æ•´æ•°ä¸èƒ½æ˜¯å›æ–‡</li>
</ul>
<hr>
<h4 id="2-åˆ›å»ºä¸€ä¸ªå˜é‡ç”¨æ¥ä¿å­˜-ä»åå¾€å‰å–å‡ºæ¥çš„ä¸€åŠæ•°å­—ï¼ˆåè½¬çš„ä¸€åŠï¼‰"><a href="#2-åˆ›å»ºä¸€ä¸ªå˜é‡ç”¨æ¥ä¿å­˜-ä»åå¾€å‰å–å‡ºæ¥çš„ä¸€åŠæ•°å­—ï¼ˆåè½¬çš„ä¸€åŠï¼‰" class="headerlink" title="2. åˆ›å»ºä¸€ä¸ªå˜é‡ç”¨æ¥ä¿å­˜ ä»åå¾€å‰å–å‡ºæ¥çš„ä¸€åŠæ•°å­—ï¼ˆåè½¬çš„ä¸€åŠï¼‰"></a>2. åˆ›å»ºä¸€ä¸ªå˜é‡ç”¨æ¥ä¿å­˜ ä»åå¾€å‰å–å‡ºæ¥çš„ä¸€åŠæ•°å­—ï¼ˆåè½¬çš„ä¸€åŠï¼‰</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reversed_half = <span class="number">0</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="3-æ§åˆ¶ä»€ä¹ˆæ—¶å€™â€œåè½¬äº†ä¸€åŠâ€"><a href="#3-æ§åˆ¶ä»€ä¹ˆæ—¶å€™â€œåè½¬äº†ä¸€åŠâ€" class="headerlink" title="3. æ§åˆ¶ä»€ä¹ˆæ—¶å€™â€œåè½¬äº†ä¸€åŠâ€"></a>3. æ§åˆ¶ä»€ä¹ˆæ—¶å€™â€œåè½¬äº†ä¸€åŠâ€</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while x &gt; reversed_half:</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = 1221</span><br><span class="line">reversed_half = 0</span><br><span class="line"></span><br><span class="line"># ç¬¬ä¸€æ¬¡ï¼šæ‹¿å‡º 1 â†’ reversed_half = 1ï¼Œx = 122</span><br><span class="line"># ç¬¬äºŒæ¬¡ï¼šæ‹¿å‡º 2 â†’ reversed_half = 12ï¼Œx = 12</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶ï¼š</span><br><span class="line">x == reversed_half â†’ å¾ªç¯ç»“æŸ</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="4-åè½¬æ ¸å¿ƒé€»è¾‘"><a href="#4-åè½¬æ ¸å¿ƒé€»è¾‘" class="headerlink" title="4. åè½¬æ ¸å¿ƒé€»è¾‘"></a>4. åè½¬æ ¸å¿ƒé€»è¾‘</h4><p>æˆ‘ä»¬è¦æŠŠæ•´æ•° x çš„æœ€åä¸€ä½ä¸€ä½â€œæå–å‡ºæ¥â€ï¼Œç„¶ååƒæ­ç§¯æœ¨ä¸€æ ·æŠŠè¿™äº›æ•°å­—åè½¬ç»„åˆèµ·æ¥ã€‚ </p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•° x &#x3D; 1234ï¼Œæˆ‘ä»¬æƒ³æŠŠå®ƒä»åå¾€å‰åè½¬å¾—åˆ°ï¼š4321</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reversed_half = reversed_half * <span class="number">10</span> + x % <span class="number">10</span></span><br><span class="line">x //= <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸¾ä¾‹</strong>ï¼š</p>
<p>åˆå§‹çŠ¶æ€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = 1234</span><br><span class="line">reversed_half = 0</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ­¥å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reversed_half = 0 * 10 + 1234 % 10 = 0 + 4 = 4</span><br><span class="line">x = 1234 // 10 = 123</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reversed_half = 4 * 10 + 123 % 10 = 40 + 3 = 43</span><br><span class="line">x = 123 // 10 = 12</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reversed_half = 43 * 10 + 12 % 10 = 430 + 2 = 432</span><br><span class="line">x = 12 // 10 = 1</span><br></pre></td></tr></table></figure>
<p>ç¬¬å››æ­¥å¾ªç¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reversed_half = 432 * 10 + 1 % 10 = 4320 + 1 = 4321</span><br><span class="line">x = 1 // 10 = 0</span><br></pre></td></tr></table></figure>

<p><code>x % 10</code>: ä½œç”¨æ˜¯å–å‡ºæ•°å­—çš„æœ€åä¸€ä½ï¼Œä¾‹å¦‚ <code>123 % 10 = 3</code></p>
<p><code>x //= 10</code>: æ•´é™¤ 10ï¼Œç›¸å½“äº<code>x = x // 10</code></p>
<ul>
<li>ä½œç”¨æ˜¯æŠŠæ•°å­—â€œå»æ‰æœ€åä¸€ä½,ä¾‹å¦‚ <code>123 // 10 = 12</code></li>
</ul>
<p><code>reversed_half * 10</code>: ä½œç”¨æ˜¯æŠŠä¸Šä¸€è½®çš„æœ€åä¸€ä½å¾€å‰æ¨è¿›ä¸€æ ¼</p>
<h4 id="5-åˆ¤æ–­æ˜¯ä¸æ˜¯å›æ–‡"><a href="#5-åˆ¤æ–­æ˜¯ä¸æ˜¯å›æ–‡" class="headerlink" title="5. åˆ¤æ–­æ˜¯ä¸æ˜¯å›æ–‡"></a>5. åˆ¤æ–­æ˜¯ä¸æ˜¯å›æ–‡</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> x == reversed_half <span class="keyword">or</span> x == reversed_half // <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯å¶æ•°ä½æ•°å­—ï¼Œä¾‹å¦‚ 1221ï¼š</p>
<ul>
<li>æ¯”è¾ƒ <code>x == reversed_half</code>ï¼Œå°±æ˜¯ 12 &#x3D;&#x3D; 12</li>
</ul>
<p>å¦‚æœæ˜¯å¥‡æ•°ä½æ•°å­—ï¼Œä¾‹å¦‚ 12321ï¼š</p>
<ul>
<li>åè½¬æ—¶ <code>reversed_half</code> ä¼šå¤šå‡ºä¸€ä¸ªä¸­é—´æ•°ï¼ˆæ¯”å¦‚ 123ï¼‰</li>
<li>éœ€è¦å»æ‰ä¸­é—´æ•°å†æ¯”è¾ƒï¼š<code>reversed_half // 10</code> å°±æ˜¯å»æ‰æœ€åä¸€ä½ï¼ˆ3 â†’ å»æ‰ 3ï¼‰</li>
</ul>
<hr>
]]></content>
      <categories>
        <category>ä»£ç å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŒLeetCodeã€ Two Sum</title>
    <url>/2025/04/09/%E3%80%8CLeetCode%E3%80%8D-Two-Sum/</url>
    <content><![CDATA[<h1 id="ä¸¤æ•°ä¹‹å’Œ"><a href="#ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ"></a>ä¸¤æ•°ä¹‹å’Œ</h1><p>å¼€å§‹å­¦ä¹ Pythonçš„ç¬¬ä¸€å¤©ï¼ŒåŠªåŠ›ing</p>
<hr>
<h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼š<ul>
<li>æ•°ç»„ <code>nums</code>ï¼ˆé•¿åº¦è‡³å°‘ä¸º 2ï¼‰ã€‚</li>
<li>ç›®æ ‡å€¼ <code>target</code>ã€‚</li>
</ul>
</li>
<li><strong>è¾“å‡º</strong>ï¼š<ul>
<li>è¿”å›ä¸¤ä¸ªæ•°çš„ç´¢å¼•ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œç­‰äºç›®æ ‡å€¼ã€‚</li>
</ul>
</li>
<li><strong>å‡è®¾</strong>ï¼š<ul>
<li>æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚</li>
<li>ä½ ä¸èƒ½ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ä¸¤æ¬¡ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="ç¤ºä¾‹-1ï¼š"><a href="#ç¤ºä¾‹-1ï¼š" class="headerlink" title="ç¤ºä¾‹ 1ï¼š"></a>ç¤ºä¾‹ 1ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2, 7, 11, 15], target = 9</span><br><span class="line">è¾“å‡ºï¼š[0, 1]</span><br><span class="line">è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9ï¼Œè¿”å› [0, 1]ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹-2ï¼š"><a href="#ç¤ºä¾‹-2ï¼š" class="headerlink" title="ç¤ºä¾‹ 2ï¼š"></a>ç¤ºä¾‹ 2ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3, 2, 4], target = 6</span><br><span class="line">è¾“å‡ºï¼š[1, 2]</span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹-3ï¼š"><a href="#ç¤ºä¾‹-3ï¼š" class="headerlink" title="ç¤ºä¾‹ 3ï¼š"></a>ç¤ºä¾‹ 3ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3, 3], target = 6</span><br><span class="line">è¾“å‡ºï¼š[0, 1]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="æ–¹æ³•-1ï¼šæš´åŠ›æ³•"><a href="#æ–¹æ³•-1ï¼šæš´åŠ›æ³•" class="headerlink" title="æ–¹æ³• 1ï¼šæš´åŠ›æ³•"></a>æ–¹æ³• 1ï¼šæš´åŠ›æ³•</h2><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol>
<li>ä½¿ç”¨å¤–å±‚å¾ªç¯å›ºå®šç¬¬ä¸€ä¸ªæ•°çš„ç´¢å¼• <code>i</code>ã€‚</li>
<li>ä½¿ç”¨å†…å±‚å¾ªç¯ä» <code>i+1</code> å¼€å§‹ï¼Œæ£€æŸ¥åç»­çš„æ‰€æœ‰æ•°ã€‚</li>
<li>å¦‚æœä¸¤ä¸ªæ•°çš„å’Œç­‰äºç›®æ ‡å€¼ <code>target</code>ï¼Œç«‹å³è¿”å›å®ƒä»¬çš„ç´¢å¼•ã€‚</li>
<li>å¦‚æœéå†ç»“æŸä»æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨ã€‚</li>
</ol>
<h3 id="Python-å®ç°"><a href="#Python-å®ç°" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums, target</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type target: int</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># å¤–å±‚å¾ªç¯å›ºå®šç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="comment"># å†…å±‚å¾ªç¯ä» i+1 å¼€å§‹ï¼Œé¿å…é‡å¤ä½¿ç”¨å…ƒç´ </span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, <span class="built_in">len</span>(nums)):</span><br><span class="line">                <span class="comment"># æ£€æŸ¥ä¸¤æ•°ä¹‹å’Œæ˜¯å¦ç­‰äºç›®æ ‡å€¼</span></span><br><span class="line">                <span class="keyword">if</span> nums[i] + nums[j] == target:</span><br><span class="line">                    <span class="comment"># å¦‚æœæ‰¾åˆ°ï¼Œç«‹å³è¿”å›ç´¢å¼•</span></span><br><span class="line">                    <span class="keyword">return</span> [i, j]</span><br><span class="line">        <span class="comment"># æ ¹æ®é¢˜ç›®å‡è®¾ï¼Œè¿™é‡Œä¸ä¼šæ‰§è¡Œåˆ°</span></span><br><span class="line">        <span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>


<h3 id="ç¤ºä¾‹è¿è¡Œ"><a href="#ç¤ºä¾‹è¿è¡Œ" class="headerlink" title="ç¤ºä¾‹è¿è¡Œ"></a>ç¤ºä¾‹è¿è¡Œ</h3><h4 id="è¾“å…¥ï¼šnums-2-7-11-15-target-9"><a href="#è¾“å…¥ï¼šnums-2-7-11-15-target-9" class="headerlink" title="è¾“å…¥ï¼šnums = [2, 7, 11, 15], target = 9"></a>è¾“å…¥ï¼š<code>nums = [2, 7, 11, 15], target = 9</code></h4><ul>
<li>å¤–å±‚å¾ªç¯ <code>i = 0</code>ï¼Œå†…å±‚å¾ªç¯ï¼š<ul>
<li><code>j = 1</code>ï¼Œ<code>nums[0] + nums[1] = 2 + 7 = 9</code>ï¼Œæ‰¾åˆ°ç­”æ¡ˆï¼Œè¿”å› <code>[0, 1]</code>ã€‚</li>
</ul>
</li>
</ul>
<h4 id="è¾“å…¥ï¼šnums-3-2-4-target-6"><a href="#è¾“å…¥ï¼šnums-3-2-4-target-6" class="headerlink" title="è¾“å…¥ï¼šnums = [3, 2, 4], target = 6"></a>è¾“å…¥ï¼š<code>nums = [3, 2, 4], target = 6</code></h4><ul>
<li>å¤–å±‚å¾ªç¯ <code>i = 0</code>ï¼Œå†…å±‚å¾ªç¯ï¼š<ul>
<li><code>j = 1</code>ï¼Œ<code>nums[0] + nums[1] = 3 + 2 = 5</code>ï¼Œä¸åŒ¹é…ã€‚</li>
<li><code>j = 2</code>ï¼Œ<code>nums[0] + nums[2] = 3 + 4 = 7</code>ï¼Œä¸åŒ¹é…ã€‚</li>
</ul>
</li>
<li>å¤–å±‚å¾ªç¯ <code>i = 1</code>ï¼Œå†…å±‚å¾ªç¯ï¼š<ul>
<li><code>j = 2</code>ï¼Œ<code>nums[1] + nums[2] = 2 + 4 = 6</code>ï¼Œæ‰¾åˆ°ç­”æ¡ˆï¼Œè¿”å› <code>[1, 2]</code>ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="é€è¡Œä»£ç è§£æ"><a href="#é€è¡Œä»£ç è§£æ" class="headerlink" title="é€è¡Œä»£ç è§£æ"></a>é€è¡Œä»£ç è§£æ</h3><h4 id="1-å®šä¹‰ç±»å’Œæ–¹æ³•"><a href="#1-å®šä¹‰ç±»å’Œæ–¹æ³•" class="headerlink" title="1. å®šä¹‰ç±»å’Œæ–¹æ³•"></a>1. å®šä¹‰ç±»å’Œæ–¹æ³•</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums, target</span>):</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>class Solution(object)</code></strong>ï¼šå®šä¹‰ä¸€ä¸ªç±» <code>Solution</code>ï¼Œç”¨äºç»„ç»‡ä»£ç ã€‚</li>
<li><strong><code>def twoSum(self, nums, target)</code></strong>ï¼šå®šä¹‰ä¸€ä¸ªæ–¹æ³• <code>twoSum</code>ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<ul>
<li><code>nums</code>ï¼šä¸€ä¸ªåˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ï¼Œä¾‹å¦‚ <code>[2, 7, 11, 15]</code>ã€‚</li>
<li><code>target</code>ï¼šç›®æ ‡å€¼ï¼Œä¾‹å¦‚ <code>9</code>ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-å¤–å±‚å¾ªç¯"><a href="#2-å¤–å±‚å¾ªç¯" class="headerlink" title="2. å¤–å±‚å¾ªç¯"></a>2. å¤–å±‚å¾ªç¯</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>range(len(nums))</code></strong>ï¼šç”Ÿæˆä» <code>0</code> åˆ° <code>len(nums)-1</code> çš„æ•°å­—åºåˆ—ã€‚</li>
<li><strong><code>i</code></strong>ï¼šå¤–å±‚å¾ªç¯å˜é‡ï¼Œè¡¨ç¤ºå½“å‰å›ºå®šçš„ç¬¬ä¸€ä¸ªæ•°çš„ç´¢å¼•ã€‚</li>
</ul>
<p>è¿™é‡Œ <code>len(nums)</code>çš„å€¼ä¸º4,æ‰€ä»¥ <code>range(len(nums))</code> å°±æ˜¯0ï¼Œ1ï¼Œ2ï¼Œ3</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">range(start, stop, step) æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºç”Ÿæˆä¸€ç³»åˆ—æ•´æ•°ã€‚å®ƒçš„å‚æ•°æœ‰ä¸‰ä¸ªï¼š</span><br><span class="line"></span><br><span class="line">start ï¼ˆå¯é€‰ï¼‰ï¼šåºåˆ—çš„èµ·å§‹å€¼ï¼Œé»˜è®¤ä¸º 0ã€‚</span><br><span class="line"></span><br><span class="line">stop ï¼šåºåˆ—çš„ç»“æŸå€¼ï¼ˆä¸åŒ…æ‹¬è¿™ä¸ªå€¼ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">step ï¼ˆå¯é€‰ï¼‰ï¼šæ­¥é•¿ï¼Œé»˜è®¤ä¸º 1ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">for i in range(5):  # ç­‰ä»·äº range(0, 5)</span><br><span class="line">    print(i)</span><br><span class="line">è¾“å‡ºï¼š0 1 2 3 4</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="3-å†…å±‚å¾ªç¯"><a href="#3-å†…å±‚å¾ªç¯" class="headerlink" title="3. å†…å±‚å¾ªç¯"></a>3. å†…å±‚å¾ªç¯</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, <span class="built_in">len</span>(nums)):</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>range(i + 1, len(nums))</code></strong>ï¼šç”Ÿæˆä» <code>i+1</code> åˆ° <code>len(nums)-1</code> çš„æ•°å­—åºåˆ—ã€‚</li>
<li><strong><code>j</code></strong>ï¼šå†…å±‚å¾ªç¯å˜é‡ï¼Œè¡¨ç¤ºç¬¬äºŒä¸ªæ•°çš„ç´¢å¼•ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šä» <code>i+1</code> å¼€å§‹ï¼Œç¡®ä¿ä¸ä¼šé‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ã€‚</li>
</ul>
<hr>
<h4 id="4-æ£€æŸ¥æ¡ä»¶"><a href="#4-æ£€æŸ¥æ¡ä»¶" class="headerlink" title="4. æ£€æŸ¥æ¡ä»¶"></a>4. æ£€æŸ¥æ¡ä»¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> nums[i] + nums[j] == target:</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>nums[i]</code> å’Œ <code>nums[j]</code></strong>ï¼šåˆ†åˆ«è¡¨ç¤ºæ•°ç»„ä¸­ç´¢å¼•ä¸º <code>i</code> å’Œ <code>j</code> çš„å…ƒç´ ã€‚</li>
<li><strong><code>nums[i] + nums[j] == target</code></strong>ï¼šæ£€æŸ¥è¿™ä¸¤ä¸ªæ•°çš„å’Œæ˜¯å¦ç­‰äºç›®æ ‡å€¼ã€‚</li>
</ul>
<hr>
<h4 id="5-è¿”å›ç»“æœ"><a href="#5-è¿”å›ç»“æœ" class="headerlink" title="5. è¿”å›ç»“æœ"></a>5. è¿”å›ç»“æœ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> [i, j]</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>[i, j]</code></strong>ï¼šå¦‚æœæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œè¿”å›å®ƒä»¬çš„ç´¢å¼•ã€‚</li>
<li><strong><code>return</code></strong>ï¼šç»“æŸå‡½æ•°å¹¶è¿”å›ç»“æœã€‚</li>
</ul>
<hr>
<h4 id="6-é»˜è®¤è¿”å›ç©ºåˆ—è¡¨"><a href="#6-é»˜è®¤è¿”å›ç©ºåˆ—è¡¨" class="headerlink" title="6. é»˜è®¤è¿”å›ç©ºåˆ—è¡¨"></a>6. é»˜è®¤è¿”å›ç©ºåˆ—è¡¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ <code>[]</code>ã€‚</li>
<li>æ ¹æ®é¢˜ç›®å‡è®¾ï¼Œè¿™ç§æƒ…å†µä¸ä¼šå‘ç”Ÿã€‚</li>
</ul>
<hr>
<h2 id="æ–¹æ³•-2ï¼šå“ˆå¸Œè¡¨æ–¹æ³•"><a href="#æ–¹æ³•-2ï¼šå“ˆå¸Œè¡¨æ–¹æ³•" class="headerlink" title="æ–¹æ³• 2ï¼šå“ˆå¸Œè¡¨æ–¹æ³•"></a>æ–¹æ³• 2ï¼šå“ˆå¸Œè¡¨æ–¹æ³•</h2><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å“ˆå¸Œè¡¨æ–¹æ³•æ˜¯ä¸€ç§æ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨ä¸€ä¸ªå­—å…¸ï¼ˆå“ˆå¸Œè¡¨ï¼‰æ¥å­˜å‚¨å·²ç»è®¿é—®è¿‡çš„æ•°å­—åŠå…¶ç´¢å¼•ã€‚åœ¨éå†æ•°ç»„çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºå½“å‰æ•°å­— <code>num</code>ï¼Œè®¡ç®—å®ƒçš„è¡¥æ•° <code>complement = target - num</code>ï¼Œç„¶åæ£€æŸ¥è¡¥æ•°æ˜¯å¦å·²ç»åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™æ‰¾åˆ°äº†ä¸¤ä¸ªæ•°ï¼›å¦åˆ™ï¼Œå°†å½“å‰æ•°å­—å­˜å…¥å“ˆå¸Œè¡¨ã€‚</p>
<h3 id="å®ç°æ­¥éª¤-1"><a href="#å®ç°æ­¥éª¤-1" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ <code>num_to_index</code>ï¼Œç”¨äºå­˜å‚¨å·²è®¿é—®çš„æ•°å­—åŠå…¶ç´¢å¼•ã€‚</li>
<li>éå†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªæ•°å­— <code>num</code>ï¼š<ul>
<li>è®¡ç®—è¡¥æ•° <code>complement = target - num</code>ã€‚</li>
<li>æ£€æŸ¥è¡¥æ•°æ˜¯å¦å·²ç»åœ¨å­—å…¸ä¸­ï¼š<ul>
<li>å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›è¡¥æ•°çš„ç´¢å¼•å’Œå½“å‰æ•°å­—çš„ç´¢å¼•ã€‚</li>
<li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†å½“å‰æ•°å­—åŠå…¶ç´¢å¼•å­˜å…¥å­—å…¸ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>æ ¹æ®é¢˜ç›®å‡è®¾ï¼Œä¸€å®šä¼šæ‰¾åˆ°ç­”æ¡ˆï¼Œå› æ­¤ä¸éœ€è¦å¤„ç†æ‰¾ä¸åˆ°çš„æƒ…å†µã€‚</li>
</ol>
<h3 id="Python-å®ç°-1"><a href="#Python-å®ç°-1" class="headerlink" title="Python å®ç°"></a>Python å®ç°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums, target</span>):</span><br><span class="line">        <span class="comment"># åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ç”¨äºå­˜å‚¨å·²è®¿é—®çš„å…ƒç´ åŠå…¶ç´¢å¼•</span></span><br><span class="line">        num_to_index = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> i, num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            <span class="comment"># è®¡ç®—éœ€è¦çš„å¦ä¸€ä¸ªæ•°</span></span><br><span class="line">            complement = target - num</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ£€æŸ¥è¿™ä¸ªæ•°æ˜¯å¦å·²ç»åœ¨å“ˆå¸Œè¡¨ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> complement <span class="keyword">in</span> num_to_index:</span><br><span class="line">                <span class="comment"># å¦‚æœæ‰¾åˆ°ï¼Œè¿”å›ç»“æœ</span></span><br><span class="line">                <span class="keyword">return</span> [num_to_index[complement], i]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å¦åˆ™ï¼Œå°†å½“å‰æ•°å’Œå…¶ç´¢å¼•å­˜å…¥å“ˆå¸Œè¡¨</span></span><br><span class="line">            num_to_index[num] = i</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> []  <span class="comment"># æ ¹æ®é¢˜ç›®å‡è®¾ï¼Œè¿™é‡Œä¸ä¼šæ‰§è¡Œåˆ°</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹è¿è¡Œ-1"><a href="#ç¤ºä¾‹è¿è¡Œ-1" class="headerlink" title="ç¤ºä¾‹è¿è¡Œ"></a>ç¤ºä¾‹è¿è¡Œ</h3><h4 id="è¾“å…¥ï¼šnums-2-7-11-15-target-9-1"><a href="#è¾“å…¥ï¼šnums-2-7-11-15-target-9-1" class="headerlink" title="è¾“å…¥ï¼šnums = [2, 7, 11, 15], target = 9"></a>è¾“å…¥ï¼š<code>nums = [2, 7, 11, 15], target = 9</code></h4><ul>
<li>ç¬¬ä¸€æ­¥ï¼š<code>num = 2, complement = 9 - 2 = 7</code>ï¼Œå“ˆå¸Œè¡¨ä¸ºç©ºï¼Œå­˜å…¥ <code>&#123;2: 0&#125;</code>ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼š<code>num = 7, complement = 9 - 7 = 2</code>ï¼Œå‘ç° <code>2</code> åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å› <code>[0, 1]</code>ã€‚</li>
</ul>
<h4 id="è¾“å…¥ï¼šnums-3-2-4-target-6-1"><a href="#è¾“å…¥ï¼šnums-3-2-4-target-6-1" class="headerlink" title="è¾“å…¥ï¼šnums = [3, 2, 4], target = 6"></a>è¾“å…¥ï¼š<code>nums = [3, 2, 4], target = 6</code></h4><ul>
<li>ç¬¬ä¸€æ­¥ï¼š<code>num = 3, complement = 6 - 3 = 3</code>ï¼Œå“ˆå¸Œè¡¨ä¸ºç©ºï¼Œå­˜å…¥ <code>&#123;3: 0&#125;</code>ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼š<code>num = 2, complement = 6 - 2 = 4</code>ï¼Œå“ˆå¸Œè¡¨ä¸º <code>&#123;3: 0&#125;</code>ï¼Œå­˜å…¥ <code>&#123;3: 0, 2: 1&#125;</code>ã€‚</li>
<li>ç¬¬ä¸‰æ­¥ï¼š<code>num = 4, complement = 6 - 4 = 2</code>ï¼Œå‘ç° <code>2</code> åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å› <code>[1, 2]</code>ã€‚</li>
</ul>
<hr>
<h3 id="é€è¡Œä»£ç è§£æ-1"><a href="#é€è¡Œä»£ç è§£æ-1" class="headerlink" title="é€è¡Œä»£ç è§£æ"></a>é€è¡Œä»£ç è§£æ</h3><h4 id="1-åˆ›å»ºå“ˆå¸Œè¡¨"><a href="#1-åˆ›å»ºå“ˆå¸Œè¡¨" class="headerlink" title="1. åˆ›å»ºå“ˆå¸Œè¡¨"></a>1. åˆ›å»ºå“ˆå¸Œè¡¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num_to_index = &#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>num_to_index</code></strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç©ºå­—å…¸ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼Œç”¨äºå­˜å‚¨å·²ç»è®¿é—®è¿‡çš„æ•°å­—åŠå…¶ç´¢å¼•ã€‚</li>
<li>é”®æ˜¯æ•°å­—ï¼Œå€¼æ˜¯å®ƒçš„ç´¢å¼•ã€‚</li>
</ul>
<hr>
<h4 id="2-éå†æ•°ç»„"><a href="#2-éå†æ•°ç»„" class="headerlink" title="2. éå†æ•°ç»„"></a>2. éå†æ•°ç»„</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>enumerate(nums)</code></strong>ï¼šåŒæ—¶è·å–æ•°ç»„çš„ç´¢å¼•å’Œå¯¹åº”çš„å€¼ã€‚</li>
<li><strong><code>i</code></strong>ï¼šå½“å‰æ•°å­—çš„ç´¢å¼•ã€‚</li>
<li><strong><code>num</code></strong>ï¼šå½“å‰æ•°å­—çš„å€¼ã€‚</li>
</ul>
<p><code>enumerate()</code> ä¸»è¦ç”¨äºåœ¨éå†å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰æ—¶ï¼ŒåŒæ—¶è·å–å…ƒç´ çš„ç´¢å¼•å’Œå€¼ã€‚å®ƒè¿”å›ä¸€ä¸ªæšä¸¾å¯¹è±¡ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªåŒ…å«ç´¢å¼•å’Œå¯¹åº”å€¼çš„å…ƒç»„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">enumerate(iterable, start=0)</span><br><span class="line">iterable : è¦éå†çš„å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚</span><br><span class="line">start ï¼ˆå¯é€‰ï¼‰: æšä¸¾çš„èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤ä¸º 0ã€‚å¯ä»¥é€šè¿‡è®¾ç½® start å‚æ•°æ¥æŒ‡å®šä»å“ªä¸ªç´¢å¼•å¼€å§‹è®¡æ•°ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">fruits = [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;cherry&#x27;]</span><br><span class="line"></span><br><span class="line">for index, fruit in enumerate(fruits):</span><br><span class="line">    print(f&quot;Index: &#123;index&#125;, Fruit: &#123;fruit&#125;&quot;)</span><br><span class="line">    </span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">Index: 0, Fruit: apple</span><br><span class="line">Index: 1, Fruit: banana</span><br><span class="line">Index: 2, Fruit: cherry</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="3-è®¡ç®—è¡¥æ•°"><a href="#3-è®¡ç®—è¡¥æ•°" class="headerlink" title="3. è®¡ç®—è¡¥æ•°"></a>3. è®¡ç®—è¡¥æ•°</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">complement = target - num</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>complement</code></strong>ï¼šè¿™æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„â€œè¡¥æ•°â€ï¼Œå³ <code>target - num</code>ã€‚</li>
<li>å¦‚æœå½“å‰æ•°å­— <code>num</code> å’ŒæŸä¸ªæ•°å­—çš„å’Œç­‰äº <code>target</code>ï¼Œé‚£ä¹ˆé‚£ä¸ªæ•°å­—å°±æ˜¯ <code>complement</code>ã€‚</li>
</ul>
<hr>
<h4 id="4-æ£€æŸ¥è¡¥æ•°æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­"><a href="#4-æ£€æŸ¥è¡¥æ•°æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­" class="headerlink" title="4. æ£€æŸ¥è¡¥æ•°æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­"></a>4. æ£€æŸ¥è¡¥æ•°æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> complement <span class="keyword">in</span> num_to_index:</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>complement in num_to_index</code></strong>ï¼šæ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨é”® <code>complement</code>ã€‚</li>
<li>å¦‚æœå­˜åœ¨ï¼Œè¯´æ˜æˆ‘ä»¬æ‰¾åˆ°äº†ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ã€‚</li>
</ul>
<hr>
<h4 id="5-è¿”å›ç»“æœ-1"><a href="#5-è¿”å›ç»“æœ-1" class="headerlink" title="5. è¿”å›ç»“æœ"></a>5. è¿”å›ç»“æœ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> [num_to_index[complement], i]</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>num_to_index[complement]</code></strong>ï¼šä»å­—å…¸ä¸­å–å‡º <code>complement</code> å¯¹åº”çš„ç´¢å¼•ã€‚</li>
<li><strong><code>i</code></strong>ï¼šå½“å‰æ•°å­—çš„ç´¢å¼•ã€‚</li>
<li>è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªç´¢å¼•çš„åˆ—è¡¨ã€‚</li>
</ul>
<hr>
<h4 id="6-æ›´æ–°å“ˆå¸Œè¡¨"><a href="#6-æ›´æ–°å“ˆå¸Œè¡¨" class="headerlink" title="6. æ›´æ–°å“ˆå¸Œè¡¨"></a>6. æ›´æ–°å“ˆå¸Œè¡¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num_to_index[num] = i</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœè¡¥æ•°ä¸å­˜åœ¨ï¼Œåˆ™å°†å½“å‰æ•°å­—åŠå…¶ç´¢å¼•å­˜å…¥å­—å…¸ã€‚</li>
<li><strong><code>num_to_index[num] = i</code></strong>ï¼šå°†å½“å‰æ•°å­—ä½œä¸ºé”®ï¼Œç´¢å¼•ä½œä¸ºå€¼å­˜å…¥å­—å…¸ã€‚</li>
</ul>
<hr>
<h4 id="7-é»˜è®¤è¿”å›ç©ºåˆ—è¡¨"><a href="#7-é»˜è®¤è¿”å›ç©ºåˆ—è¡¨" class="headerlink" title="7. é»˜è®¤è¿”å›ç©ºåˆ—è¡¨"></a>7. é»˜è®¤è¿”å›ç©ºåˆ—è¡¨</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> []</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ <code>[]</code>ã€‚</li>
<li>æ ¹æ®é¢˜ç›®å‡è®¾ï¼Œè¿™ç§æƒ…å†µä¸ä¼šå‘ç”Ÿã€‚</li>
</ul>
<hr>
]]></content>
      <categories>
        <category>ä»£ç å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title>About Me</title>
    <url>/about/index.html</url>
    <content><![CDATA[<h2 id="ğŸ‘‹-ä½ å¥½ï¼Œæˆ‘æ˜¯-Evan-Zhongï¼"><a href="#ğŸ‘‹-ä½ å¥½ï¼Œæˆ‘æ˜¯-Evan-Zhongï¼" class="headerlink" title="ğŸ‘‹ ä½ å¥½ï¼Œæˆ‘æ˜¯ Evan Zhongï¼"></a>ğŸ‘‹ ä½ å¥½ï¼Œæˆ‘æ˜¯ Evan Zhongï¼</h2><ul>
<li>ç›®å‰æ˜¯ä¸œå—å¤§å­¦ç ”ç©¶ç”Ÿåœ¨è¯»</li>
<li>ç ”ç©¶æ–¹å‘æ˜¯å¤šæ¨¡æ€å¤§æ¨¡å‹ &#x2F; Graph RAG &#x2F; LLMçš„Agentæ„å»º</li>
</ul>
<h2 id="ğŸ”§-ç§‘ç ”ä¸é¡¹ç›®ç»å†"><a href="#ğŸ”§-ç§‘ç ”ä¸é¡¹ç›®ç»å†" class="headerlink" title="ğŸ”§ ç§‘ç ”ä¸é¡¹ç›®ç»å†"></a>ğŸ”§ ç§‘ç ”ä¸é¡¹ç›®ç»å†</h2><h3 id="é¢å‘ç”µå­å™¨ä»¶datasheetçš„å¤šæ¨¡æ€çŸ¥è¯†å›¾è°±æ„å»ºä¸ç¤¾åŒºåŒ–å›¾æ£€ç´¢å¢å¼ºæŸ¥è¯¢"><a href="#é¢å‘ç”µå­å™¨ä»¶datasheetçš„å¤šæ¨¡æ€çŸ¥è¯†å›¾è°±æ„å»ºä¸ç¤¾åŒºåŒ–å›¾æ£€ç´¢å¢å¼ºæŸ¥è¯¢" class="headerlink" title="é¢å‘ç”µå­å™¨ä»¶datasheetçš„å¤šæ¨¡æ€çŸ¥è¯†å›¾è°±æ„å»ºä¸ç¤¾åŒºåŒ–å›¾æ£€ç´¢å¢å¼ºæŸ¥è¯¢"></a>é¢å‘ç”µå­å™¨ä»¶datasheetçš„<strong>å¤šæ¨¡æ€çŸ¥è¯†å›¾è°±</strong>æ„å»ºä¸<strong>ç¤¾åŒºåŒ–å›¾æ£€ç´¢å¢å¼ºæŸ¥è¯¢</strong></h3><ul>
<li><strong>åŸºäºDoclingçš„å¤šæ¨¡æ€æ–‡æ¡£è§£æ„ä¸è¯­ä¹‰ä¿®å¤</strong>ï¼šåˆ©ç”¨<strong>å¤šæ¨¡æ€VLM</strong>å¯¹å›¾ç‰‡è¿›è¡Œä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ä¿¡æ¯æŠ½å–ï¼Œç”Ÿæˆå‡†ç¡®çš„å›¾ç‰‡ä¿¡æ¯ä¸å…³è”å®ä½“æŠ½å–ã€‚</li>
<li><strong>é‡‡ç”¨åŒæºåŒè§†è§’çš„è¯­ä¹‰åˆ†å—ç­–ç•¥</strong>ï¼Œå°† Markdown æ–‡æ¡£æ™ºèƒ½åœ°æ‹†åˆ†ä¸ºæœ€å°çš„ã€æœ‰æ„ä¹‰çš„â€œç»“æ„å—â€ï¼Œæ ¹æ®æ–‡æ¡£ä¸­æœ€å¤§çš„â€œç»“æ„å—â€æ¥åŠ¨æ€è®¡ç®—ä¸€ä¸ªåˆé€‚çš„åˆ†å—å°ºå¯¸ï¼Œä¿æŒ chunk è¯­ä¹‰ç»“æ„å®Œæ•´ä¸”é•¿åº¦åˆç†ã€‚åŒæ—¶æ„å»º<strong>åˆ†å—è§†è§’1</strong>ï¼šçº¯æ–‡æœ¬å»å›¾åˆ†å—ï¼Œå‡å™ªéŸ³ï¼Œæœ‰åˆ©äºæ¨¡å‹èšç„¦ï¼Œç²¾ç¡®æŠ½å–å‡ºå‹å·å®ä½“ï¼›<strong>åˆ†å—è§†è§’2</strong>ï¼šä¿ç•™å›¾ç‰‡ï¼Œä¸ºæ¯ä¸ªchunkåˆ›å»ºä¸€ä¸ªåŒ…å«å…¶å‰åç›¸é‚»chunkå†…å®¹çš„æ»‘åŠ¨ã€‚è¿™äº›chunkæ‹¥æœ‰æ›´å®Œæ•´çš„è¯­ä¹‰ï¼Œç”¨äºæŠ½å–å™¨ä»¶å‚æ•°ã€‚</li>
<li><strong>é€šè¿‡LLMé©±åŠ¨çš„Agentå®ä½“å†³ç­–ä¸èåˆå®ç°ç”µå­å™¨ä»¶çš„çŸ¥è¯†å›¾è°±æ„å»º</strong>ï¼šåˆ©ç”¨LLMé©±åŠ¨çš„å‹å·åç§°æ¶ˆæ­§ä¸èåˆå®ç°å™¨ä»¶çš„å‡†ç¡®æå–ï¼ŒåŸºäºåŒè§†è§’çš„æ•°æ®èåˆä¸å™¨ä»¶å‚æ•°æŠ½å–ï¼Œåˆ©ç”¨LLMé©±åŠ¨çš„å†²çªå‚æ•°æ™ºèƒ½å†³ç­–æœºåˆ¶ï¼Œå®ç°å‡†ç¡®æ„å»ºè§„èŒƒåŒ–çš„å¤šæ¨¡æ€ç”µå­å™¨ä»¶çŸ¥è¯†å›¾è°±ã€‚</li>
<li><strong>é‡‡ç”¨ç¤¾åŒºåŒ–æ„å»ºçš„å›¾è°±æ£€ç´¢å¢å¼ºç”Ÿæˆ</strong>ï¼šå¼•å…¥â€œç¤¾åŒºâ€åˆ’åˆ†çš„å™¨ä»¶å›¾è°±æ£€ç´¢ï¼Œç±»ä¼¼äº GraphRAG çš„ç¤¾åŒºå±‚æ¬¡ç´¢å¼•æ€æƒ³ã€‚é’ˆå¯¹ç”µå­é¢†åŸŸçŸ¥è¯†å„å­é¢†åŸŸçš„ç‰¹ç‚¹æ„å»ºä¸åŒçš„ç¤¾åŒºï¼›é€šè¿‡Queryæ”¹å†™ç†è§£ç”¨æˆ·æ„å›¾å¹¶ç”¨é¢†åŸŸæœ¯è¯­è¡¨è¾¾é‡å†™&#x2F;æ‰©å†™æé—®ï¼›æä¾›LLMè§„åˆ’å›¾è°±æ£€ç´¢çš„è·¯å¾„ï¼šç¡®å®šä»å“ªä¸ªç¤¾åŒº&#x2F;å®ä½“å‡ºå‘ã€æ²¿å“ªäº›å…³ç³»éå†ï¼Œå®ç°å¤šè·³è·¯å¾„æ¨ç†ï¼›é‡‡ç”¨<strong>æ··åˆè‡ªé€‚åº”å‰ªæï¼ˆBeam Search + è¯­ä¹‰å‰ªæï¼‰</strong>ï¼Œè·å–æ›´ä¸ºç²¾å‡†çš„æ£€ç´¢è·¯å¾„ï¼Œé¿å…å¤šè·³æ¨ç†æ—¶çš„è·¯å¾„çš„ç»„åˆçˆ†ç‚¸ã€‚</li>
</ul>
<h3 id="åŸºäº-Django-MySQL-æ„å»ºçš„ç”µå¼§æ•…éšœæ•°æ®ç®¡ç†ä¸åˆ†æå¹³å°ï¼ˆå…¨æ ˆå¼€å‘ï¼‰"><a href="#åŸºäº-Django-MySQL-æ„å»ºçš„ç”µå¼§æ•…éšœæ•°æ®ç®¡ç†ä¸åˆ†æå¹³å°ï¼ˆå…¨æ ˆå¼€å‘ï¼‰" class="headerlink" title="åŸºäº Django + MySQL æ„å»ºçš„ç”µå¼§æ•…éšœæ•°æ®ç®¡ç†ä¸åˆ†æå¹³å°ï¼ˆå…¨æ ˆå¼€å‘ï¼‰"></a>åŸºäº <strong>Django</strong> + <strong>MySQL</strong> æ„å»ºçš„ç”µå¼§æ•…éšœæ•°æ®ç®¡ç†ä¸åˆ†æå¹³å°ï¼ˆå…¨æ ˆå¼€å‘ï¼‰</h3><ul>
<li>å‰ç«¯ä½¿ç”¨ <strong>HTML5</strong> &#x2F; <strong>CSS3</strong> &#x2F; <strong>JavaScript</strong> + <strong>Fetch API</strong> å®ç°äº¤äº’å¼é¡µé¢ä¸ <strong>RESTful API</strong> é€šä¿¡ã€‚</li>
<li>åç«¯åŸºäº <strong>Django</strong> æ„å»ºè‡ªå®šä¹‰ç”¨æˆ·ç³»ç»Ÿï¼Œä½¿ç”¨ <strong>ORM</strong> ç®¡ç†ç”¨æˆ·ã€ç”µå¼§æ•°æ®ã€ç®—æ³•æ¨¡å‹ä¸æµ‹è¯•ç»“æœï¼Œå®ç°ç”¨æˆ·è®¤è¯ã€æ•°æ®ä¸Šä¼ ã€ç‰¹å¾æå–ã€ç®—æ³•æ¨¡å‹è¯„ä¼°ä¸å¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚</li>
<li>è®¾è®¡ <strong>FFT</strong> å®ç°ç”µå¼§æ•…éšœä¿¡å·çš„ç‰¹å¾å·¥ç¨‹ï¼ŒåŒ…æ‹¬æ—¶åŸŸåˆ†æã€é¢‘åŸŸåˆ†æå’Œå°æ³¢åˆ†æã€‚</li>
<li>è®¾è®¡å®ç°å®Œå–„çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç”¨æˆ·è®¤è¯ã€ä¸ªäººèµ„æ–™ç®¡ç†ç­‰åŠŸèƒ½ã€‚</li>
<li>æ”¯æŒä¼ä¸šä¸ç”¨æˆ·è‡ªè¡Œä¸Šä¼ ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼ˆå‡†ç¡®ç‡ã€F1 åˆ†æ•°ã€æ··æ·†çŸ©é˜µç­‰ã€è¯¯åˆ¤ç‡ï¼‰ã€‚</li>
</ul>
<h3 id="è¡¥è‹—ç§»æ ½æœºå™¨äººï¼ˆ2020-10-2020-12ï¼‰"><a href="#è¡¥è‹—ç§»æ ½æœºå™¨äººï¼ˆ2020-10-2020-12ï¼‰" class="headerlink" title="è¡¥è‹—ç§»æ ½æœºå™¨äººï¼ˆ2020&#x2F;10 - 2020&#x2F;12ï¼‰"></a>è¡¥è‹—ç§»æ ½æœºå™¨äººï¼ˆ2020&#x2F;10 - 2020&#x2F;12ï¼‰</h3><ul>
<li>è®¾è®¡æœºæ¢°è‡‚ç»“æ„</li>
<li>ä¸»æ§ STM32 + ç”µæœºé©±åŠ¨ç”µè·¯è®¾è®¡</li>
<li>è¡Œèµ°ç¨‹åºç¼–å†™ï¼ˆåŸºäºè¶…å£°æ³¢ä¼ æ„Ÿå™¨ï¼‰</li>
</ul>
<h3 id="ä¸‰ç›¸-AC-DC-å˜æ¢ç”µè·¯ï¼ˆ2021-11ï¼‰"><a href="#ä¸‰ç›¸-AC-DC-å˜æ¢ç”µè·¯ï¼ˆ2021-11ï¼‰" class="headerlink" title="ä¸‰ç›¸ AC-DC å˜æ¢ç”µè·¯ï¼ˆ2021&#x2F;11ï¼‰"></a>ä¸‰ç›¸ AC-DC å˜æ¢ç”µè·¯ï¼ˆ2021&#x2F;11ï¼‰</h3><ul>
<li>ä¸‰ç›¸ PWM æ•´æµåŒé—­ç¯ç”µè·¯è®¾è®¡</li>
<li>MATLAB ä»¿çœŸå»ºæ¨¡ä¸éªŒè¯</li>
<li>å®ç‰©ç”µè·¯ç„Šæ¥è°ƒè¯•</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>category</title>
    <url>/category/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/js/code-copy.js</url>
    <content><![CDATA[document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('figure.highlight').forEach((figure) => {
    if (figure.querySelector('.copy-btn')) return;

    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.title = 'å¤åˆ¶';

    // ç¼©å°åçš„å¤åˆ¶å›¾æ ‡ï¼ˆ14*15ï¼‰
    const copyIcon = `
      <svg xmlns="http://www.w3.org/2000/svg" height="14" width="15" viewBox="0 0 24 24" fill="white">
        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
      </svg>
    `;

    // æˆåŠŸåæ˜¾ç¤ºçš„å‹¾ï¼ˆ14*15ï¼‰
    const checkIcon = `
      <svg xmlns="http://www.w3.org/2000/svg" height="14" width="15" viewBox="0 0 24 24" fill="#00cc66">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
      </svg>
    `;

    copyBtn.innerHTML = copyIcon;

    // æŒ‰é’®æ ·å¼ï¼ˆæµ…ç°åº•ã€ç¼©å°ï¼‰
    Object.assign(copyBtn.style, {
      position: 'absolute',
      top: '8px',
      right: '8px',
      padding: '4px',
      background: '#aaa', // æµ…ç°èƒŒæ™¯ âœ…
      border: 'none',
      borderRadius: '4px',
      cursor: 'pointer',
      opacity: '0.85',
      zIndex: 1000,
      transition: 'opacity 0.2s ease',
      boxShadow: '0 1px 3px rgba(0, 0, 0, 0.15)'
    });

    copyBtn.addEventListener('mouseover', () => copyBtn.style.opacity = '1');
    copyBtn.addEventListener('mouseout', () => copyBtn.style.opacity = '0.85');

    copyBtn.addEventListener('click', () => {
      const code = figure.querySelector('td.code');
      const text = code ? code.innerText : '';
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.innerHTML = checkIcon;
        setTimeout(() => {
          copyBtn.innerHTML = copyIcon;
        }, 1000);
      });
    });

    figure.style.position = 'relative';
    figure.appendChild(copyBtn);
  });
});
]]></content>
  </entry>
  <entry>
    <title>tag</title>
    <url>/tag/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
