<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Add Copy Button to Code Blocks in Hexo</title>
    <url>/2025/03/26/Add-Copy-Button-to-Code-Blocks-in-Hexo/</url>
    <content><![CDATA[<h1 id="Hexo-ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®"><a href="#Hexo-ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®" class="headerlink" title="Hexo ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®"></a>Hexo ä¸ºä»£ç å—æ·»åŠ å¤åˆ¶åŠŸèƒ½æŒ‰é’®</h1><p>æœ¬æ–‡è¯¦ç»†è®°å½•å¦‚ä½•åœ¨ Hexo ä¸­ä¸ºä»£ç å—æ·»åŠ ä¸€ä¸ª â€œå¤åˆ¶â€ æŒ‰é’®ï¼Œå®ç°ä¸€é”®å¤åˆ¶ä»£ç åŠŸèƒ½ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜"><a href="#ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜" class="headerlink" title="ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜"></a>ç»“æ„è¦æ±‚ä¸é€‚é…è¯´æ˜</h2><p>æœ¬å¤åˆ¶åŠŸèƒ½è„šæœ¬é€‚ç”¨äºä»¥ä¸‹ç»“æ„çš„ä»£ç å—ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">figure</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;gutter&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;code&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>...<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ Hexo ä¸­å¤šæ•°ä¸»é¢˜ï¼ˆåŒ…æ‹¬ Chicã€NexTã€Butterfly ç­‰ï¼‰é»˜è®¤çš„ä»£ç å—æ¸²æŸ“ç»“æ„ã€‚</p>
<h3 id="å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ"><a href="#å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ" class="headerlink" title="å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ"></a>å¦‚ä½•æ£€æŸ¥è‡ªå·±ä¸»é¢˜çš„ç»“æ„æ˜¯å¦ç¬¦åˆï¼Ÿ</h3><ol>
<li>å¯åŠ¨æœ¬åœ°åšå®¢ï¼š<code>hexo s</code></li>
<li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åšå®¢é¡µé¢</li>
<li>å³é”®ä»£ç å— â†’ ç‚¹å‡»â€œæ£€æŸ¥â€</li>
<li>æŸ¥çœ‹ä»£ç å—çš„å¤–å±‚ HTML æ ‡ç­¾æ˜¯å¦ä¸º <code>figure.highlight</code> </li>
<li>æˆ–è€…ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡» <code>F12</code> ï¼Œåœ¨ <code>Elements</code> ä¸­ç›´æ¥æœç´¢æ˜¯å¦å«æœ‰ <code>figure.highlight</code></li>
</ol>
<hr>
<h2 id="1-åˆ›å»º-JavaScript-è„šæœ¬æ–‡ä»¶"><a href="#1-åˆ›å»º-JavaScript-è„šæœ¬æ–‡ä»¶" class="headerlink" title="1. åˆ›å»º JavaScript è„šæœ¬æ–‡ä»¶"></a><strong>1. åˆ›å»º JavaScript è„šæœ¬æ–‡ä»¶</strong></h2><p>åœ¨ Hexo åšå®¢é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º JS è„šæœ¬æ–‡ä»¶ <code>code-copy.js</code> ,å¦‚æœæ²¡æœ‰jsæ–‡ä»¶å¤¹åˆ™è‡ªå·±åˆ›å»ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source/js/code-copy.js</span><br></pre></td></tr></table></figure>

<p>å¹¶å¡«å…¥ä»¥ä¸‹å®Œæ•´å†…å®¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;figure.highlight&#x27;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">figure</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;.copy-btn&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> copyBtn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="property">className</span> = <span class="string">&#x27;copy-btn&#x27;</span>;</span><br><span class="line">    copyBtn.<span class="property">title</span> = <span class="string">&#x27;å¤åˆ¶&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¼©å°åçš„å¤åˆ¶å›¾æ ‡ï¼ˆ14*15ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> copyIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;white&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆåŠŸåæ˜¾ç¤ºçš„å‹¾ï¼ˆ14*15ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> checkIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;#00cc66&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰é’®æ ·å¼ï¼ˆæµ…ç°åº•ã€ç¼©å°ï¼‰</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(copyBtn.<span class="property">style</span>, &#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">      <span class="attr">top</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">padding</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">background</span>: <span class="string">&#x27;#aaa&#x27;</span>, </span><br><span class="line">      <span class="attr">border</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">      <span class="attr">borderRadius</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">cursor</span>: <span class="string">&#x27;pointer&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="string">&#x27;0.85&#x27;</span>,</span><br><span class="line">      <span class="attr">zIndex</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="attr">transition</span>: <span class="string">&#x27;opacity 0.2s ease&#x27;</span>,</span><br><span class="line">      <span class="attr">boxShadow</span>: <span class="string">&#x27;0 1px 3px rgba(0, 0, 0, 0.15)&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0.85&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> code = figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;td.code&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> text = code ? code.<span class="property">innerText</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(text).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        copyBtn.<span class="property">innerHTML</span> = checkIcon;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    figure.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">    figure.<span class="title function_">appendChild</span>(copyBtn);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-JS-æ–‡ä»¶"><a href="#2-åœ¨é¡µé¢åº•éƒ¨å¼•å…¥-JS-æ–‡ä»¶" class="headerlink" title="2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ JS æ–‡ä»¶"></a><strong>2. åœ¨é¡µé¢åº•éƒ¨å¼•å…¥ JS æ–‡ä»¶</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/footer.ejs</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>&lt;/footer&gt;</code> æ ‡ç­¾ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/code-copy.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å¯ä»¥ç¡®ä¿å¤åˆ¶æŒ‰é’®è„šæœ¬åœ¨é¡µé¢åŠ è½½å®Œæ¯•åè‡ªåŠ¨è¿è¡Œã€‚</p>
<hr>
<h2 id="3-ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ"><a href="#3-ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ" class="headerlink" title="3. ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ"></a><strong>3. ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆæ•ˆæœ</strong></h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—® <code>http://localhost:4000</code>ï¼ŒæŸ¥çœ‹ä»»æ„ä¸€æ®µä»£ç å—ï¼Œå³ä¸Šè§’åº”å‡ºç°å¤åˆ¶å›¾æ ‡æŒ‰é’®ã€‚</p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Function Calling</title>
    <url>/2025/03/21/Function-Calling/</url>
    <content><![CDATA[<h1 id="Qwen-Function-Calling-è¯¦ç»†è§£æ"><a href="#Qwen-Function-Calling-è¯¦ç»†è§£æ" class="headerlink" title="Qwen Function Calling è¯¦ç»†è§£æ"></a>Qwen Function Calling è¯¦ç»†è§£æ</h1><hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="1-Function-Calling-ç®€ä»‹"><a href="#1-Function-Calling-ç®€ä»‹" class="headerlink" title="1. Function Calling ç®€ä»‹"></a><strong>1. Function Calling ç®€ä»‹</strong></h2><p>Function Calling å…è®¸ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰åœ¨å›ç­”é—®é¢˜æ—¶è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œå¦‚ Python å‡½æ•°ã€API æˆ–æ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<p><strong>æ ¸å¿ƒæµç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥é—®é¢˜</strong></li>
<li><strong>AI åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·</strong></li>
<li><strong>å¦‚æœéœ€è¦ï¼ŒAI è¿”å› <code>tool_calls</code>ï¼Œè¯·æ±‚è°ƒç”¨ç‰¹å®šå‡½æ•°</strong></li>
<li><strong>å¼€å‘è€…æ‰§è¡Œå¯¹åº”çš„ Python å‡½æ•°ï¼Œå¹¶è¿”å›æ‰§è¡Œç»“æœ</strong></li>
<li><strong>AI è¯»å–å·¥å…·è¿”å›å€¼ï¼Œç»§ç»­æ¨ç†å¹¶ç”Ÿæˆæœ€ç»ˆå›ç­”</strong></li>
</ol>
<h2 id="2-ä»£ç æ‹†è§£ï¼šFunction-Calling-åŠŸèƒ½å®ç°"><a href="#2-ä»£ç æ‹†è§£ï¼šFunction-Calling-åŠŸèƒ½å®ç°" class="headerlink" title="2. ä»£ç æ‹†è§£ï¼šFunction Calling åŠŸèƒ½å®ç°"></a><strong>2. ä»£ç æ‹†è§£ï¼šFunction Calling åŠŸèƒ½å®ç°</strong></h2><p>æœ¬æ–‡å®šä¹‰äº†ä¸€ä¸ªread_markdownå‡½æ•°ï¼Œç”¨äºé€šè¿‡æé—®è®©å¤§æ¨¡å‹è‡ªä¸»è°ƒç”¨å‡½æ•°é˜…è¯»markdownæ–‡æœ¬å†…å®¹ï¼Œå›ç­”é—®é¢˜ã€‚</p>
<h3 id="ï¼ˆ1ï¼‰åˆå§‹åŒ–-Qwen-å®¢æˆ·ç«¯"><a href="#ï¼ˆ1ï¼‰åˆå§‹åŒ–-Qwen-å®¢æˆ·ç«¯" class="headerlink" title="ï¼ˆ1ï¼‰åˆå§‹åŒ– Qwen å®¢æˆ·ç«¯"></a><strong>ï¼ˆ1ï¼‰åˆå§‹åŒ– Qwen å®¢æˆ·ç«¯</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">client = OpenAI(</span><br><span class="line">    api_key=<span class="string">&quot;your_api_key&quot;</span>,</span><br><span class="line">    base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è¿æ¥ Qwen API è¿›è¡Œè¯·æ±‚ã€‚</li>
<li><code>api_key</code> å¿…é¡»æ­£ç¡®ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction-Callingï¼‰"><a href="#ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction-Callingï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction Callingï¼‰"></a><strong>ï¼ˆ2ï¼‰å®šä¹‰å·¥å…·ï¼ˆFunction Callingï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tools = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;read_markdown&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¯»å– &#x27;documents&#x27; æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡æ¡£ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;&#125;,  <span class="comment"># è¿™ä¸ªå·¥å…·ä¸éœ€è¦å‚æ•°</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>å‘Šè¯‰ Qwen å¯è°ƒç”¨çš„å·¥å…·ã€‚</li>
<li><code>name</code> å¿…é¡»ä¸ Python å‡½æ•°åä¸€è‡´ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è°ƒç”¨ã€‚</li>
<li><code>description</code> ç”¨äºè®© AI çŸ¥é“å·¥å…·çš„ç”¨é€”ã€‚</li>
<li>åœ¨ Qwen çš„ Function Calling ä¸­ï¼Œå·¥å…·çš„<code>parameters</code> çš„ <code>type</code> å¿…é¡»æ˜¯ <code>object</code>ã€‚</li>
<li><code>parameters</code> ä¸ºç©º <code>&#123;&#125;</code>ï¼Œè¡¨ç¤ºæ­¤å·¥å…·ä¸éœ€è¦å‚æ•°ã€‚</li>
<li><code>parameters</code> <strong>å¦‚æœä¸ä¸ºç©º</strong>ï¼Œè¡¨ç¤ºæ­¤å·¥å…·éœ€è¦<strong>ä¼ é€’å‚æ•°</strong>ã€‚<ul>
<li><code>properties</code> å®šä¹‰äº†æ¯ä¸ªå‚æ•°çš„åç§°ã€ç±»å‹å’Œæè¿°ã€‚</li>
<li><code>required</code> æŒ‡å®šäº†å“ªäº›å‚æ•°æ˜¯å¿…å¡«é¡¹ã€‚</li>
</ul>
</li>
</ul>
<p>å¦‚æœä»£ç ä¸­æ¶‰åŠåˆ°äº†å¤šä¸ªå·¥å…·çš„è°ƒç”¨ï¼Œå¯æŒ‰ç…§ä»¥ä¸‹çš„æ ¼å¼è¿›è¡Œå¤šä¸ªå·¥å…·çš„å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tools = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;read_markdown&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¯»å– &#x27;documents&#x27; æ–‡ä»¶å¤¹ä¸­çš„ Markdown æ–‡æ¡£ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;&#125;,  <span class="comment"># è¿™ä¸ªå·¥å…·ä¸éœ€è¦å‚æ•°</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;fetch_weather&quot;</span>,</span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;parameters&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">                <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;city&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;è¦æŸ¥è¯¢å¤©æ°”çš„åŸå¸‚åç§°&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;required&quot;</span>: [<span class="string">&quot;city&quot;</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>read_markdown</code> <strong>ä¸éœ€è¦å‚æ•°</strong>ï¼Œæ‰€ä»¥ <code>properties</code> ä¸ºç©ºã€‚</li>
<li><code>fetch_weather</code> <strong>éœ€è¦å‚æ•°</strong>ï¼Œå®ƒçš„ <code>parameters</code> é‡ŒåŒ…å« <code>city</code> è¿™ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚</li>
<li>AI åœ¨è°ƒç”¨ <code>fetch_weather</code> æ—¶ï¼Œä¼šä¼ é€’ JSON ç»“æ„çš„ <code>arguments</code>ï¼Œå¦‚ï¼š<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shanghai&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="ï¼ˆ3ï¼‰è¯»å–-Markdown-æ–‡ä»¶"><a href="#ï¼ˆ3ï¼‰è¯»å–-Markdown-æ–‡ä»¶" class="headerlink" title="ï¼ˆ3ï¼‰è¯»å– Markdown æ–‡ä»¶"></a><strong>ï¼ˆ3ï¼‰è¯»å– Markdown æ–‡ä»¶</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_markdown</span>():</span><br><span class="line">    doc_path = <span class="string">&quot;documents&quot;</span></span><br><span class="line">    md_file = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(doc_path):</span><br><span class="line">        <span class="keyword">if</span> file.endswith(<span class="string">&quot;.md&quot;</span>):</span><br><span class="line">            md_file = os.path.join(doc_path, file)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> md_file:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;No markdown file found in the &#x27;documents&#x27; folder.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md_file, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        content = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> content[:<span class="number">5000</span>]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è¯»å– <code>documents/</code> ç›®å½•ä¸‹åç¼€ä¸º <code>.md</code> æ–‡ä»¶ã€‚</li>
<li>é™åˆ¶ 5000 å­—ç¬¦ï¼Œé˜²æ­¢è¶…å‡º Token é™åˆ¶ã€‚</li>
<li>å°†<code>markdown</code>æ–‡æœ¬çš„å‰5000ä¸ªå­—ç¬¦ä¼ é€’ç»™AIã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰"><a href="#ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰"></a><strong>ï¼ˆ4ï¼‰è·å–å¤©æ°”ä¿¡æ¯ï¼ˆç¤ºä¾‹å·¥å…·ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fetch_weather</span>(<span class="params">city</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;å½“å‰ <span class="subst">&#123;city&#125;</span> çš„å¤©æ°”ï¼šæ™´ï¼Œ25Â°C&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿè·å–å¤©æ°”ä¿¡æ¯ï¼Œ<strong>å‚æ•° <code>city</code> å¿…é¡»ä¼ é€’</strong>ã€‚</li>
<li>Qwen åœ¨è°ƒç”¨ <code>fetch_weather</code> æ—¶ï¼Œä¼šè‡ªåŠ¨æä¾› <code>city</code> çš„å€¼ã€‚</li>
</ul>
<h3 id="ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹"><a href="#ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹" class="headerlink" title="ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹"></a><strong>ï¼ˆ5ï¼‰ä¸»é€»è¾‘ï¼šå·¥å…·è°ƒç”¨çš„å®Œæ•´æµç¨‹</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    user_question = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é—®é¢˜ï¼š&quot;</span>).strip()</span><br><span class="line">    messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_question&#125;]</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®©ç”¨æˆ·è¾“å…¥é—®é¢˜ï¼Œå¹¶å­˜å…¥ <code>messages</code> ä½œä¸ºå¯¹è¯å†å²ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹-AI-æ˜¯å¦è°ƒç”¨å·¥å…·"><a href="#ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹-AI-æ˜¯å¦è°ƒç”¨å·¥å…·" class="headerlink" title="ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹ AI æ˜¯å¦è°ƒç”¨å·¥å…·"></a><strong>ï¼ˆ6ï¼‰ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼šçœ‹çœ‹ AI æ˜¯å¦è°ƒç”¨å·¥å…·</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">completion = client.chat.completions.create(</span><br><span class="line">    model=<span class="string">&quot;qwen-plus&quot;</span>,</span><br><span class="line">    messages=messages,</span><br><span class="line">    tools=tools</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è°ƒç”¨ Qwenï¼Œè®©å…¶å†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ7ï¼‰æ£€æŸ¥-Qwen-æ˜¯å¦è°ƒç”¨äº†å·¥å…·"><a href="#ï¼ˆ7ï¼‰æ£€æŸ¥-Qwen-æ˜¯å¦è°ƒç”¨äº†å·¥å…·" class="headerlink" title="ï¼ˆ7ï¼‰æ£€æŸ¥ Qwen æ˜¯å¦è°ƒç”¨äº†å·¥å…·"></a><strong>ï¼ˆ7ï¼‰æ£€æŸ¥ Qwen æ˜¯å¦è°ƒç”¨äº†å·¥å…·</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> tool_calls:</span><br><span class="line">    tool_results = []</span><br><span class="line">    <span class="keyword">for</span> tool_call <span class="keyword">in</span> tool_calls:</span><br><span class="line">        tool_name = tool_call[<span class="string">&quot;function&quot;</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line">        tool_id = tool_call[<span class="string">&quot;id&quot;</span>]</span><br><span class="line">        tool_args = tool_call[<span class="string">&quot;function&quot;</span>][<span class="string">&quot;arguments&quot;</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> tool_name == <span class="string">&quot;read_markdown&quot;</span>:</span><br><span class="line">            result_content = read_markdown()</span><br><span class="line">        <span class="keyword">elif</span> tool_name == <span class="string">&quot;fetch_weather&quot;</span>:</span><br><span class="line">            city = tool_args.get(<span class="string">&quot;city&quot;</span>, <span class="string">&quot;æœªçŸ¥åŸå¸‚&quot;</span>)</span><br><span class="line">            result_content = fetch_weather(city)</span><br><span class="line">        </span><br><span class="line">        tool_results.append(&#123;</span><br><span class="line">            <span class="string">&quot;role&quot;</span>: <span class="string">&quot;tool&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tool_call_id&quot;</span>: tool_id,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: result_content</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è§£æ Qwen è¿”å›çš„ <code>tool_calls</code>ã€‚</li>
<li><strong>è°ƒç”¨ä¸åŒçš„å·¥å…·</strong>ï¼Œå¦‚ <code>read_markdown()</code> æˆ– <code>fetch_weather(city)</code> ï¼Œå¹¶å­˜å…¥ <code>tool</code> æ¶ˆæ¯ã€‚</li>
<li><strong>å¦‚æœå·¥å…·éœ€è¦å‚æ•°</strong>ï¼Œå°±ä» <code>tool_args</code> é‡Œæå–ã€‚</li>
<li>è‹¥ <code>tool_calls</code> ä¸ºç©ºï¼Œè¯´æ˜ AI <strong>ä¸éœ€è¦è°ƒç”¨å·¥å…·</strong>ã€‚</li>
</ul>
<hr>
<h3 id="ï¼ˆ8ï¼‰è®©-Qwen-ç»§ç»­æ¨ç†"><a href="#ï¼ˆ8ï¼‰è®©-Qwen-ç»§ç»­æ¨ç†" class="headerlink" title="ï¼ˆ8ï¼‰è®© Qwen ç»§ç»­æ¨ç†"></a><strong>ï¼ˆ8ï¼‰è®© Qwen ç»§ç»­æ¨ç†</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">messages.append(&#123;</span><br><span class="line">    <span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tool_calls&quot;</span>: tool_calls</span><br><span class="line">&#125;)</span><br><span class="line">messages.extend(tool_results)</span><br><span class="line"></span><br><span class="line">completion2 = client.chat.completions.create(</span><br><span class="line">    model=<span class="string">&quot;qwen-plus&quot;</span>,</span><br><span class="line">    messages=messages,</span><br><span class="line">    tools=tools</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li>è®© Qwen <strong>è¯»å–å·¥å…·è¿”å›å€¼ï¼Œå¹¶ç»§ç»­å›ç­”</strong>ã€‚</li>
</ul>
<hr>
<p>æ•ˆæœæµ‹è¯•ï¼š</p>
<p align="center">
  <img width="1198" alt="function_calling" src="https://github.com/user-attachments/assets/6da63b40-55b2-4eb0-b13c-b5f30225ff33" />
</p>

<hr>
<h2 id="3-ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› "><a href="#3-ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› " class="headerlink" title="3. ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› "></a><strong>3. ä»¥ä¸‹æ˜¯æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ä¸€äº›å·¥å…·è°ƒç”¨å¤±è´¥çš„åŸå› </strong></h2><ol>
<li><code>name</code> å’Œ Python å‡½æ•°ä¸åŒ¹é…ï¼Œå¯¼è‡´ AI æ— æ³•æ­£ç¡®è°ƒç”¨å·¥å…·ã€‚</li>
<li><code>role=&quot;tool&quot;</code> æ¶ˆæ¯æœªç´§è·Ÿ <code>assistant</code>ï¼Œå¯¼è‡´ AI è§£æé”™è¯¯ã€‚</li>
</ol>
<ul>
<li>è§£å†³æ–¹æ³•æ˜¯åœ¨è°ƒç”¨å®Œå·¥å…·ä¹‹åï¼Œå‘ messages ä¸­æ‰‹åŠ¨æ’å…¥ä¸€æ¡ role&#x3D;â€assistantâ€ çš„ç©ºæ¶ˆæ¯ï¼Œé™„å¸¦ tool_calls å­—æ®µï¼Œç„¶åç´§æ¥ç€æ·»åŠ  role&#x3D;â€toolâ€ çš„è¿”å›ç»“æœï¼Œè¿™æ ·å°±ä¿è¯äº†æ­£ç¡®çš„è°ƒç”¨é“¾è·¯ã€‚<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">messages.append(&#123;</span><br><span class="line">    &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">    &quot;content&quot;: &quot;&quot;,  # ä¸€å®šä¸ºç©º</span><br><span class="line">    &quot;tool_calls&quot;: tool_calls  # å°† AI æœ€åˆè¿”å›çš„ tool_calls åŸæ ·æ”¾å›</span><br><span class="line">&#125;)</span><br><span class="line">messages.extend(tool_results)  # é©¬ä¸Šæ¥ä¸Š tool è¿”å›å€¼</span><br></pre></td></tr></table></figure></li>
<li>å› ä¸º Qwen æ¨¡å‹çš„è°ƒç”¨é“¾è§„åˆ™å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·æ¶ˆæ¯ï¼ˆrole=&quot;user&quot;ï¼‰</span><br><span class="line">â†’ AI è¿”å› tool_callsï¼ˆrole=&quot;assistant&quot;ï¼Œtool_callsï¼‰</span><br><span class="line">â†’ å·¥å…·æ‰§è¡Œï¼Œè¿”å›ç»“æœï¼ˆrole=&quot;tool&quot;ï¼Œtool_call_idï¼‰</span><br><span class="line">â†’ AI æ¥æ”¶åˆ°ç»“æœï¼Œç»§ç»­æ¨ç†</span><br></pre></td></tr></table></figure></li>
<li>å¦‚æœ role&#x3D;â€toolâ€ çš„æ¶ˆæ¯ä¸ç´§è·Ÿåœ¨å¸¦æœ‰ tool_calls çš„ assistant æ¶ˆæ¯åé¢ï¼Œæ¨¡å‹å°±æ— æ³•å¯¹ä¸Šâ€œè¿™ä¸ªå·¥å…·è°ƒç”¨è¿”å›äº†è¿™ä¸ªå€¼â€ï¼Œäºæ˜¯ä¼šæŠ¥é”™æˆ–è¾“å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<ol start="3">
<li><code>parameters</code> è®¾ç½®é”™è¯¯ï¼Œå¯¼è‡´ AI ä¼ é€’äº†é”™è¯¯çš„å‚æ•°ã€‚</li>
<li><code>messages</code> ç»“æ„é”™è¯¯ï¼Œå¯¼è‡´ AI ä¸èƒ½æ­£ç¡®è¯»å–å†å²å¯¹è¯ã€‚</li>
</ol>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://help.aliyun.com/zh/model-studio/user-guide/qwen-function-calling?spm=0.0.0.i4#8c41d25020ipz">Qwenå®˜æ–¹Function Calling</a>ã€‚</p>
]]></content>
      <categories>
        <category>LLMå­¦ä¹ ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>Function Calling</tag>
        <tag>Agent</tag>
        <tag>Qwen</tag>
      </tags>
  </entry>
  <entry>
    <title>NebulaGraphQAChain</title>
    <url>/2025/03/20/NebulaGraphQAChain/</url>
    <content><![CDATA[<h1 id="åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG"><a href="#åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG" class="headerlink" title="åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG"></a>åŸºäºLangchainåœ¨NebulaGraphå®ç°GraphRAG</h1><hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/NebulaGraphQAChain.git">https://github.com/EvannZhongg/NebulaGraphQAChain.git</a></p>
<hr>
<h2 id="1-è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#1-è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="1. è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a><strong>1. è¿™ä¸ªä»£ç æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong></h2><ul>
<li><strong>æŠŠè‡ªç„¶è¯­è¨€é—®é¢˜è½¬åŒ–ä¸ºå›¾æ•°æ®åº“NebulaGraphæŸ¥è¯¢è¯­å¥</strong></li>
<li><strong>æŸ¥è¯¢ NebulaGraphï¼ˆç¡®ä¿å›¾æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œæœ¬ä»£ç ä¸å†é¢å¤–æ„å»ºæ•°æ®æ’å…¥å›¾æ•°æ®åº“ï¼‰</strong></li>
<li><strong>è¿”å›æŸ¥è¯¢ç»“æœ</strong></li>
</ul>
<p><strong>ç®€å•æ¥è¯´</strong>ï¼š<br>ä½ å¯ä»¥ç”¨â€œäººè¯â€é—®å®ƒé—®é¢˜ï¼Œå®ƒä¼šè‡ªåŠ¨ <strong>ç¿»è¯‘æˆå›¾æ•°æ®åº“è¯­è¨€</strong>ï¼Œç„¶åå» <strong>å›¾æ•°æ®åº“æ‰¾ç­”æ¡ˆ</strong>ï¼Œå°†æŸ¥è¯¢åˆ°çš„ç»“æœä¸æé—®ç›¸ç»“åˆé‡æ–°ç”¨â€œäººè¯â€å›ç­”é—®é¢˜ã€‚</p>
<hr>
<h2 id="2-ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>2. ä»£ç æ‰§è¡Œçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><ol>
<li>è¯»å– <strong>API é…ç½®</strong>ï¼ˆå‘Šè¯‰ä»£ç å¦‚ä½•è®¿é—® LLMï¼‰</li>
<li>è°ƒç”¨ <strong>å¤§æ¨¡å‹ï¼ˆLLMï¼‰</strong>ï¼Œè®©å®ƒå¸®æˆ‘ä»¬ç¿»è¯‘é—®é¢˜</li>
<li>è¿æ¥ <strong>NebulaGraph</strong> æ•°æ®åº“</li>
<li>æ‰§è¡Œ <strong>æ•°æ®åº“æŸ¥è¯¢</strong>ï¼Œè·å¾—ç»“æœ</li>
<li>è¿”å›æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœ</li>
</ol>
<hr>
<h2 id="3-ä»£ç åˆ†è§£è®²è§£"><a href="#3-ä»£ç åˆ†è§£è®²è§£" class="headerlink" title="3. ä»£ç åˆ†è§£è®²è§£"></a><strong>3. ä»£ç åˆ†è§£è®²è§£</strong></h2><h3 id="3-1-è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI-é…ç½®ï¼‰"><a href="#3-1-è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI-é…ç½®ï¼‰" class="headerlink" title="3.1 è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI é…ç½®ï¼‰"></a><strong>3.1 è¯»å–ç¯å¢ƒå˜é‡ï¼ˆAPI é…ç½®ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å– .env æ–‡ä»¶</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">CHAT_API_URL = os.getenv(<span class="string">&quot;CHAT_API_URL&quot;</span>)</span><br><span class="line">API_KEY = os.getenv(<span class="string">&quot;API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> CHAT_API_URL <span class="keyword">or</span> <span class="keyword">not</span> API_KEY:</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&quot;è¯·åœ¨ .env æ–‡ä»¶ä¸­æ­£ç¡®é…ç½® CHAT_API_URL å’Œ API_KEY&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li><strong>è¯»å– API åœ°å€</strong> å’Œ <strong>å¯†é’¥</strong>ï¼Œè®©ä»£ç çŸ¥é“å¦‚ä½•è®¿é—®å¤§æ¨¡å‹ã€‚</li>
<li><strong>å¦‚æœæ²¡æœ‰é…ç½® API</strong>ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæé†’ç”¨æˆ·ã€‚</li>
</ul>
<p>ğŸ”¹ <strong>ä»€ä¹ˆæ˜¯ .env æ–‡ä»¶ï¼Ÿ</strong></p>
<p><code>.env</code> æ–‡ä»¶ç”¨äºå­˜æ”¾ <strong>API å¯†é’¥</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨åœ¨ä»£ç é‡Œå†™æ˜ç™½ï¼Œä¿è¯å®‰å…¨ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>.env</code> æ–‡ä»¶ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯siliconflowå¹³å°æä¾›çš„APIæœåŠ¡ï¼Œä½ å¯ä»¥åœ¨siliconflowå¹³å°è¿›è¡Œæ³¨å†Œç”³è¯·API KEYå¡«å…¥ä¸‹æ–¹çš„<code>API_KEY</code>å˜é‡ä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">CHAT_API_URL=https://api.siliconflow.cn/v1/chat/completions</span><br><span class="line">API_KEY=sk-***************************</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-2-è°ƒç”¨-LLM-API"><a href="#3-2-è°ƒç”¨-LLM-API" class="headerlink" title="3.2 è°ƒç”¨ LLM API"></a><strong>3.2 è°ƒç”¨ LLM API</strong></h3><h4 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">call_chat_api</span>(<span class="params">prompt</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è°ƒç”¨ LLM API ç”Ÿæˆ Cypher æŸ¥è¯¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(</span><br><span class="line">            CHAT_API_URL,</span><br><span class="line">            headers=&#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;API_KEY&#125;</span>&quot;</span>&#125;,</span><br><span class="line">            json=&#123;</span><br><span class="line">                <span class="string">&quot;model&quot;</span>: <span class="string">&quot;deepseek-ai/DeepSeek-V3&quot;</span>,  <span class="comment"># é€‰æ‹©æ¨¡å‹</span></span><br><span class="line">                <span class="string">&quot;messages&quot;</span>: [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;]</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            data = response.json()</span><br><span class="line">            result = data[<span class="string">&quot;choices&quot;</span>][<span class="number">0</span>][<span class="string">&quot;message&quot;</span>][<span class="string">&quot;content&quot;</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å¤„ç† Markdown ä»£ç å—</span></span><br><span class="line">            <span class="keyword">if</span> result.startswith(<span class="string">&quot;```nebula&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```nebula&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```cypher&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```cypher&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```sql&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```sql&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            <span class="keyword">elif</span> result.startswith(<span class="string">&quot;```&quot;</span>) <span class="keyword">and</span> result.endswith(<span class="string">&quot;```&quot;</span>):</span><br><span class="line">                result = result[<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>):-<span class="built_in">len</span>(<span class="string">&quot;```&quot;</span>)].strip()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;API è°ƒç”¨å¤±è´¥: <span class="subst">&#123;response.status_code&#125;</span> <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;API è°ƒç”¨å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-1"><a href="#ä½œç”¨ï¼š-1" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ol>
<li><strong>å‘é€è¯·æ±‚</strong> ç»™ LLMï¼ˆå¤§æ¨¡å‹ï¼‰ï¼Œè®©å®ƒæŠŠç”¨æˆ·é—®é¢˜ç¿»è¯‘æˆ <strong>æ•°æ®åº“æŸ¥è¯¢è¯­å¥</strong>ã€‚</li>
<li><strong>è§£æè¿”å›ç»“æœ</strong>ï¼Œæå–çœŸæ­£çš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ã€‚</li>
<li><strong>å¦‚æœå‡ºé”™</strong>ï¼Œå°±æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</li>
</ol>
<ul>
<li>ä»£ç ä¸­çš„ä»¥ä¸‹éƒ¨åˆ†ç”¨äºå¤„ç†å¤§æ¨¡å‹è¾“å‡ºå«æœ‰ä»£ç æ ‡è®°å—çš„æƒ…å†µï¼Œå¦‚æœä½ çš„å¤§æ¨¡å‹è¾“å‡ºå«æœ‰ä»£ç æ ‡è®°å—åˆ™æŸ¥è¯¢è¯­å¥ä¼šå‡ºç°å¤±è´¥ï¼Œåœ¨ä¸‹æ–¹ä»£ç ä¸­æ·»åŠ ä»£ç æ ‡è®°å—åç§°ï¼Œé¿å…æŸ¥è¯¢å‡ºé”™.<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if result.startswith(&quot;```ä»£ç æ ‡è®°å—å†…å®¹&quot;) and result.endswith(&quot;```&quot;):</span><br><span class="line">  result = result[len(&quot;```&quot;):-len(&quot;```&quot;)].strip()</span><br></pre></td></tr></table></figure></li>
</ul>
<p> <strong>ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>ä½ è¾“å…¥ï¼šâ€œåˆ—å‡ºæŸä¸ªç”µå­å™¨ä»¶çš„æ‰€æœ‰ç›¸å…³å‚æ•°â€</li>
<li>LLM å¯èƒ½è¿”å›ï¼š<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MATCH (n:Component) RETURN n.parameters</span><br></pre></td></tr></table></figure>
è¿™ä¸ªå°±æ˜¯ <strong>Cypher æŸ¥è¯¢è¯­å¥</strong>ï¼Œå¯ä»¥ç›´æ¥åœ¨å›¾æ•°æ®åº“æ‰§è¡Œã€‚</li>
</ul>
<hr>
<h3 id="3-3-è‡ªå®šä¹‰-LLM-å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥"><a href="#3-3-è‡ªå®šä¹‰-LLM-å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥" class="headerlink" title="3.3 è‡ªå®šä¹‰ LLM å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥"></a><strong>3.3 è‡ªå®šä¹‰ LLM å¤„ç†ç±»ç”ŸæˆæŸ¥è¯¢è¯­å¥</strong></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.runnables <span class="keyword">import</span> Runnable</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompt_values <span class="keyword">import</span> StringPromptValue</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CustomChatModel</span>(<span class="title class_ inherited__">Runnable</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">invoke</span>(<span class="params">self, <span class="built_in">input</span>, config: <span class="built_in">dict</span> = <span class="literal">None</span>, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(<span class="built_in">input</span>, StringPromptValue):</span><br><span class="line">            <span class="built_in">input</span> = <span class="built_in">input</span>.to_string()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(<span class="built_in">input</span>, <span class="built_in">str</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;Expected input to be a string, got <span class="subst">&#123;<span class="built_in">type</span>(<span class="built_in">input</span>)&#125;</span> instead.&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        result = call_chat_api(<span class="built_in">input</span>)</span><br><span class="line">        <span class="keyword">if</span> result <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;API è°ƒç”¨æœªè¿”å›æœ‰æ•ˆå“åº”&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-2"><a href="#ä½œç”¨ï¼š-2" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è®© <strong>LangChain æ¡†æ¶</strong> çŸ¥é“å¦‚ä½•è°ƒç”¨ LLMã€‚</li>
<li>å¤„ç†è¾“å…¥æ•°æ®ï¼Œç¡®ä¿ LLM <strong>å¯ä»¥æ­£ç¡®ç†è§£é—®é¢˜</strong>ã€‚</li>
<li>è°ƒç”¨ <code>call_chat_api()</code>ï¼Œè·å– LLM ç”Ÿæˆçš„æ•°æ®åº“æŸ¥è¯¢è¯­å¥ã€‚</li>
</ul>
<hr>
<h3 id="3-4-è¿æ¥-NebulaGraph"><a href="#3-4-è¿æ¥-NebulaGraph" class="headerlink" title="3.4 è¿æ¥ NebulaGraph"></a><strong>3.4 è¿æ¥ NebulaGraph</strong></h3><h4 id="ä»£ç ï¼š-1"><a href="#ä»£ç ï¼š-1" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.graphs <span class="keyword">import</span> NebulaGraph</span><br><span class="line"></span><br><span class="line">graph = NebulaGraph(</span><br><span class="line">    space=<span class="string">&quot;SPACE&quot;</span>,  <span class="comment">#å°†SPACEä¿®æ”¹ä¸ºè‡ªå·±çš„å›¾ç©ºé—´åç§°</span></span><br><span class="line">    username=<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    password=<span class="string">&quot;nebula&quot;</span>,</span><br><span class="line">    address=<span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">    port=<span class="number">9669</span>,</span><br><span class="line">    session_pool_size=<span class="number">30</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-3"><a href="#ä½œç”¨ï¼š-3" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è¿æ¥ <strong>NebulaGraph å›¾æ•°æ®åº“</strong>ï¼Œè®©ä»£ç å¯ä»¥æŸ¥è¯¢æ•°æ®ã€‚</li>
<li>é…ç½® <strong>æ•°æ®åº“åœ°å€ã€ç”¨æˆ·åã€å¯†ç </strong>ã€‚</li>
</ul>
<hr>
<h3 id="3-5-è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹"><a href="#3-5-è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹" class="headerlink" title="3.5 è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹"></a><strong>3.5 è¿è¡ŒæŸ¥è¯¢ç¤ºä¾‹</strong></h3><h4 id="ä»£ç ï¼š-2"><a href="#ä»£ç ï¼š-2" class="headerlink" title="ä»£ç ï¼š"></a><strong>ä»£ç ï¼š</strong></h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">query_graph</span>(<span class="params">question</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿è¡Œ NebulaGraph QAChainï¼Œå¤„ç†è‡ªç„¶è¯­è¨€æŸ¥è¯¢</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        answer = chain.run(question)</span><br><span class="line">        <span class="keyword">return</span> answer</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æŸ¥è¯¢æ‰§è¡Œå‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test_question = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢é—®é¢˜: &quot;</span>)  <span class="comment"># è®©ç”¨æˆ·åœ¨ç»ˆç«¯è¾“å…¥é—®é¢˜</span></span><br><span class="line">    response = query_graph(test_question)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢ç»“æœ:&quot;</span>, response)</span><br></pre></td></tr></table></figure>
<h4 id="ä½œç”¨ï¼š-4"><a href="#ä½œç”¨ï¼š-4" class="headerlink" title="ä½œç”¨ï¼š"></a><strong>ä½œç”¨ï¼š</strong></h4><ul>
<li>è®©ç”¨æˆ·è¾“å…¥é—®é¢˜ã€‚</li>
<li>è°ƒç”¨ <code>chain.run(question)</code> å¤„ç†æŸ¥è¯¢ã€‚</li>
<li><strong>è¿”å›æŸ¥è¯¢è¯­å¥å’Œç»“æœ</strong>ã€‚</li>
</ul>
<p>ğŸ“Œ <strong>ç¤ºä¾‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·è¾“å…¥ï¼š<strong>â€œ1N4736AT-Dçš„åº”ç”¨æœ‰ä»€ä¹ˆâ€</strong></li>
<li>ä»£ç è°ƒç”¨ LLMï¼Œè·å– Cypher è¯­å¥</li>
<li>æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œè¿”å›ç»“æœã€‚<br><img src="https://github.com/user-attachments/assets/fefb7d40-9737-4dc1-a3d0-266445ccc65a" alt="Query Execution"></li>
<li>æˆ‘ä»¬å¯ä»¥åœ¨å›¾æ•°æ®åº“ä¸­è¿›è¡ŒéªŒè¯ã€‚<br><img src="https://github.com/user-attachments/assets/72b07b88-740e-4210-aaaf-823e29bfb3d1" alt="Nebula Graph Query"></li>
<li>è¿™é‡Œåˆ¶ä½œäº†ä¸€ä¸ªç®€æ˜“çš„å‰ç«¯é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹æ•ˆæœå’Œåç«¯æ—¥å¿—ï¼Œè¯¦ç»†ä»£ç å¯åœ¨æœ¬æ–‡å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–ã€‚<br><img src="https://github.com/user-attachments/assets/8a1613eb-ec9a-4e2f-bce9-3876ebc80191" alt="image"></li>
</ol>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç å‚è€ƒ <a href="https://github.com/hwchase17/langchain">LangChain</a> å’Œ <a href="http://doc.cnlangchain.com/modules/chains/examples/graph_nebula_qa.html">NebulaGraphQAChain</a>ã€‚</p>
]]></content>
      <categories>
        <category>NebulaGraph</category>
      </categories>
      <tags>
        <tag>LLM</tag>
        <tag>å¤§æ¨¡å‹</tag>
        <tag>å›¾æ•°æ®åº“</tag>
        <tag>LangChain</tag>
        <tag>NebulaGraph</tag>
        <tag>GraphRAG</tag>
      </tags>
  </entry>
  <entry>
    <title>Custom Search Integration for Hexo Chic</title>
    <url>/2025/03/27/Custom-Search-Integration-for-Hexo-Chic/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸ºä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½"><a href="#Hexo-Chic-ä¸ºä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½" class="headerlink" title="Hexo + Chic ä¸ºä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½"></a>Hexo + Chic ä¸ºä¸»é¢˜å®ç°æœç´¢åŠŸèƒ½</h1><p>æœ¬æ–‡è¯¦ç»†è®°å½•å¦‚ä½•åœ¨ Hexo ä¸­ä½¿ç”¨æ’ä»¶ <code>hexo-generator-searchdb</code> å®ç°åŸºäº Chic ä¸»é¢˜çš„å®æ—¶æœç´¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœç´¢å›å¤æ¡†ã€æœç´¢ç»“æœå¡ã€æš—é»‘æ¨¡å¼é€‚é…ç­‰ç»†èŠ‚ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1. å®‰è£…æ’ä»¶"></a><strong>1. å®‰è£…æ’ä»¶</strong></h2><p>åœ¨ <code>Hexo</code> æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-æ‰“å¼€æ ¹ç›®å½•çš„-config-yml-æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š"><a href="#2-æ‰“å¼€æ ¹ç›®å½•çš„-config-yml-æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š" class="headerlink" title="2. æ‰“å¼€æ ¹ç›®å½•çš„ _config.yml æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š"></a><strong>2. æ‰“å¼€æ ¹ç›®å½•çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆæˆ–ä¿®æ”¹ï¼‰å¦‚ä¸‹é…ç½®ï¼š</strong></h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-æ–°å»º-search-css"><a href="#3-æ–°å»º-search-css" class="headerlink" title="3. æ–°å»º search.css"></a><strong>3. æ–°å»º search.css</strong></h2><p><strong>å»ºè®®è·¯å¾„</strong>: <code>themes/hexo-theme-Chic/source/css/search.css</code></p>
<p>åŒ…å«æœç´¢æ¡†&#x2F;ç»“æœå¡&#x2F;æš—é»‘æ¨¡å¼æ ·å¼ï¼Œå…·ä½“ä»£ç å¯å¸¦æ–‡ç« å¼€å¤´é¡¹ç›®åœ°å€ä¸­è·å–ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.search-container</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.nav-search-input</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.nav-search-result</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.search-card</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.nav-search-input</span> &#123; ... &#125;</span><br><span class="line"><span class="selector-class">.dark-theme</span> <span class="selector-class">.search-card-snippet</span> &#123; ... &#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#4-ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="4. ä¿®æ”¹ä¸»é¢˜é…ç½®"></a><strong>4. ä¿®æ”¹ä¸»é¢˜é…ç½®</strong></h2><p>æ‰“å¼€<code>theme/hexo-theme-Chic/_config.yml</code> ï¼Œåœ¨ <code>stylesheets </code>ä¸‹å¢åŠ ä¸€è¡Œ <code>search.css</code> ç¡®ä¿åŠ è½½æ ·å¼æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stylesheets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/css/style.css</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/css/search.css</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-ä¿®æ”¹-header-ejs"><a href="#5-ä¿®æ”¹-header-ejs" class="headerlink" title="5. ä¿®æ”¹ header.ejs"></a><strong>5. ä¿®æ”¹ <code>header.ejs</code></strong></h2><p>å¯¹ <code>theme/hexo-theme-Chic/layout/_partial/header.ejs</code> åšäº†å¦‚ä¸‹å…³é”®ä¿®æ”¹ï¼Œå…·ä½“ä»£ç å¯å¸¦æ–‡ç« å¼€å¤´é¡¹ç›®åœ°å€ä¸­è·å–ï¼š</p>
<h3 id="HTML-ç»“æ„æ”¹åŠ¨"><a href="#HTML-ç»“æ„æ”¹åŠ¨" class="headerlink" title="HTML ç»“æ„æ”¹åŠ¨"></a>HTML ç»“æ„æ”¹åŠ¨</h3><ol>
<li>åœ¨ <code>&lt;div class=&quot;menu navbar-right&quot;&gt;</code> ä¸­æ’å…¥ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;search-container&quot;&gt;</span><br><span class="line">  &lt;a href=&quot;javascript:;&quot; onclick=&quot;toggleSearchInput()&quot;&gt;ğŸ”&lt;/a&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; id=&quot;nav-search-input&quot; class=&quot;nav-search-input&quot; placeholder=&quot;Search...&quot; oninput=&quot;navSearch(this)&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;nav-search-result&quot; class=&quot;nav-search-result&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ç§»åŠ¨ç«¯å¯¼èˆª <code>&lt;div id=&quot;mobile-menu&quot;&gt;</code> ä¸­æ’å…¥ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a class=&quot;menu-item&quot; href=&quot;javascript:;&quot; onclick=&quot;toggleSearchInput()&quot;&gt;ğŸ” Search&lt;/a&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; id=&quot;nav-search-input-mobile&quot; class=&quot;nav-search-input&quot; placeholder=&quot;Search...&quot; oninput=&quot;navSearch(this)&quot;&gt;</span><br><span class="line">&lt;div id=&quot;nav-search-result&quot; class=&quot;nav-search-result&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¿ç•™å¹¶æœªæ›´åŠ¨ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input id=&quot;switch_default&quot; type=&quot;checkbox&quot; class=&quot;switch_default&quot;&gt;</span><br><span class="line">&lt;label for=&quot;switch_default&quot; class=&quot;toggleBtn&quot;&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JS-åŠŸèƒ½æ”¹åŠ¨"><a href="#JS-åŠŸèƒ½æ”¹åŠ¨" class="headerlink" title="JS åŠŸèƒ½æ”¹åŠ¨"></a>JS åŠŸèƒ½æ”¹åŠ¨</h3><ol>
<li>æ–°å¢ <code>toggleSearchInput()</code> æ–¹æ³•ï¼Œå®ç°ç‚¹å‡»å›¾æ ‡å±•å¼€æˆ–éšè—æœç´¢æ¡†ã€‚</li>
<li>æ–°å¢ <code>navSearch()</code> æ–¹æ³•ï¼Œå®ç°ä» <code>search.xml</code> åŠ è½½æ•°æ®å¹¶åŒ¹é…å…³é”®è¯ã€‚</li>
<li>æ–°å¢ç©ºç™½ç‚¹å‡»å…³é—­é€»è¾‘ï¼šç‚¹å‡» <code>.search-container</code> å¤–éƒ¨åŒºåŸŸåè‡ªåŠ¨éšè—æœç´¢æ¡†å¹¶æ¸…ç©ºå†…å®¹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> searchAreas = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.search-container&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> clickedInsideSearch = <span class="literal">false</span>;</span><br><span class="line">  searchAreas.<span class="title function_">forEach</span>(<span class="function"><span class="params">area</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (area.<span class="title function_">contains</span>(e.<span class="property">target</span>)) clickedInsideSearch = <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">if</span> (!clickedInsideSearch) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.nav-search-input&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">input</span> =&gt;</span> &#123;</span><br><span class="line">      input.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">      input.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.nav-search-result&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      result.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-å®ç°æ•ˆæœ"><a href="#6-å®ç°æ•ˆæœ" class="headerlink" title="6. å®ç°æ•ˆæœ"></a><strong>6. å®ç°æ•ˆæœ</strong></h2><ul>
<li>ç‚¹å‡»å›¾æ ‡å±•ç¤ºæœç´¢æ¡†</li>
<li>å®æ—¶åŒ¹é…æ–‡ç« æ ‡é¢˜&#x2F;å†…å®¹</li>
<li>ç»“æœä»¥å¡ç‰‡å½¢å¼å±•ç¤º</li>
<li>é»‘è‰²æ¨¡å¼æ ·å¼è‡ªåŠ¨é€‰æ‹©</li>
<li>ç‚¹å‡»ç©ºç™½åœ°æ–¹éšè—ç»“æœ + æ¸…ç©ºæ–‡æœ¬</li>
<li>ç§»åŠ¨ç«¯é¡µé¢é€‚é…<br><img src="https://github.com/user-attachments/assets/430d306f-1836-4ca7-b1c6-c249835622bd" alt="image"></li>
</ul>
<hr>
<h2 id="7-æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo"><a href="#7-æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo" class="headerlink" title="7. æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo"></a><strong>7. æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo</strong></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—® <code>http://localhost:4000</code>ï¼ŒæŸ¥çœ‹ä»»æ„ä¸€æ®µä»£ç å—ï¼Œå³ä¸Šè§’åº”å‡ºç°å¤åˆ¶å›¾æ ‡æŒ‰é’®ã€‚</p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> , <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> å’Œ <a href="https://github.com/next-theme/hexo-generator-searchdb.git">hexo-generator-searchdb</a>ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Sync Code Block Theme with Dark Mode in Hexo Chic</title>
    <url>/2025/03/25/Sync-Code-Block-Theme-with-Dark-Mode-in-Hexo-Chic/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ"><a href="#Hexo-Chic-ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ" class="headerlink" title="Hexo + Chic ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ"></a>Hexo + Chic ä¸»é¢˜ä¸ºä»£ç å—å®ç°æ˜æš—ä¸»é¢˜åˆ‡æ¢æ•ˆæœ</h1><p>è¿™ä»½æ–‡æ¡£è®°å½•å¦‚ä½•åœ¨ Hexo åšå®¢ï¼ˆä½¿ç”¨ Chic ä¸»é¢˜ï¼‰ï¼Œå®Œæˆä»£ç å— (highlight.js) æ ·å¼éšæ˜&#x2F;æš—ä¸»é¢˜åˆ‡æ¢ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="èƒŒæ™¯çŸ¥è¯†"><a href="#èƒŒæ™¯çŸ¥è¯†" class="headerlink" title="èƒŒæ™¯çŸ¥è¯†"></a>èƒŒæ™¯çŸ¥è¯†</h2><ul>
<li><strong>ä»£ç å—</strong> æ˜¯ä½ å†™æ–‡ç« æ—¶ç”¨ &#96;&#96;&#96; åŒ…èµ·æ¥çš„é‚£äº› Python&#x2F;JavaScript ä»£ç éƒ¨åˆ†ã€‚</li>
<li><strong>highlight.js</strong> æ˜¯ç”¨æ¥ç»™ä»£ç å—åŠ é¢œè‰²çš„å·¥å…·ï¼Œå®ƒæœ‰â€œäº®è‰²â€å’Œâ€œæš—è‰²â€ä¸¤å¥—æ ·å¼ã€‚</li>
</ul>
<p>å¸Œæœ›è§£å†³çš„é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p>å½“æˆ‘åˆ‡æ¢ç½‘ç«™åˆ°æš—è‰²æ¨¡å¼æ—¶ï¼Œä»£ç å—è¿˜æ˜¯ç™½åº•ï¼Œçœ‹èµ·æ¥å¾ˆçªå…€ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼šè®©ä»£ç å—ä¹Ÿèƒ½â€œè·Ÿç€å˜é»‘â€ã€‚</p>
<hr>
<h2 id="1-ç¡®è®¤-Hexo-æ­£åœ¨ä½¿ç”¨-highlight-js"><a href="#1-ç¡®è®¤-Hexo-æ­£åœ¨ä½¿ç”¨-highlight-js" class="headerlink" title="1. ç¡®è®¤ Hexo æ­£åœ¨ä½¿ç”¨ highlight.js"></a><strong>1. ç¡®è®¤ Hexo æ­£åœ¨ä½¿ç”¨ highlight.js</strong></h2><p>æ‰“å¼€ä½ åšå®¢æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢çš„å†…å®¹å¹¶ç¡®ä¿è®¾ç½®ä¸€è‡´ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">syntax_highlighter:</span> <span class="string">highlight.js</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µé…ç½®çš„æ„æ€æ˜¯å‘Šè¯‰ Hexoï¼šæˆ‘è¦ç”¨ highlight.js æ¥åšä»£ç é«˜äº®ã€‚</p>
<hr>
<h2 id="2-ä¿®æ”¹-head-ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼"><a href="#2-ä¿®æ”¹-head-ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼" class="headerlink" title="2.ä¿®æ”¹ head.ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼"></a><strong>2.ä¿®æ”¹ head.ejsï¼Œå¼•å…¥ä»£ç é«˜äº®æ ·å¼</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/head.ejs</span><br></pre></td></tr></table></figure>

<p>åœ¨é‡Œé¢æ·»åŠ è¿™å‡ è¡Œï¼ˆæ’å…¥åˆ°å·²æœ‰çš„ <code>&lt;link&gt;</code> æ ‡ç­¾ä¹‹åå³å¯ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- highlight.js æ ·å¼ï¼ˆé»˜è®¤äº®è‰²ï¼‰ --&gt;</span><br><span class="line">&lt;link id=&quot;hljs-theme&quot; rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.css&quot;&gt;</span><br><span class="line">&lt;!-- highlight.js è‡ªåŠ¨ä¸Šè‰²åŠŸèƒ½ --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/highlight.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;hljs.highlightAll();&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬ä¸€è¡Œæ˜¯é»˜è®¤ä»£ç æ ·å¼ï¼ˆäº®è‰²ï¼‰ã€‚</li>
<li>ç¬¬äºŒä¸‰è¡Œæ˜¯è®©ä»£ç è‡ªåŠ¨åŠ é¢œè‰²ã€‚</li>
</ul>
<hr>
<h2 id="3-ä¿®æ”¹-script-jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥"><a href="#3-ä¿®æ”¹-script-jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥" class="headerlink" title="3. ä¿®æ”¹ script.jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥"></a><strong>3. ä¿®æ”¹ script.jsï¼Œåˆ‡æ¢æš—è‰²æ ·å¼æ—¶åŠ¨æ€ä¿®æ”¹é“¾æ¥</strong></h2><p>æ‰“å¼€æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes/hexo-theme-Chic/source/js/script.js</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æˆ‘ä»¬æ·»åŠ ä¸»é¢˜åˆ‡æ¢çš„åœ°æ–¹ï¼Œæ·»åŠ ä»¥ä¸‹ JavaScript ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hljsTheme = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hljs-theme&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateCodeHighlightStyle</span>(<span class="params">isDarkMode</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!hljsTheme) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> newHref = isDarkMode</span><br><span class="line">        ? <span class="string">&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github-dark.css&quot;</span></span><br><span class="line">        : <span class="string">&quot;https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github.css&quot;</span>;</span><br><span class="line">    hljsTheme.<span class="title function_">setAttribute</span>(<span class="string">&#x27;href&#x27;</span>, newHref);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥åœ¨ä¸»é¢˜åˆ‡æ¢æŒ‰é’®äº‹ä»¶é‡Œè°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">updateCodeHighlightStyle</span>(<span class="literal">true</span>); <span class="comment">// æˆ– falseï¼Œæ ¹æ®ä½ å½“å‰æ¨¡å¼</span></span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡åˆ‡æ¢ä¸»é¢˜æ—¶éƒ½è°ƒç”¨å®ƒï¼Œå°±èƒ½åˆ‡æ¢ä»£ç æ ·å¼ã€‚</p>
<hr>
<h2 id="4-åˆ›å»ºä¸€ä¸ª-CSS-æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜"><a href="#4-åˆ›å»ºä¸€ä¸ª-CSS-æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜" class="headerlink" title="4. åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜"></a><strong>4. åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œè§£å†³ä»£ç å—â€œç™½è¾¹â€é—®é¢˜</strong></h2><p>è¿™ä¸ªæ­¥éª¤å¾ˆå…³é”®ï¼Œå¦åˆ™åœ¨æš—è‰²æ ·å¼æ—¶ä»£ç å—å‘¨å›´å¯èƒ½ä¼šç•™ä¸‹ä¸€åœˆç™½è‰²è¾¹æ¡†ï¼Œå¦‚ä¸‹æ–¹å›¾ç‰‡æ‰€ç¤ºï¼š<br><img src="https://github.com/user-attachments/assets/6baef8c8-887d-448f-a5c9-5f0501ab4ee2" alt="image"></p>
<h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶</h3><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd themes/hexo-theme-Chic/source/css</span><br><span class="line">mkdir custom</span><br><span class="line">cd custom</span><br><span class="line">nano custom.css</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æ‰‹åŠ¨ï¼šåœ¨ <code>themes/hexo-theme-Chic/source/css/</code> ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ <code>custom</code>ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºæ–‡ä»¶ <code>custom.css</code></p>
<h3 id="ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š"><a href="#ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š"></a>ç¬¬äºŒæ­¥ï¼šå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">pre,</span><br><span class="line"><span class="selector-tag">code</span>,</span><br><span class="line">pre <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: inherit <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: inherit <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> pre,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> <span class="selector-class">.highlight</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0d1117</span> <span class="meta">!important</span>;  <span class="comment">/* æš—è‰²èƒŒæ™¯ */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#c9d1d9</span> <span class="meta">!important</span>;       <span class="comment">/* æš—è‰²æ–‡å­— */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> pre::-webkit-scrollbar-track,</span><br><span class="line">body.dark-theme code::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0d1117</span> <span class="meta">!important</span>;  <span class="comment">/* ä¿®å¤æ»šåŠ¨æ¡ç™½è¾¹ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-åœ¨-head-ejs-ä¸­å¼•å…¥è‡ªå®šä¹‰-CSS-æ–‡ä»¶"><a href="#5-åœ¨-head-ejs-ä¸­å¼•å…¥è‡ªå®šä¹‰-CSS-æ–‡ä»¶" class="headerlink" title="5. åœ¨ head.ejs ä¸­å¼•å…¥è‡ªå®šä¹‰ CSS æ–‡ä»¶"></a><strong>5. åœ¨ head.ejs ä¸­å¼•å…¥è‡ªå®šä¹‰ CSS æ–‡ä»¶</strong></h2><p>åœ¨ <code>head.ejs</code> ä¸­å†åŠ ä¸€è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%- url_for(&#x27;/css/custom/custom.css&#x27;) %&gt;&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>æ”¾åœ¨å…¶ä»– <code>&lt;link&gt;</code> æ ‡ç­¾çš„ä¸‹é¢ã€‚</p>
<hr>
<h2 id="6-é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo"><a href="#6-é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ-Hexo" class="headerlink" title="6. é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo"></a><strong>6. é‡æ–°ç”Ÿæˆå¹¶è¿è¡Œ Hexo</strong></h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°ç”Ÿæˆå¹¶å¯åŠ¨æœ¬åœ°é¢„è§ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—®ä½ çš„æœ¬åœ°åšå®¢æ–‡ç« é¡µé¢ <code>http://localhost:4000</code>ï¼Œå°è¯•åˆ‡æ¢ä¸»é¢˜ï¼Œçœ‹ä»£ç å—æ˜¯å¦ä¹Ÿä¼šéšä¹‹å˜è‰²ã€‚</p>
<p>åœ¨ä¸¤ç§ä¸åŒä¸»é¢˜ä¸‹çš„æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://github.com/user-attachments/assets/db87a928-293d-4c00-8299-6619722c92f8" alt="image"></p>
<p><img src="https://github.com/user-attachments/assets/550ba759-3113-41b6-9737-887242fcfa14" alt="image"></p>
<hr>
<p>ä¿®æ”¹åçš„ç›¸å…³å®Œæ•´ä»£ç å¯ä»¥åœ¨æ–‡ç« å¼€å¤´çš„é¡¹ç›®åœ°å€ä¸­è·å–</p>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo and Chic themes add Giscus comment system</title>
    <url>/2025/03/24/Hexo-and-Chic-themes-add-Giscus-comment-system/</url>
    <content><![CDATA[<h1 id="Hexo-Chic-ä¸»é¢˜é›†æˆ-Giscus-è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹"><a href="#Hexo-Chic-ä¸»é¢˜é›†æˆ-Giscus-è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹" class="headerlink" title="Hexo + Chic ä¸»é¢˜é›†æˆ Giscus è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹"></a>Hexo + Chic ä¸»é¢˜é›†æˆ Giscus è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹</h1><p>æœ¬æ•™ç¨‹å°†æ•™ä½ å¦‚ä½•åœ¨ Hexo åšå®¢ï¼ˆä½¿ç”¨ Chic ä¸»é¢˜ï¼‰ä¸­æ·»åŠ  Giscus è¯„è®ºç³»ç»Ÿï¼Œè®©ä½ çš„åšå®¢æ‹¥æœ‰ç®€æ´ç°ä»£çš„è¯„è®ºåŠŸèƒ½ï¼Œå¹¶ä¸”æ”¯æŒæ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<hr>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/EvannZhongg/Blog-Learning.git">https://github.com/EvannZhongg/Blog-Learning.git</a></p>
<hr>
<h2 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h2><h3 id="1-ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š"><a href="#1-ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š" class="headerlink" title="1. ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š"></a>1. ç¡®ä¿ä½ å·²å®Œæˆä»¥ä¸‹æ¡ä»¶ï¼š</h3><ul>
<li>åšå®¢å·²æ­å»ºå¹¶ä½¿ç”¨ Hexo æ¡†æ¶</li>
<li>æ­£åœ¨ä½¿ç”¨ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ä¸»é¢˜</li>
<li>åšå®¢æ‰˜ç®¡åœ¨ GitHub</li>
</ul>
<h3 id="2-å¯ç”¨-GitHub-Discussions-åŠŸèƒ½"><a href="#2-å¯ç”¨-GitHub-Discussions-åŠŸèƒ½" class="headerlink" title="2. å¯ç”¨ GitHub Discussions åŠŸèƒ½"></a>2. å¯ç”¨ GitHub Discussions åŠŸèƒ½</h3><ol>
<li>æ‰“å¼€ä½ çš„åšå®¢ä»“åº“é¡µé¢</li>
<li>ç‚¹å‡»é¡¶éƒ¨çš„ <strong>Settings</strong></li>
<li>åœ¨ <strong>General</strong> ä¸­ <strong>Features</strong> åŒºåŸŸç‚¹å‡» <strong>Discussions</strong></li>
<li>å‹¾é€‰ <strong>â€œEnable discussions for this repositoryâ€</strong></li>
</ol>
<p><img src="https://github.com/user-attachments/assets/6686f60e-f2d4-4a87-8b0d-d3425070c2cd" alt="setting_discussions"></p>
<hr>
<h2 id="äºŒã€ä½¿ç”¨-Giscus-app-è·å–è¯„è®ºé…ç½®ä»£ç "><a href="#äºŒã€ä½¿ç”¨-Giscus-app-è·å–è¯„è®ºé…ç½®ä»£ç " class="headerlink" title="äºŒã€ä½¿ç”¨ Giscus.app è·å–è¯„è®ºé…ç½®ä»£ç "></a>äºŒã€ä½¿ç”¨ Giscus.app è·å–è¯„è®ºé…ç½®ä»£ç </h2><ol>
<li>æ‰“å¼€ Giscus å®˜ç½‘ï¼š<a href="https://giscus.app/">https://giscus.app</a></li>
<li>ç™»å½• GitHub è´¦å·</li>
<li>å®‰è£… <a href="https://github.com/apps/giscus">giscus</a> app  ï¼Œå¦åˆ™è®¿å®¢å°†æ— æ³•è¯„è®ºå’Œå›åº”</li>
<li>æŒ‰ç…§å¦‚ä¸‹é€‰æ‹©è¿›è¡Œé…ç½®ï¼š<ul>
<li>Repository: é€‰æ‹©ä½ çš„åšå®¢ä»“åº“ï¼ˆæ³¨æ„å¡«å†™æ ¼å¼ä¸º <strong>ç”¨æˆ·å&#x2F;ä»“åº“å</strong>ï¼‰</li>
<li>Discussion Category: å»ºè®®é€‰æ‹© <strong>Announcements</strong>ï¼ˆé˜²æ­¢è¯»è€…éšæ„å‘å¸–ï¼‰</li>
<li>Page â†”ï¸ Discussion Mapping: é€‰æ‹© <strong>pathname</strong></li>
<li>Theme: é€‰æ‹©ä»»æ„ï¼ˆæˆ‘ä»¬åç»­ä¼šåŠ¨æ€æ§åˆ¶ï¼‰</li>
<li>Language: é€‰æ‹© <code>zh-CN</code></li>
</ul>
</li>
<li>ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ <strong>â€œCopy code snippetâ€</strong>ï¼Œå¤åˆ¶ç”Ÿæˆçš„ <code>&lt;script&gt;</code> æ ‡ç­¾ä»£ç </li>
</ol>
<hr>
<h2 id="ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶"><a href="#ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶" class="headerlink" title="ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶"></a>ä¸‰ã€åˆ›å»ºè¯„è®ºæ¨¡å—æ–‡ä»¶</h2><h3 id="1-æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•"><a href="#1-æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•" class="headerlink" title="1. æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•"></a>1. æ‰“å¼€åšå®¢ä¸»é¢˜ç›®å½•</h3><p>è·¯å¾„ï¼š<code>themes/hexo-theme-Chic/layout/_partial/</code></p>
<h3 id="2-åˆ›å»ºæˆ–ç¼–è¾‘-livers-ejs-æ–‡ä»¶"><a href="#2-åˆ›å»ºæˆ–ç¼–è¾‘-livers-ejs-æ–‡ä»¶" class="headerlink" title="2. åˆ›å»ºæˆ–ç¼–è¾‘ livers.ejs æ–‡ä»¶"></a>2. åˆ›å»ºæˆ–ç¼–è¾‘ <code>livers.ejs</code> æ–‡ä»¶</h3><p>å°† Giscus ä¸­ç”Ÿæˆçš„ <code>&lt;script&gt;</code> æ ‡ç­¾ä»£ç å¡«å…¥æ–‡ä»¶ï¼ˆæ³¨æ„éƒ¨åˆ†å‚æ•°çš„åŒºåˆ«ï¼‰ï¼ŒåŒæ—¶å¢åŠ ä¸»é¢˜è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Giscus è¯„è®ºåŒºæŒ‚è½½ç‚¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;giscus-container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 2.5rem;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Giscus åŠ¨æ€åŠ è½½è„šæœ¬ï¼šåˆå§‹åŠ è½½ + æ˜æš—ä¸»é¢˜åˆ‡æ¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">createGiscus</span>(<span class="params">theme</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> giscusContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;giscus-container&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (!giscusContainer) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ¸…é™¤æ—§çš„è¯„è®º iframe</span></span></span><br><span class="line"><span class="language-javascript">    giscusContainer.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="property">src</span> = <span class="string">&#x27;https://giscus.app/client.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ›¿æ¢ä¸ºä½ çš„ GitHub ä»“åº“ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šusername/repoï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo&#x27;</span>, <span class="string">&#x27;your-github-username/your-repo-name&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">// æ›¿æ¢ä¸ºä½ çš„ repo-id å’Œ category-idï¼ˆåœ¨ giscus.app é…ç½®é¡µé¢ç”Ÿæˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-repo-id&#x27;</span>, <span class="string">&#x27;your-repo-id&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category&#x27;</span>, <span class="string">&#x27;your-category-name&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-category-id&#x27;</span>, <span class="string">&#x27;your-category-id&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å…¶ä»–å¸¸è§„æ¨èè®¾ç½®</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-mapping&#x27;</span>, <span class="string">&#x27;pathname&#x27;</span>);           <span class="comment">// ç”¨é¡µé¢è·¯å¾„åŒ¹é…è¯„è®ºå¸–</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-strict&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);                   <span class="comment">// è‹¥æ— åŒ¹é…å¸–åˆ™åˆ›å»ºæ–°å¸–</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-reactions-enabled&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);        <span class="comment">// å¯ç”¨è¡¨æƒ…ååº”</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-emit-metadata&#x27;</span>, <span class="string">&#x27;0&#x27;</span>);            <span class="comment">// ä¸è¾“å‡ºå…ƒæ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-input-position&#x27;</span>, <span class="string">&#x27;top&#x27;</span>);         <span class="comment">// è¾“å…¥æ¡†åœ¨è¯„è®ºä¸Šæ–¹</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, theme);                </span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-lang&#x27;</span>, <span class="string">&#x27;zh-CN&#x27;</span>);                 <span class="comment">// ä¸­æ–‡ç•Œé¢</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="title function_">setAttribute</span>(<span class="string">&#x27;crossorigin&#x27;</span>, <span class="string">&#x27;anonymous&#x27;</span>);           <span class="comment">// è·¨åŸŸèµ„æºå®‰å…¨</span></span></span><br><span class="line"><span class="language-javascript">    script.<span class="property">async</span> = <span class="literal">true</span>;                                       </span></span><br><span class="line"><span class="language-javascript">     </span></span><br><span class="line"><span class="language-javascript">    giscusContainer.<span class="title function_">appendChild</span>(script);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">getCurrentTheme</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark-theme&#x27;</span>) ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// é¡µé¢é¦–æ¬¡åŠ è½½ï¼Œæ ¹æ®å½“å‰ä¸»é¢˜æŒ‚è½½è¯„è®º</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç›‘å¬æŒ‰é’®ç‚¹å‡»åˆ‡æ¢ä¸»é¢˜ â†’ é‡è½½è¯„è®ºåŒº</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> buttons = [</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.toggleBtn&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mobile-toggle-theme&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    ];</span></span><br><span class="line"><span class="language-javascript">    buttons.<span class="title function_">forEach</span>(<span class="function"><span class="params">btn</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!btn) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">400</span>); <span class="comment">// ç¨ä½œå»¶è¿Ÿï¼Œç¡®ä¿ class åˆ‡æ¢å®Œæ¯•</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç›‘å¬ body class æ”¹å˜ï¼ˆä¿é™©æ–¹æ¡ˆï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">createGiscus</span>(<span class="title function_">getCurrentTheme</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123; <span class="attr">attributes</span>: <span class="literal">true</span>, <span class="attr">attributeFilter</span>: [<span class="string">&#x27;class&#x27;</span>] &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>âš ï¸ è¯·å°† <code>data-repo-id</code> å’Œ <code>data-category-id</code> æ›¿æ¢ä¸ºä½ ä» giscus.app è·å–çš„å€¼ã€‚</p>
</blockquote>
<hr>
<h2 id="å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿"><a href="#å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿" class="headerlink" title="å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿"></a>å››ã€å¼•å…¥è¯„è®ºæ¨¡å—åˆ°æ–‡ç« æ¨¡æ¿</h2><p>æ‰“å¼€æ–‡ä»¶ï¼š<code>themes/hexo-theme-Chic/layout/_page/post.ejs</code></p>
<p>æ‰¾åˆ°ä»£ç åº•éƒ¨ï¼Œåœ¨ <code>&lt;/article&gt;</code> ä¸Šæ–¹æ·»åŠ ä¸€è¡Œä»£ç  <code>&lt;%- partial(&#39;_partial/livers&#39;) %&gt;</code> ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">        &lt;section class=&quot;post-nav&quot;&gt;</span><br><span class="line">            &lt;% if(post.prev)&#123; %&gt;</span><br><span class="line">                &lt;a class=&quot;prev&quot; rel=&quot;prev&quot; href=&quot;&lt;%- url_for(post.prev.path)%&gt;&quot;&gt;&lt;%- post.prev.title%&gt;&lt;/a&gt;</span><br><span class="line">            &lt;% &#125; %&gt;</span><br><span class="line">            &lt;% if(post.next)&#123; %&gt;</span><br><span class="line">            &lt;a class=&quot;next&quot; rel=&quot;next&quot; href=&quot;&lt;%- url_for(post.next.path)%&gt;&quot;&gt;&lt;%- post.next.title%&gt;&lt;/a&gt;</span><br><span class="line">            &lt;% &#125; %&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">	&lt;%- partial(&#x27;_partial/livers&#x27;) %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/article&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šè®©è¯„è®ºåŒºå‡ºç°åœ¨æ¯ç¯‡æ–‡ç« çš„åº•éƒ¨ã€‚</p>
<hr>
<h2 id="äº”ã€é‡æ–°éƒ¨ç½²åšå®¢"><a href="#äº”ã€é‡æ–°éƒ¨ç½²åšå®¢" class="headerlink" title="äº”ã€é‡æ–°éƒ¨ç½²åšå®¢"></a>äº”ã€é‡æ–°éƒ¨ç½²åšå®¢</h2><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>ç„¶åè®¿é—®ä½ çš„åšå®¢æ–‡ç« é¡µé¢ï¼Œåº”è¯¥å°±èƒ½çœ‹åˆ° Giscus è¯„è®ºæ¡†</p>
<hr>
<h2 id="æˆåŠŸæ•ˆæœ"><a href="#æˆåŠŸæ•ˆæœ" class="headerlink" title="æˆåŠŸæ•ˆæœ"></a>æˆåŠŸæ•ˆæœ</h2><p><img src="https://github.com/user-attachments/assets/b75a7ffd-d99b-4d4a-9e95-cb43b06b36aa" alt="discussions"> </p>
<ul>
<li>æ”¯æŒ GitHub ç™»å½•è¯„è®º</li>
<li>è¯„è®ºå­˜å‚¨åœ¨ Discussions ä¸­ï¼Œä¾¿äºç®¡ç†</li>
<li>è¯„è®ºåŒºæ”¯æŒæ˜æš—ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼Œä¸ Chic åšå®¢é£æ ¼ä¸€è‡´</li>
</ul>
<hr>
<p>å¦‚æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š</p>
<ul>
<li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰åŠ è½½é”™è¯¯</li>
<li>ç¡®ä¿ repo-id å’Œ category-id æ­£ç¡®</li>
<li>ç¡®ä¿å¯ç”¨äº† Discussions åŠŸèƒ½</li>
</ul>
<hr>
<p>è¯¥é¡¹ç›®ä»£ç åŸºäº <a href="https://github.com/hexojs/hexo.git">Hexo</a> å’Œ <a href="https://github.com/Siricee/hexo-theme-Chic.git">hexo-theme-Chic</a> ã€‚</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>åšå®¢</tag>
        <tag>Blog</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>about</title>
    <url>/about/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title></title>
    <url>/js/code-copy.js</url>
    <content><![CDATA[document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('figure.highlight').forEach((figure) => {
    if (figure.querySelector('.copy-btn')) return;

    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.title = 'å¤åˆ¶';

    // ç¼©å°åçš„å¤åˆ¶å›¾æ ‡ï¼ˆ14*15ï¼‰
    const copyIcon = `
      <svg xmlns="http://www.w3.org/2000/svg" height="14" width="15" viewBox="0 0 24 24" fill="white">
        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
      </svg>
    `;

    // æˆåŠŸåæ˜¾ç¤ºçš„å‹¾ï¼ˆ14*15ï¼‰
    const checkIcon = `
      <svg xmlns="http://www.w3.org/2000/svg" height="14" width="15" viewBox="0 0 24 24" fill="#00cc66">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
      </svg>
    `;

    copyBtn.innerHTML = copyIcon;

    // æŒ‰é’®æ ·å¼ï¼ˆæµ…ç°åº•ã€ç¼©å°ï¼‰
    Object.assign(copyBtn.style, {
      position: 'absolute',
      top: '8px',
      right: '8px',
      padding: '4px',
      background: '#aaa', // æµ…ç°èƒŒæ™¯ âœ…
      border: 'none',
      borderRadius: '4px',
      cursor: 'pointer',
      opacity: '0.85',
      zIndex: 1000,
      transition: 'opacity 0.2s ease',
      boxShadow: '0 1px 3px rgba(0, 0, 0, 0.15)'
    });

    copyBtn.addEventListener('mouseover', () => copyBtn.style.opacity = '1');
    copyBtn.addEventListener('mouseout', () => copyBtn.style.opacity = '0.85');

    copyBtn.addEventListener('click', () => {
      const code = figure.querySelector('td.code');
      const text = code ? code.innerText : '';
      navigator.clipboard.writeText(text).then(() => {
        copyBtn.innerHTML = checkIcon;
        setTimeout(() => {
          copyBtn.innerHTML = copyIcon;
        }, 1000);
      });
    });

    figure.style.position = 'relative';
    figure.appendChild(copyBtn);
  });
});
]]></content>
  </entry>
  <entry>
    <title>tag</title>
    <url>/tag/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>category</title>
    <url>/category/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
